(this.webpackJsonptriple7=this.webpackJsonptriple7||[]).push([[9],{379:function(t,e,n){"use strict";function i(){return 0}n.d(e,"a",(function(){return i})),e.b=function(t){return function(){return t}}},380:function(t,e,n){"use strict";function i(t){return null==t?null:r(t)}function r(t){if("function"!==typeof t)throw new Error;return t}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}))},381:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const r=e[i],o=t+r,a=Math.abs(t)<Math.abs(r)?t-(o-r):r-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,i,r=this._n,o=0;if(r>0){for(o=t[--r];r>0&&(e=o,n=t[--r],o=e+n,i=n-(o-e),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(n=2*i,e=o+n,n==e-o&&(o=e))}return o}}},405:function(t,e,n){"use strict";function i(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}n.d(e,"a",(function(){return i}))},406:function(t,e,n){"use strict";function i(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}n.d(e,"a",(function(){return i}))},482:function(t,e,n){"use strict";var i=n(483);function r(t,e,n){var r,s,l,u;e=e||1;for(var c=0;c<t[0].length;c++){var h=t[0][c];(!c||h[0]<r)&&(r=h[0]),(!c||h[1]<s)&&(s=h[1]),(!c||h[0]>l)&&(l=h[0]),(!c||h[1]>u)&&(u=h[1])}var f=l-r,p=u-s,d=Math.min(f,p),g=d/2;if(0===d){var m=[r,s];return m.distance=0,m}for(var y=new i(void 0,o),v=r;v<l;v+=d)for(var _=s;_<u;_+=d)y.push(new a(v+g,_+g,g,t));var b=function(t){for(var e=0,n=0,i=0,r=t[0],o=0,s=r.length,l=s-1;o<s;l=o++){var u=r[o],c=r[l],h=u[0]*c[1]-c[0]*u[1];n+=(u[0]+c[0])*h,i+=(u[1]+c[1])*h,e+=3*h}return 0===e?new a(r[0][0],r[0][1],0,t):new a(n/e,i/e,0,t)}(t),P=new a(r+f/2,s+p/2,0,t);P.d>b.d&&(b=P);for(var w=y.length;y.length;){var x=y.pop();x.d>b.d&&(b=x,n&&console.log("found best %d after %d probes",Math.round(1e4*x.d)/1e4,w)),x.max-b.d<=e||(g=x.h/2,y.push(new a(x.x-g,x.y-g,g,t)),y.push(new a(x.x+g,x.y-g,g,t)),y.push(new a(x.x-g,x.y+g,g,t)),y.push(new a(x.x+g,x.y+g,g,t)),w+=4)}n&&(console.log("num probes: "+w),console.log("best distance: "+b.d));var D=[b.x,b.y];return D.distance=b.d,D}function o(t,e){return e.max-t.max}function a(t,e,n,i){this.x=t,this.y=e,this.h=n,this.d=function(t,e,n){for(var i=!1,r=1/0,o=0;o<n.length;o++)for(var a=n[o],l=0,u=a.length,c=u-1;l<u;c=l++){var h=a[l],f=a[c];h[1]>e!==f[1]>e&&t<(f[0]-h[0])*(e-h[1])/(f[1]-h[1])+h[0]&&(i=!i),r=Math.min(r,s(t,e,h,f))}return 0===r?0:(i?1:-1)*Math.sqrt(r)}(t,e,i),this.max=this.d+this.h*Math.SQRT2}function s(t,e,n,i){var r=n[0],o=n[1],a=i[0]-r,s=i[1]-o;if(0!==a||0!==s){var l=((t-r)*a+(e-o)*s)/(a*a+s*s);l>1?(r=i[0],o=i[1]):l>0&&(r+=a*l,o+=s*l)}return(a=t-r)*a+(s=e-o)*s}i.default&&(i=i.default),t.exports=r,t.exports.default=r},483:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return i}));class i{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),o=e[i];const a=i+1;if(a<this.length&&n(e[a],o)<0&&(i=a,o=e[a]),n(o,r)>=0)break;e[t]=o,t=i}e[t]=r}}function r(t,e){return t<e?-1:t>e?1:0}},488:function(t,e,n){"use strict";var i=n(380),r=n(379);const o=4294967296;var a=function(){let t=1;return()=>(t=(1664525*t+1013904223)%o)/o};function s(t,e){for(var n,i,r=0,o=(t=function(t,e){let n,i,r=t.length;for(;r;)i=e()*r--|0,n=t[r],t[r]=t[i],t[i]=n;return t}(Array.from(t),e)).length,a=[];r<o;)n=t[r],i&&c(i,n)?++r:(i=f(a=l(a,n)),r=0);return i}function l(t,e){var n,i;if(h(e,t))return[e];for(n=0;n<t.length;++n)if(u(e,t[n])&&h(p(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(u(p(t[n],t[i]),e)&&u(p(t[n],e),t[i])&&u(p(t[i],e),t[n])&&h(d(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function u(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function c(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function h(t,e){for(var n=0;n<e.length;++n)if(!c(t,e[n]))return!1;return!0}function f(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return p(t[0],t[1]);case 3:return d(t[0],t[1],t[2])}var e}function p(t,e){var n=t.x,i=t.y,r=t.r,o=e.x,a=e.y,s=e.r,l=o-n,u=a-i,c=s-r,h=Math.sqrt(l*l+u*u);return{x:(n+o+l/h*c)/2,y:(i+a+u/h*c)/2,r:(h+r+s)/2}}function d(t,e,n){var i=t.x,r=t.y,o=t.r,a=e.x,s=e.y,l=e.r,u=n.x,c=n.y,h=n.r,f=i-a,p=i-u,d=r-s,g=r-c,m=l-o,y=h-o,v=i*i+r*r-o*o,_=v-a*a-s*s+l*l,b=v-u*u-c*c+h*h,P=p*d-f*g,w=(d*b-g*_)/(2*P)-i,x=(g*m-d*y)/P,D=(p*_-f*b)/(2*P)-r,S=(f*y-p*m)/P,M=x*x+S*S-1,I=2*(o+w*x+D*S),j=w*w+D*D-o*o,N=-(Math.abs(M)>1e-6?(I+Math.sqrt(I*I-4*M*j))/(2*M):j/I);return{x:i+w+x*N,y:r+D+S*N,r:N}}function g(t,e,n){var i,r,o,a,s=t.x-e.x,l=t.y-e.y,u=s*s+l*l;u?(r=e.r+n.r,r*=r,a=t.r+n.r,r>(a*=a)?(i=(u+a-r)/(2*u),o=Math.sqrt(Math.max(0,a/u-i*i)),n.x=t.x-i*s-o*l,n.y=t.y-i*l+o*s):(i=(u+r-a)/(2*u),o=Math.sqrt(Math.max(0,r/u-i*i)),n.x=e.x+i*s-o*l,n.y=e.y+i*l+o*s)):(n.x=e.x+n.r,n.y=e.y)}function m(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function y(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,o=(e.y*n.r+n.y*e.r)/i;return r*r+o*o}function v(t){this._=t,this.next=null,this.previous=null}function _(t,e){if(!(a=(n=t,t="object"===typeof n&&"length"in n?n:Array.from(n)).length))return 0;var n,i,r,o,a,l,u,c,h,f,p,d;if((i=t[0]).x=0,i.y=0,!(a>1))return i.r;if(r=t[1],i.x=-r.r,r.x=i.r,r.y=0,!(a>2))return i.r+r.r;g(r,i,o=t[2]),i=new v(i),r=new v(r),o=new v(o),i.next=o.previous=r,r.next=i.previous=o,o.next=r.previous=i;t:for(c=3;c<a;++c){g(i._,r._,o=t[c]),o=new v(o),h=r.next,f=i.previous,p=r._.r,d=i._.r;do{if(p<=d){if(m(h._,o._)){r=h,i.next=r,r.previous=i,--c;continue t}p+=h._.r,h=h.next}else{if(m(f._,o._)){(i=f).next=r,r.previous=i,--c;continue t}d+=f._.r,f=f.previous}}while(h!==f.next);for(o.previous=i,o.next=r,i.next=r.previous=r=o,l=y(i);(o=o.next)!==r;)(u=y(o))<l&&(i=o,l=u);r=i.next}for(i=[r._],o=r;(o=o.next)!==r;)i.push(o._);for(o=s(i,e),c=0;c<a;++c)(i=t[c]).x-=o.x,i.y-=o.y;return o.r}function b(t){return Math.sqrt(t.value)}e.a=function(){var t=null,e=1,n=1,o=r.a;function s(i){const s=a();return i.x=e/2,i.y=n/2,t?i.eachBefore(P(t)).eachAfter(w(o,.5,s)).eachBefore(x(1)):i.eachBefore(P(b)).eachAfter(w(r.a,1,s)).eachAfter(w(o,i.r/Math.min(e,n),s)).eachBefore(x(Math.min(e,n)/(2*i.r))),i}return s.radius=function(e){return arguments.length?(t=Object(i.a)(e),s):t},s.size=function(t){return arguments.length?(e=+t[0],n=+t[1],s):[e,n]},s.padding=function(t){return arguments.length?(o="function"===typeof t?t:Object(r.b)(+t),s):o},s};function P(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function w(t,e,n){return function(i){if(r=i.children){var r,o,a,s=r.length,l=t(i)*e||0;if(l)for(o=0;o<s;++o)r[o].r+=l;if(a=_(r,n),l)for(o=0;o<s;++o)r[o].r-=l;i.r=a+l}}}function x(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}},502:function(t,e,n){"use strict";n.r(e),n.d(e,"GraticuleSeries",(function(){return ot})),n.d(e,"MapChart",(function(){return Oi})),n.d(e,"MapLine",(function(){return U})),n.d(e,"MapLineSeries",(function(){return tt})),n.d(e,"MapPointSeries",(function(){return Ei})),n.d(e,"MapPolygon",(function(){return ki})),n.d(e,"MapPolygonSeries",(function(){return Ri})),n.d(e,"ClusteredPointSeries",(function(){return Yi})),n.d(e,"MapSeries",(function(){return a})),n.d(e,"ZoomControl",(function(){return Fi})),n.d(e,"getGeoRectangle",(function(){return Ii})),n.d(e,"getGeoCircle",(function(){return xi})),n.d(e,"normalizeGeoPoint",(function(){return ji})),n.d(e,"getGeoCentroid",(function(){return Di})),n.d(e,"getGeoBounds",(function(){return Mi})),n.d(e,"getGeoArea",(function(){return Si})),n.d(e,"geoMercator",(function(){return oe})),n.d(e,"geoOrthographic",(function(){return Ji})),n.d(e,"geoEquirectangular",(function(){return $i})),n.d(e,"geoAlbersUsa",(function(){return Ui})),n.d(e,"geoEqualEarth",(function(){return rr})),n.d(e,"geoNaturalEarth1",(function(){return ar})),n.d(e,"DefaultTheme",(function(){return se}));var i=n(63),r=n(2),o=n(13);class a extends i.a{constructor(){super(...arguments),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geometries",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geoJSONparsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_excluded",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_notIncluded",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_afterNew(){this.fields.push("geometry","geometryType"),this._setRawDefault("geometryField","geometry"),this._setRawDefault("geometryTypeField","geometryType"),this._setRawDefault("idField","id"),this.on("geoJSON",(t=>{let e=this._prevSettings.geoJSON;e&&e!=t&&this.data.clear()})),super._afterNew()}_handleDirties(){const t=this.get("geoJSON");let e=this._prevSettings.geoJSON;e&&e!=t&&(this._prevSettings.geoJSON=void 0,this._geoJSONparsed=!1),this._geoJSONparsed||(this._parseGeoJSON(),this._geoJSONparsed=!0)}_prepareChildren(){if(super._prepareChildren(),this._valuesDirty&&this._handleDirties(),this.get("geoJSON")&&(this.isDirty("geoJSON")||this.isDirty("include")||this.isDirty("exclude"))){this._handleDirties();const t=this.chart,e=this.get("exclude");e&&(t&&(t._centerLocation=null),r.each(e,(t=>{const e=this.getDataItemById(t);e&&this._excludeDataItem(e)}))),e&&0!=e.length||(r.each(this._excluded,(t=>{this._unexcludeDataItem(t)})),this._excluded=[]);const n=this.get("include");n&&(t&&(t._centerLocation=null),r.each(this.dataItems,(t=>{const e=t.get("id");e&&-1==n.indexOf(e)?this._notIncludeDataItem(t):this._unNotIncludeDataItem(t)}))),n||(r.each(this._notIncluded,(t=>{this._unNotIncludeDataItem(t)})),this._notIncluded=[])}}_excludeDataItem(t){this._removeGeometry(t.get("geometry")),r.move(this._excluded,t)}_unexcludeDataItem(t){this._addGeometry(t.get("geometry"),this)}_notIncludeDataItem(t){this._removeGeometry(t.get("geometry")),r.move(this._notIncluded,t)}_unNotIncludeDataItem(t){this._addGeometry(t.get("geometry"),this)}checkInclude(t,e,n){if(e){if(0==e.length)return!1;if(-1==e.indexOf(t))return!1}return!(n&&n.length>0&&-1!=n.indexOf(t))}_parseGeoJSON(){const t=this.get("geoJSON");if(t){let e;"FeatureCollection"==t.type?e=t.features:"Feature"==t.type?e=[t]:-1!=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(t.type)?e=[{geometry:t}]:console.log("nothing found in geoJSON");const n=this.get("geodataNames");if(e){const t=this.get("idField","id");for(let i=0,a=e.length;i<a;i++){let a=e[i],s=a.geometry;if(s){let e=s.type,i=a[t];if(n&&n[i]&&(a.properties.name=n[i]),-1!=this._types.indexOf(e)){let n,l;null!=i&&(n=r.find(this.dataItems,(t=>t.get("id")==i))),n&&(l=n.dataContext),n?l.geometry||(l.geometry=s,l.geometryType=e,n.set("geometry",s),n.set("geometryType",e),this.processDataItem(n)):(l={geometry:s,geometryType:e,madeFromGeoData:!0},l[t]=i,this.data.push(l)),o.softCopyProperties(a.properties,l)}}}}const i="geodataprocessed";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this})}}_placeBulletsContainer(t){this.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){}projection(){const t=this.chart;if(t)return t.get("projection")}geoPath(){const t=this.chart;if(t)return t.getPrivate("geoPath")}_addGeometry(t,e){if(t&&e.get("affectsBounds",!0)){this._geometries.push(t);const e=this.chart;e&&e.markDirtyGeometries()}}_removeGeometry(t){if(t){r.remove(this._geometries,t);const e=this.chart;e&&e.markDirtyGeometries()}}_dispose(){super._dispose();const t=this.chart;t&&t.series.removeValue(this)}_onDataClear(){super._onDataClear(),this._geoJSONparsed=!1,this._markDirtyKey("exclude")}}Object.defineProperty(a,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapSeries"}),Object.defineProperty(a,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:i.a.classNames.concat([a.className])});var s=n(4),l=n(5),u=n(17),c=n(381),h=1e-6,f=1e-12,p=Math.PI,d=p/2,g=p/4,m=2*p,y=180/p,v=p/180,_=Math.abs,b=Math.atan,P=Math.atan2,w=Math.cos,x=Math.ceil,D=Math.exp,S=(Math.floor,Math.hypot),M=Math.log,I=(Math.pow,Math.sin),j=Math.sign||function(t){return t>0?1:t<0?-1:0},N=Math.sqrt,C=Math.tan;function O(t){return t>1?d:t<-1?-d:Math.asin(t)}function E(t){return(t=I(t/2))*t}function L(){}function T(t,e){t&&R.hasOwnProperty(t.type)&&R[t.type](t,e)}var k={Feature:function(t,e){T(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)T(n[i].geometry,e)}},R={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){z(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)z(n[i],e,0)},Polygon:function(t,e){B(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)B(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)T(n[i],e)}};function z(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function B(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)z(t[n],e,1);e.polygonEnd()}var G,X,Y,Z,A=function(t,e){t&&k.hasOwnProperty(t.type)?k[t.type](t,e):T(t,e)},F={sphere:L,point:L,lineStart:function(){F.point=J,F.lineEnd=W},lineEnd:L,polygonStart:L,polygonEnd:L};function W(){F.point=F.lineEnd=L}function J(t,e){X=t*=v,Y=I(e*=v),Z=w(e),F.point=V}function V(t,e){t*=v;var n=I(e*=v),i=w(e),r=_(t-X),o=w(r),a=i*I(r),s=Z*n-Y*i*o,l=Y*n+Z*i*o;G.add(P(N(a*a+s*s),l)),X=t,Y=n,Z=i}var $=function(t){return G=new c.a,A(t,F),+G},H=[null,null],q={type:"LineString",coordinates:H};class U extends u.a{constructor(){super(...arguments),Object.defineProperty(this,"_projectionDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),this._projectionDirty||this.isDirty("geometry")||this.isDirty("precision")){const t=this.get("geometry");if(t){const e=this.getPrivate("series");if(e){const n=e.chart;if(n){const i=n.get("projection");let r=null;i&&i.clipAngle&&(r=i.clipAngle(),i.precision(this.get("precision",.5)));const o=this.dataItem,a=n.getPrivate("geoPath");if(a&&o)if(this._clear=!0,"straight"==o.get("lineType",e.get("lineType"))){const t=this.get("geometry");if(t){let e=t.coordinates;if(e){let i;"LineString"==t.type?i=[e]:"MultiLineString"==t.type&&(i=e),this.set("draw",(t=>{for(let e=0;e<i.length;e++){let r=i[e];if(r.length>0){const e=r[0],i=n.convert({longitude:e[0],latitude:e[1]});t.lineTo(i.x,i.y);for(let o=0;o<r.length;o++){const e=r[o],i=n.convert({longitude:e[0],latitude:e[1]});t.lineTo(i.x,i.y)}}}}))}}}else this.set("draw",(n=>{i&&!1===e.get("clipBack")&&i.clipAngle(180),a.context(this._display),a(t),a.context(null),i&&i.clipAngle&&i.clipAngle(r)}))}}}const e="linechanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}}markDirtyProjection(){this.markDirty(),this._projectionDirty=!0}_clearDirty(){super._clearDirty(),this._projectionDirty=!1}_getTooltipPoint(){let t=this.get("tooltipX"),e=this.get("tooltipY"),n=0,i=0;if(s.isNumber(t)&&(n=t),s.isNumber(e)&&(i=e),t instanceof l.a){const e=this.positionToGeoPoint(t.value),r=this.getPrivate("series");if(r){const t=r.chart;if(t){const r=t.convert(e);n=r.x,i=r.y}}}return{x:n,y:i}}positionToGeoPoint(t){const e=this.get("geometry"),n=this.getPrivate("series"),i=n.chart,r=this.dataItem;if(e&&n&&i&&r){const s=r.get("lineType",n.get("lineType"));let l,u,c,h=$(e),f=0,p=0,d=0,g=e.coordinates;if(g){let n;"LineString"==e.type?n=[g]:"MultiLineString"==e.type&&(n=g);for(let e=0;e<n.length;e++){let i=n[e];if(i.length>1){for(let r=1;r<i.length;r++)if(u=i[r-1],c=i[r],p=f/h,o=u,a=c,H[0]=o,H[1]=a,l=$(q),f+=l,d=f/h,p<=t&&d>t){e=n.length;break}}else 1==i.length&&(u=i[0],c=i[0],p=0,d=1)}if(u&&c){let e,n=(t-p)/(d-p);if("straight"==s){let t=i.convert({longitude:u[0],latitude:u[1]}),e=i.convert({longitude:c[0],latitude:c[1]}),r=t.x+(e.x-t.x)*n,o=t.y+(e.y-t.y)*n;return i.invert({x:r,y:o})}return e=function(t,e){var n=t[0]*v,i=t[1]*v,r=e[0]*v,o=e[1]*v,a=w(i),s=I(i),l=w(o),u=I(o),c=a*w(n),h=a*I(n),f=l*w(r),p=l*I(r),d=2*O(N(E(o-i)+a*l*E(r-n))),g=I(d),m=d?function(t){var e=I(t*=d)/g,n=I(d-t)/g,i=n*c+e*f,r=n*h+e*p,o=n*s+e*u;return[P(r,i)*y,P(o,N(i*i+r*r))*y]}:function(){return[n*y,i*y]};return m.distance=d,m}(u,c)(n),{longitude:e[0],latitude:e[1]}}}}var o,a;return{longitude:0,latitude:0}}}Object.defineProperty(U,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapLine"}),Object.defineProperty(U,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.a.classNames.concat([U.className])});var K=n(21),Q=n(24);class tt extends a{constructor(){super(...arguments),Object.defineProperty(this,"mapLines",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new K.c(Q.a.new({}),(()=>U._new(this._root,{},[this.mapLines.template]))))}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["LineString","MultiLineString"]})}_afterNew(){this.fields.push("lineType"),this._setRawDefault("lineTypeField","lineType"),super._afterNew()}makeMapLine(t){const e=this.children.push(this.mapLines.make());return e._setDataItem(t),this.mapLines.push(e),e}markDirtyProjection(){r.each(this.dataItems,(t=>{let e=t.get("mapLine");e&&e.markDirtyProjection()}))}_prepareChildren(){super._prepareChildren(),this.isDirty("stroke")&&this.mapLines.template.set("stroke",this.get("stroke"))}processDataItem(t){super.processDataItem(t);let e=t.get("mapLine");e||(e=this.makeMapLine(t)),this._handlePointsToConnect(t),t.on("pointsToConnect",(()=>{this._handlePointsToConnect(t)})),t.set("mapLine",e),this._addGeometry(t.get("geometry"),this),e.setPrivate("series",this)}_handlePointsToConnect(t){const e=t.get("pointsToConnect");e&&(r.each(e,(e=>{e.on("geometry",(()=>{this.markDirtyValues(t)})),e.on("longitude",(()=>{this.markDirtyValues(t)})),e.on("latitude",(()=>{this.markDirtyValues(t)}))})),this.markDirtyValues(t))}markDirtyValues(t){if(super.markDirtyValues(),t){const e=t.get("mapLine");if(e){const n=t.get("pointsToConnect");if(n){let i=[];r.each(n,(t=>{const e=t.get("longitude"),n=t.get("latitude");if(null!=e&&null!=n)i.push([e,n]);else{const e=t.get("geometry");if(e){const t=e.coordinates;t&&i.push([t[0],t[1]])}}}));let o={type:"LineString",coordinates:i};t.setRaw("geometry",o),e.set("geometry",o)}else e.set("geometry",t.get("geometry"))}}}disposeDataItem(t){super.disposeDataItem(t);const e=t.get("mapLine");e&&(this.mapLines.removeValue(e),e.dispose())}_excludeDataItem(t){super._excludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!1)}_unexcludeDataItem(t){super._unexcludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!0)}_notIncludeDataItem(t){super._notIncludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!1)}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!0)}}Object.defineProperty(tt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapLineSeries"}),Object.defineProperty(tt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:a.classNames.concat([tt.className])});var et=n(405);function nt(t,e,n){var i=Object(et.a)(t,e-h,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function it(t,e,n){var i=Object(et.a)(t,e-h,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function rt(){var t,e,n,i,r,o,a,s,l,u,c,f,p=10,d=p,g=90,m=360,y=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return Object(et.a)(x(i/g)*g,n,g).map(c).concat(Object(et.a)(x(s/m)*m,a,m).map(f)).concat(Object(et.a)(x(e/p)*p,t,p).filter((function(t){return _(t%g)>h})).map(l)).concat(Object(et.a)(x(o/d)*d,r,d).filter((function(t){return _(t%m)>h})).map(u))}return v.lines=function(){return b().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[c(i).concat(f(a).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],i>n&&(t=i,i=n,n=t),s>a&&(t=s,s=a,a=t),v.precision(y)):[[i,s],[n,a]]},v.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),o>r&&(n=o,o=r,r=n),v.precision(y)):[[e,o],[t,r]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(g=+t[0],m=+t[1],v):[g,m]},v.stepMinor=function(t){return arguments.length?(p=+t[0],d=+t[1],v):[p,d]},v.precision=function(h){return arguments.length?(y=+h,l=nt(o,r,90),u=it(e,t,y),c=nt(s,a,90),f=it(i,n,y),v):y},v.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}class ot extends tt{constructor(){super(...arguments),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:this.makeDataItem({})})}_afterNew(){super._afterNew(),this.dataItems.push(this._dataItem),this._generate()}_updateChildren(){if(super._updateChildren(),this.isDirty("step")&&this._generate(),this.isDirty("clipExtent")&&this.get("clipExtent")){const t=this.chart;t&&t.events.on("geoboundschanged",(()=>{this._generate()})),this._generate()}}_generate(){let t=rt();if(t){if(this.get("clipExtent")){const e=this.chart;if(e){const n=e.geoBounds();n&&t.extent([[n.left,n.bottom],[n.right,n.top]])}}const e=this.get("step",10);t.stepMinor([360,360]),t.stepMajor([e,e]),this._dataItem.set("geometry",t())}}}Object.defineProperty(ot,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GraticuleSeries"}),Object.defineProperty(ot,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:tt.classNames.concat([ot.className])});var at=n(51),st=n(22),lt=function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n};function ut(t,e){return _(t)>p&&(t-=Math.round(t/m)*m),[t,e]}function ct(t,e,n){return(t%=m)?e||n?lt(ft(t),pt(e,n)):ft(t):e||n?pt(e,n):ut}function ht(t){return function(e,n){return _(e+=t)>p&&(e-=Math.round(e/m)*m),[e,n]}}function ft(t){var e=ht(t);return e.invert=ht(-t),e}function pt(t,e){var n=w(t),i=I(t),r=w(e),o=I(e);function a(t,e){var a=w(e),s=w(t)*a,l=I(t)*a,u=I(e),c=u*n+s*i;return[P(l*r-c*o,s*n-u*i),O(c*r+l*o)]}return a.invert=function(t,e){var a=w(e),s=w(t)*a,l=I(t)*a,u=I(e),c=u*r-l*o;return[P(l*r+u*o,s*n+c*i),O(c*n-s*i)]},a}ut.invert=ut;var dt=function(){var t,e=[];return{point:function(e,n,i){t.push([e,n,i])},lineStart:function(){e.push(t=[])},lineEnd:L,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},gt=function(t,e){return _(t[0]-e[0])<h&&_(t[1]-e[1])<h};function mt(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}var yt=function(t,e,n,i,r){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(gt(i,a)){if(!i[2]&&!a[2]){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);return void r.lineEnd()}a[0]+=2e-6}s.push(n=new mt(i,t,null,!0)),l.push(n.o=new mt(i,null,n,!1)),s.push(n=new mt(a,t,null,!1)),l.push(n.o=new mt(a,null,n,!0))}})),s.length){for(l.sort(e),vt(s),vt(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=u.length;o<a;++o)r.point((c=u[o])[0],c[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(u=f.p.z,o=u.length-1;o>=0;--o)r.point((c=u[o])[0],c[1]);else i(f.x,f.p.x,-1,r);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);r.lineEnd()}}};function vt(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function _t(t){return[P(t[1],t[0]),O(t[2])]}function bt(t){var e=t[0],n=t[1],i=w(n);return[i*w(e),i*I(e),I(n)]}function Pt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function wt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function xt(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Dt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function St(t){var e=N(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Mt(t){return _(t[0])<=p?t[0]:j(t[0])*((_(t[0])+p)%m-p)}var It=n(406),jt=function(t,e,n,i){return function(r){var o,a,s,l=e(r),u=dt(),f=e(u),y=!1,v={point:_,lineStart:x,lineEnd:D,polygonStart:function(){v.point=S,v.lineStart=M,v.lineEnd=j,a=[],o=[]},polygonEnd:function(){v.point=_,v.lineStart=x,v.lineEnd=D,a=Object(It.a)(a);var t=function(t,e){var n=Mt(e),i=e[1],r=I(i),o=[I(n),-w(n),0],a=0,s=0,l=new c.a;1===r?i=d+h:-1===r&&(i=-d-h);for(var u=0,f=t.length;u<f;++u)if(v=(y=t[u]).length)for(var y,v,_=y[v-1],b=Mt(_),x=_[1]/2+g,D=I(x),S=w(x),M=0;M<v;++M,b=N,D=E,S=L,_=j){var j=y[M],N=Mt(j),C=j[1]/2+g,E=I(C),L=w(C),T=N-b,k=T>=0?1:-1,R=k*T,z=R>p,B=D*E;if(l.add(P(B*k*I(R),S*L+B*w(R))),a+=z?T+k*m:T,z^b>=n^N>=n){var G=wt(bt(_),bt(j));St(G);var X=wt(o,G);St(X);var Y=(z^T>=0?-1:1)*O(X[2]);(i>Y||i===Y&&(G[0]||G[1]))&&(s+=z^T>=0?1:-1)}}return(a<-h||a<h&&l<-1e-12)^1&s}(o,i);a.length?(y||(r.polygonStart(),y=!0),yt(a,Ct,t,n,r)):t&&(y||(r.polygonStart(),y=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),y&&(r.polygonEnd(),y=!1),a=o=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function _(e,n){t(e,n)&&r.point(e,n)}function b(t,e){l.point(t,e)}function x(){v.point=b,l.lineStart()}function D(){v.point=_,l.lineEnd()}function S(t,e){s.push([t,e]),f.point(t,e)}function M(){f.lineStart(),s=[]}function j(){S(s[0][0],s[0][1]),f.lineEnd();var t,e,n,i,l=f.clean(),c=u.result(),h=c.length;if(s.pop(),o.push(s),s=null,h)if(1&l){if((e=(n=c[0]).length-1)>0){for(y||(r.polygonStart(),y=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else h>1&&2&l&&c.push(c.pop().concat(c.shift())),a.push(c.filter(Nt))}return v}};function Nt(t){return t.length>1}function Ct(t,e){return((t=t.x)[0]<0?t[1]-d-h:d-t[1])-((e=e.x)[0]<0?e[1]-d-h:d-e[1])}var Ot=jt((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?p:-p,l=_(o-n);_(l-p)<h?(t.point(n,i=(i+a)/2>0?d:-d),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=p&&(_(n-r)<h&&(n-=r*h),_(o-s)<h&&(o-=s*h),i=function(t,e,n,i){var r,o,a=I(t-n);return _(a)>h?b((I(e)*(o=w(i))*I(n)-I(i)*(r=w(e))*I(t))/(r*o*a)):(e+i)/2}(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*d,i.point(-p,r),i.point(0,r),i.point(p,r),i.point(p,0),i.point(p,-r),i.point(0,-r),i.point(-p,-r),i.point(-p,0),i.point(-p,r);else if(_(t[0]-e[0])>h){var o=t[0]<e[0]?p:-p;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-p,-d]);var Et=function(t){return function(){return t}};function Lt(t,e,n,i,r,o){if(n){var a=w(e),s=I(e),l=i*n;null==r?(r=e+i*m,o=e-l/2):(r=Tt(a,r),o=Tt(a,o),(i>0?r<o:r>o)&&(r+=i*m));for(var u,c=r;i>0?c>o:c<o;c-=l)u=_t([a,-s*w(c),-s*I(c)]),t.point(u[0],u[1])}}function Tt(t,e){(e=bt(e))[0]-=t,St(e);var n,i=(n=-e[1])>1?0:n<-1?p:Math.acos(n);return((-e[2]<0?-i:i)+m-h)%m}var kt=function(){var t,e,n=Et([0,0]),i=Et(90),r=Et(2),o={point:function(n,i){t.push(n=e(n,i)),n[0]*=y,n[1]*=y}};function a(){var a=n.apply(this,arguments),s=i.apply(this,arguments)*v,l=r.apply(this,arguments)*v;return t=[],e=ct(-a[0]*v,-a[1]*v,0).invert,Lt(o,s,l,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"===typeof t?t:Et([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(i="function"===typeof t?t:Et(+t),a):i},a.precision=function(t){return arguments.length?(r="function"===typeof t?t:Et(+t),a):r},a},Rt=1e9,zt=-Rt;function Bt(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,s,u){var c=0,h=0;if(null==r||(c=a(r,s))!==(h=a(o,s))||l(r,o)<0^s>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+s+4)%4)!==h);else u.point(o[0],o[1])}function a(i,r){return _(i[0]-t)<h?r>0?0:3:_(i[0]-n)<h?r>0?2:1:_(i[1]-e)<h?r>0?1:0:r>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,u,c,h,f,p,d,g,m,y,v,_=a,b=dt(),P={point:w,lineStart:function(){P.point=x,u&&u.push(c=[]);y=!0,m=!1,d=g=NaN},lineEnd:function(){l&&(x(h,f),p&&m&&b.rejoin(),l.push(b.result()));P.point=w,m&&_.lineEnd()},polygonStart:function(){_=b,l=[],u=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var o,a,s=u[n],l=1,c=s.length,h=s[0],f=h[0],p=h[1];l<c;++l)o=f,a=p,f=(h=s[l])[0],p=h[1],a<=i?p>i&&(f-o)*(i-a)>(p-a)*(t-o)&&++e:p<=i&&(f-o)*(i-a)<(p-a)*(t-o)&&--e;return e}(),n=v&&e,r=(l=Object(It.a)(l)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&yt(l,s,e,o,a),a.polygonEnd());_=a,l=u=c=null}};function w(t,e){r(t,e)&&_.point(t,e)}function x(o,a){var s=r(o,a);if(u&&c.push([o,a]),y)h=o,f=a,p=s,y=!1,s&&(_.lineStart(),_.point(o,a));else if(s&&m)_.point(o,a);else{var l=[d=Math.max(zt,Math.min(Rt,d)),g=Math.max(zt,Math.min(Rt,g))],b=[o=Math.max(zt,Math.min(Rt,o)),a=Math.max(zt,Math.min(Rt,a))];!function(t,e,n,i,r,o){var a,s=t[0],l=t[1],u=0,c=1,h=e[0]-s,f=e[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>u&&(u=a)}if(a=r-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<c&&(c=a)}if(a=i-l,f||!(a>0)){if(a/=f,f<0){if(a<u)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>u&&(u=a)}else if(f>0){if(a<u)return;a<c&&(c=a)}return u>0&&(t[0]=s+u*h,t[1]=l+u*f),c<1&&(e[0]=s+c*h,e[1]=l+c*f),!0}}}}}(l,b,t,e,n,i)?s&&(_.lineStart(),_.point(o,a),v=!1):(m||(_.lineStart(),_.point(l[0],l[1])),_.point(b[0],b[1]),s||_.lineEnd(),v=!1)}d=o,g=a,m=s}return P}}var Gt=t=>t;function Xt(t){return function(e){var n=new Yt;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Yt(){}Yt.prototype={constructor:Yt,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Zt=1/0,At=Zt,Ft=-Zt,Wt=Ft;var Jt={point:function(t,e){t<Zt&&(Zt=t);t>Ft&&(Ft=t);e<At&&(At=e);e>Wt&&(Wt=e)},lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L,result:function(){var t=[[Zt,At],[Ft,Wt]];return Ft=Wt=-(At=Zt=1/0),t}};function Vt(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),A(n,t.stream(Jt)),e(Jt.result()),null!=i&&t.clipExtent(i),t}function $t(t,e,n){return Vt(t,(function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+e[0][0]+(i-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(r-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function Ht(t,e,n){return $t(t,[[0,0],e],n)}function qt(t,e,n){return Vt(t,(function(n){var i=+e,r=i/(n[1][0]-n[0][0]),o=(i-r*(n[1][0]+n[0][0]))/2,a=-r*n[0][1];t.scale(150*r).translate([o,a])}),n)}function Ut(t,e,n){return Vt(t,(function(n){var i=+e,r=i/(n[1][1]-n[0][1]),o=-r*n[0][0],a=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([o,a])}),n)}var Kt=w(30*v),Qt=function(t,e){return+e?function(t,e){function n(i,r,o,a,s,l,u,c,f,p,d,g,m,y){var v=u-i,b=c-r,w=v*v+b*b;if(w>4*e&&m--){var x=a+p,D=s+d,S=l+g,M=N(x*x+D*D+S*S),I=O(S/=M),j=_(_(S)-1)<h||_(o-f)<h?(o+f)/2:P(D,x),C=t(j,I),E=C[0],L=C[1],T=E-i,k=L-r,R=b*T-v*k;(R*R/w>e||_((v*T+b*k)/w-.5)>.3||a*p+s*d+l*g<Kt)&&(n(i,r,o,a,s,l,E,L,j,x/=M,D/=M,S,m,y),y.point(E,L),n(E,L,j,x,D,S,u,c,f,p,d,g,m,y))}}return function(e){var i,r,o,a,s,l,u,c,h,f,p,d,g={point:m,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function m(n,i){n=t(n,i),e.point(n[0],n[1])}function y(){c=NaN,g.point=v,e.lineStart()}function v(i,r){var o=bt([i,r]),a=t(i,r);n(c,h,u,f,p,d,c=a[0],h=a[1],u=i,f=o[0],p=o[1],d=o[2],16,e),e.point(c,h)}function _(){g.point=m,e.lineEnd()}function b(){y(),g.point=P,g.lineEnd=w}function P(t,e){v(i=t,e),r=c,o=h,a=f,s=p,l=d,g.point=v}function w(){n(c,h,u,f,p,d,r,o,i,a,s,l,16,e),g.lineEnd=_,_()}return g}}(t,e):function(t){return Xt({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var te=Xt({point:function(t,e){this.stream.point(t*v,e*v)}});function ee(t,e,n,i,r,o){if(!o)return function(t,e,n,i,r){function o(o,a){return[e+t*(o*=i),n-t*(a*=r)]}return o.invert=function(o,a){return[(o-e)/t*i,(n-a)/t*r]},o}(t,e,n,i,r);var a=w(o),s=I(o),l=a*t,u=s*t,c=a/t,h=s/t,f=(s*n-a*e)/t,p=(s*e+a*n)/t;function d(t,o){return[l*(t*=i)-u*(o*=r)+e,n-u*t-l*o]}return d.invert=function(t,e){return[i*(c*t-h*e+f),r*(p-h*t-c*e)]},d}function ne(t){return ie((function(){return t}))()}function ie(t){var e,n,i,r,o,a,s,l,u,c,f=150,d=480,g=250,m=0,b=0,P=0,x=0,D=0,S=0,M=1,I=1,j=null,C=Ot,O=null,E=Gt,L=.5;function T(t){return l(t[0]*v,t[1]*v)}function k(t){return(t=l.invert(t[0],t[1]))&&[t[0]*y,t[1]*y]}function R(){var t=ee(f,0,0,M,I,S).apply(null,e(m,b)),i=ee(f,d-t[0],g-t[1],M,I,S);return n=ct(P,x,D),s=lt(e,i),l=lt(n,s),a=Qt(s,L),z()}function z(){return u=c=null,T}return T.stream=function(t){return u&&c===t?u:u=te(function(t){return Xt({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(C(a(E(c=t)))))},T.preclip=function(t){return arguments.length?(C=t,j=void 0,z()):C},T.postclip=function(t){return arguments.length?(E=t,O=i=r=o=null,z()):E},T.clipAngle=function(t){return arguments.length?(C=+t?function(t){var e=w(t),n=2*v,i=e>0,r=_(e)>h;function o(t,n){return w(t)*w(n)>e}function a(t,n,i){var r=[1,0,0],o=wt(bt(t),bt(n)),a=Pt(o,o),s=o[0],l=a-s*s;if(!l)return!i&&t;var u=e*a/l,c=-e*s/l,f=wt(r,o),d=Dt(r,u);xt(d,Dt(o,c));var g=f,m=Pt(d,g),y=Pt(g,g),v=m*m-y*(Pt(d,d)-1);if(!(v<0)){var b=N(v),P=Dt(g,(-m-b)/y);if(xt(P,d),P=_t(P),!i)return P;var w,x=t[0],D=n[0],S=t[1],M=n[1];D<x&&(w=x,x=D,D=w);var I=D-x,j=_(I-p)<h;if(!j&&M<S&&(w=S,S=M,M=w),j||I<h?j?S+M>0^P[1]<(_(P[0]-x)<h?S:M):S<=P[1]&&P[1]<=M:I>p^(x<=P[0]&&P[0]<=D)){var C=Dt(g,(-m+b)/y);return xt(C,d),[P,_t(C)]}}}function s(e,n){var r=i?t:p-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return jt(o,(function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,f){var d,g=[h,f],m=o(h,f),y=i?m?0:s(h,f):m?s(h+(h<0?p:-p),f):0;if(!e&&(u=l=m)&&t.lineStart(),m!==l&&(!(d=a(e,g))||gt(e,d)||gt(g,d))&&(g[2]=1),m!==l)c=0,m?(t.lineStart(),d=a(g,e),t.point(d[0],d[1])):(d=a(e,g),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(r&&e&&i^m){var v;y&n||!(v=a(g,e,!0))||(c=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!m||e&&gt(e,g)||t.point(g[0],g[1]),e=g,l=m,n=y},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),(function(e,i,r,o){Lt(o,t,n,r,e,i)}),i?[0,-t]:[-p,t-p])}(j=t*v):(j=null,Ot),z()):j*y},T.clipExtent=function(t){return arguments.length?(E=null==t?(O=i=r=o=null,Gt):Bt(O=+t[0][0],i=+t[0][1],r=+t[1][0],o=+t[1][1]),z()):null==O?null:[[O,i],[r,o]]},T.scale=function(t){return arguments.length?(f=+t,R()):f},T.translate=function(t){return arguments.length?(d=+t[0],g=+t[1],R()):[d,g]},T.center=function(t){return arguments.length?(m=t[0]%360*v,b=t[1]%360*v,R()):[m*y,b*y]},T.rotate=function(t){return arguments.length?(P=t[0]%360*v,x=t[1]%360*v,D=t.length>2?t[2]%360*v:0,R()):[P*y,x*y,D*y]},T.angle=function(t){return arguments.length?(S=t%360*v,R()):S*y},T.reflectX=function(t){return arguments.length?(M=t?-1:1,R()):M<0},T.reflectY=function(t){return arguments.length?(I=t?-1:1,R()):I<0},T.precision=function(t){return arguments.length?(a=Qt(s,L=t*t),z()):N(L)},T.fitExtent=function(t,e){return $t(T,t,e)},T.fitSize=function(t,e){return Ht(T,t,e)},T.fitWidth=function(t,e){return qt(T,t,e)},T.fitHeight=function(t,e){return Ut(T,t,e)},function(){return e=t.apply(this,arguments),T.invert=e.invert&&k,R()}}function re(t,e){return[t,M(C((d+e)/2))]}re.invert=function(t,e){return[t,2*b(D(e))-d]};var oe=function(){return function(t){var e,n,i,r=ne(t),o=r.center,a=r.scale,s=r.translate,l=r.clipExtent,u=null;function c(){var o=p*a(),s=r(function(t){function e(e){return(e=t(e[0]*v,e[1]*v))[0]*=y,e[1]*=y,e}return t=ct(t[0]*v,t[1]*v,t.length>2?t[2]*v:0),e.invert=function(e){return(e=t.invert(e[0]*v,e[1]*v))[0]*=y,e[1]*=y,e},e}(r.rotate()).invert([0,0]));return l(null==u?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===re?[[Math.max(s[0]-o,u),e],[Math.min(s[0]+o,n),i]]:[[u,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,i)]])}return r.scale=function(t){return arguments.length?(a(t),c()):a()},r.translate=function(t){return arguments.length?(s(t),c()):s()},r.center=function(t){return arguments.length?(o(t),c()):o()},r.clipExtent=function(t){return arguments.length?(null==t?u=e=n=i=null:(u=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),c()):null==u?null:[[u,e],[n,i]]},c()}(re).scale(961/m)};var ae=n(36);class se extends at.a{setupDefaultRules(){super.setupDefaultRules();const t=this._root.interfaceColors,e=this.rule.bind(this);e("MapChart").setAll({projection:oe(),panX:"translateX",panY:"translateY",pinchZoom:!0,zoomStep:2,zoomLevel:1,rotationX:0,rotationY:0,rotationZ:0,maxZoomLevel:32,minZoomLevel:1,wheelY:"zoom",wheelX:"none",animationEasing:ae.out(ae.cubic),wheelEasing:ae.out(ae.cubic),wheelDuration:0,wheelSensitivity:1,maxPanOut:.4,centerMapOnZoomOut:!0});{const n=e("MapLine");n.setAll({precision:.5,role:"figure"}),Object(st.b)(n,"stroke",t,"grid")}e("MapPolygonSeries").setAll({affectsBounds:!0}),e("MapPointSeries").setAll({affectsBounds:!1,clipFront:!1,clipBack:!0,autoScale:!1}),e("ClusteredPointSeries").setAll({minDistance:20,scatterDistance:3,scatterRadius:8,stopClusterZoom:.95}),e("MapLineSeries").setAll({affectsBounds:!1});{const n=e("MapPolygon");n.setAll({precision:.5,isMeasured:!1,role:"figure",fillOpacity:1,position:"absolute",strokeWidth:.2,strokeOpacity:1}),Object(st.b)(n,"fill",t,"primaryButton"),Object(st.b)(n,"stroke",t,"background")}e("Button",["zoomtools","home"]).setAll({visible:!1}),e("GraticuleSeries").setAll({step:10})}}var le,ue,ce,he,fe=n(92),pe=n(28),de=new c.a,ge=new c.a,me={point:L,lineStart:L,lineEnd:L,polygonStart:function(){me.lineStart=ye,me.lineEnd=be},polygonEnd:function(){me.lineStart=me.lineEnd=me.point=L,de.add(_(ge)),ge=new c.a},result:function(){var t=de/2;return de=new c.a,t}};function ye(){me.point=ve}function ve(t,e){me.point=_e,le=ce=t,ue=he=e}function _e(t,e){ge.add(he*t-ce*e),ce=t,he=e}function be(){_e(le,ue)}var Pe,we,xe,De,Se=me,Me=0,Ie=0,je=0,Ne=0,Ce=0,Oe=0,Ee=0,Le=0,Te=0,ke={point:Re,lineStart:ze,lineEnd:Xe,polygonStart:function(){ke.lineStart=Ye,ke.lineEnd=Ze},polygonEnd:function(){ke.point=Re,ke.lineStart=ze,ke.lineEnd=Xe},result:function(){var t=Te?[Ee/Te,Le/Te]:Oe?[Ne/Oe,Ce/Oe]:je?[Me/je,Ie/je]:[NaN,NaN];return Me=Ie=je=Ne=Ce=Oe=Ee=Le=Te=0,t}};function Re(t,e){Me+=t,Ie+=e,++je}function ze(){ke.point=Be}function Be(t,e){ke.point=Ge,Re(xe=t,De=e)}function Ge(t,e){var n=t-xe,i=e-De,r=N(n*n+i*i);Ne+=r*(xe+t)/2,Ce+=r*(De+e)/2,Oe+=r,Re(xe=t,De=e)}function Xe(){ke.point=Re}function Ye(){ke.point=Ae}function Ze(){Fe(Pe,we)}function Ae(t,e){ke.point=Fe,Re(Pe=xe=t,we=De=e)}function Fe(t,e){var n=t-xe,i=e-De,r=N(n*n+i*i);Ne+=r*(xe+t)/2,Ce+=r*(De+e)/2,Oe+=r,Ee+=(r=De*t-xe*e)*(xe+t),Le+=r*(De+e),Te+=3*r,Re(xe=t,De=e)}var We=ke;function Je(t){this._context=t}Je.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,m)}},result:L};var Ve,$e,He,qe,Ue,Ke=new c.a,Qe={point:L,lineStart:function(){Qe.point=tn},lineEnd:function(){Ve&&en($e,He),Qe.point=L},polygonStart:function(){Ve=!0},polygonEnd:function(){Ve=null},result:function(){var t=+Ke;return Ke=new c.a,t}};function tn(t,e){Qe.point=en,$e=qe=t,He=Ue=e}function en(t,e){qe-=t,Ue-=e,Ke.add(N(qe*qe+Ue*Ue)),qe=t,Ue=e}var nn=Qe;let rn,on,an,sn;class ln{constructor(t){this._append=null==t?un:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return un;if(e!==rn){const t=10**e;rn=e,on=function(e){let n=1;this._+=e[0];for(const i=e.length;n<i;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return on}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==an||this._append!==on){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,an=t,on=this._append,sn=this._,this._=e}this._+=sn}}result(){const t=this._;return this._="",t.length?t:null}}function un(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}var cn,hn,fn,pn,dn,gn,mn,yn,vn,_n,bn,Pn,wn,xn,Dn,Sn,Mn=n(6),In=n(37),jn=n(9),Nn={sphere:L,point:Cn,lineStart:En,lineEnd:kn,polygonStart:function(){Nn.lineStart=Rn,Nn.lineEnd=zn},polygonEnd:function(){Nn.lineStart=En,Nn.lineEnd=kn}};function Cn(t,e){t*=v;var n=w(e*=v);On(n*w(t),n*I(t),I(e))}function On(t,e,n){++cn,fn+=(t-fn)/cn,pn+=(e-pn)/cn,dn+=(n-dn)/cn}function En(){Nn.point=Ln}function Ln(t,e){t*=v;var n=w(e*=v);xn=n*w(t),Dn=n*I(t),Sn=I(e),Nn.point=Tn,On(xn,Dn,Sn)}function Tn(t,e){t*=v;var n=w(e*=v),i=n*w(t),r=n*I(t),o=I(e),a=P(N((a=Dn*o-Sn*r)*a+(a=Sn*i-xn*o)*a+(a=xn*r-Dn*i)*a),xn*i+Dn*r+Sn*o);hn+=a,gn+=a*(xn+(xn=i)),mn+=a*(Dn+(Dn=r)),yn+=a*(Sn+(Sn=o)),On(xn,Dn,Sn)}function kn(){Nn.point=Cn}function Rn(){Nn.point=Bn}function zn(){Gn(Pn,wn),Nn.point=Cn}function Bn(t,e){Pn=t,wn=e,t*=v,e*=v,Nn.point=Gn;var n=w(e);xn=n*w(t),Dn=n*I(t),Sn=I(e),On(xn,Dn,Sn)}function Gn(t,e){t*=v;var n=w(e*=v),i=n*w(t),r=n*I(t),o=I(e),a=Dn*o-Sn*r,s=Sn*i-xn*o,l=xn*r-Dn*i,u=S(a,s,l),c=O(u),h=u&&-c/u;vn.add(h*a),_n.add(h*s),bn.add(h*l),hn+=c,gn+=c*(xn+(xn=i)),mn+=c*(Dn+(Dn=r)),yn+=c*(Sn+(Sn=o)),On(xn,Dn,Sn)}var Xn,Yn,Zn,An,Fn,Wn=function(t){cn=hn=fn=pn=dn=gn=mn=yn=0,vn=new c.a,_n=new c.a,bn=new c.a,A(t,Nn);var e=+vn,n=+_n,i=+bn,r=S(e,n,i);return r<f&&(e=gn,n=mn,i=yn,hn<h&&(e=fn,n=pn,i=dn),(r=S(e,n,i))<f)?[NaN,NaN]:[P(n,e)*y,O(i/r)*y]},Jn=new c.a,Vn=new c.a,$n={point:L,lineStart:L,lineEnd:L,polygonStart:function(){Jn=new c.a,$n.lineStart=Hn,$n.lineEnd=qn},polygonEnd:function(){var t=+Jn;Vn.add(t<0?m+t:t),this.lineStart=this.lineEnd=this.point=L},sphere:function(){Vn.add(m)}};function Hn(){$n.point=Un}function qn(){Kn(Xn,Yn)}function Un(t,e){$n.point=Kn,Xn=t,Yn=e,Zn=t*=v,An=w(e=(e*=v)/2+g),Fn=I(e)}function Kn(t,e){var n=(t*=v)-Zn,i=n>=0?1:-1,r=i*n,o=w(e=(e*=v)/2+g),a=I(e),s=Fn*a,l=An*o+s*w(r),u=s*i*I(r);Jn.add(P(u,l)),Zn=t,An=o,Fn=a}var Qn,ti,ei,ni,ii,ri,oi,ai,si,li,ui,ci=function(t){return Vn=new c.a,A(t,$n),2*Vn},hi={point:fi,lineStart:di,lineEnd:gi,polygonStart:function(){hi.point=mi,hi.lineStart=yi,hi.lineEnd=vi,si=new c.a,$n.polygonStart()},polygonEnd:function(){$n.polygonEnd(),hi.point=fi,hi.lineStart=di,hi.lineEnd=gi,Jn<0?(Qn=-(ei=180),ti=-(ni=90)):si>h?ni=90:si<-h&&(ti=-90),ui[0]=Qn,ui[1]=ei},sphere:function(){Qn=-(ei=180),ti=-(ni=90)}};function fi(t,e){li.push(ui=[Qn=t,ei=t]),e<ti&&(ti=e),e>ni&&(ni=e)}function pi(t,e){var n=bt([t*v,e*v]);if(ai){var i=wt(ai,n),r=wt([i[1],-i[0],0],i);St(r),r=_t(r);var o,a=t-ii,s=a>0?1:-1,l=r[0]*y*s,u=_(a)>180;u^(s*ii<l&&l<s*t)?(o=r[1]*y)>ni&&(ni=o):u^(s*ii<(l=(l+360)%360-180)&&l<s*t)?(o=-r[1]*y)<ti&&(ti=o):(e<ti&&(ti=e),e>ni&&(ni=e)),u?t<ii?_i(Qn,t)>_i(Qn,ei)&&(ei=t):_i(t,ei)>_i(Qn,ei)&&(Qn=t):ei>=Qn?(t<Qn&&(Qn=t),t>ei&&(ei=t)):t>ii?_i(Qn,t)>_i(Qn,ei)&&(ei=t):_i(t,ei)>_i(Qn,ei)&&(Qn=t)}else li.push(ui=[Qn=t,ei=t]);e<ti&&(ti=e),e>ni&&(ni=e),ai=n,ii=t}function di(){hi.point=pi}function gi(){ui[0]=Qn,ui[1]=ei,hi.point=fi,ai=null}function mi(t,e){if(ai){var n=t-ii;si.add(_(n)>180?n+(n>0?360:-360):n)}else ri=t,oi=e;$n.point(t,e),pi(t,e)}function yi(){$n.lineStart()}function vi(){mi(ri,oi),$n.lineEnd(),_(si)>h&&(Qn=-(ei=180)),ui[0]=Qn,ui[1]=ei,ai=null}function _i(t,e){return(e-=t)<0?e+360:e}function bi(t,e){return t[0]-e[0]}function Pi(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var wi=function(t){var e,n,i,r,o,a,s;if(ni=ei=-(Qn=ti=1/0),li=[],A(t,hi),n=li.length){for(li.sort(bi),e=1,o=[i=li[0]];e<n;++e)Pi(i,(r=li[e])[0])||Pi(i,r[1])?(_i(i[0],r[1])>_i(i[0],i[1])&&(i[1]=r[1]),_i(r[0],i[1])>_i(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(a=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(s=_i(i[1],r[0]))>a&&(a=s,Qn=r[0],ei=i[1])}return li=ui=null,Qn===1/0||ti===1/0?[[NaN,NaN],[NaN,NaN]]:[[Qn,ti],[ei,ni]]};function xi(t,e){return kt().center([t.longitude,t.latitude]).radius(e)()}function Di(t){const e=Wn(t);return{longitude:e[0],latitude:e[1]}}function Si(t){return ci(t)}function Mi(t){const e=wi(t);if(e){const t={left:e[0][0],right:e[1][0],top:e[1][1],bottom:e[0][1]};return t.right<t.left&&(t.right=180,t.left=-180),t}return{left:0,right:0,top:0,bottom:0}}function Ii(t,e,n,i){let r=[];i<=-180&&(i=-179.9999),n<=-90&&(n=-89.9999),t>=90&&(t=89.9999),e>=180&&(e=179.9999);let o=Math.min(90,(e-i)/Math.ceil((e-i)/90)),a=(t-n)/Math.ceil((t-n)/90);for(let s=i;s<e;s+=o){let i=[];r.push([i]),s+o>e&&(o=e-s);for(let e=s;e<=s+o;e+=5)i.push([e,t]);for(let e=t;e>=n;e-=a)i.push([s+o,e]);for(let t=s+o;t>=s;t-=5)i.push([t,n]);for(let e=n;e<=t;e+=a)i.push([s,e])}return{type:"MultiPolygon",coordinates:r}}function ji(t){let e=Ni(t.longitude),n=Math.asin(Math.sin(t.latitude*jn.RADIANS))*jn.DEGREES,i=Ni(t.latitude);return Math.abs(i)>90&&(e=Ni(e+180)),t.longitude=e,t.latitude=n,t}function Ni(t){return(t%=360)>180&&(t-=360),t<-180&&(t+=360),t}var Ci=n(3);class Oi extends fe.a{constructor(){super(...arguments),Object.defineProperty(this,"_downTranslateX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downTranslateY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pLat",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pLon",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downZoomLevel",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_doubleDownDistance",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dirtyGeometries",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_geometryColection",{enumerable:!0,configurable:!0,writable:!0,value:{type:"GeometryCollection",geometries:[]}}),Object.defineProperty(this,"_centerLocation",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_za",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rxa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_txa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapBounds",{enumerable:!0,configurable:!0,writable:!0,value:[[0,0],[0,0]]}),Object.defineProperty(this,"_geoCentroid",{enumerable:!0,configurable:!0,writable:!0,value:{longitude:0,latitude:0}}),Object.defineProperty(this,"_geoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_prevGeoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_dispatchBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapFitted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_centerX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_centerY",{enumerable:!0,configurable:!0,writable:!0,value:0})}_makeGeoPath(){const t=this.get("projection"),e=function(t,e){let n,i,r=3,o=4.5;function a(t){return t&&("function"===typeof o&&i.pointRadius(+o.apply(this,arguments)),A(t,n(i))),i.result()}return a.area=function(t){return A(t,n(Se)),Se.result()},a.measure=function(t){return A(t,n(nn)),nn.result()},a.bounds=function(t){return A(t,n(Jt)),Jt.result()},a.centroid=function(t){return A(t,n(We)),We.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,Gt):(t=e).stream,a):t},a.context=function(t){return arguments.length?(i=null==t?(e=null,new ln(r)):new Je(e=t),"function"!==typeof o&&i.pointRadius(o),a):e},a.pointRadius=function(t){return arguments.length?(o="function"===typeof t?t:(i.pointRadius(+t),+t),a):o},a.digits=function(t){if(!arguments.length)return r;if(null==t)r=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);r=e}return null===e&&(i=new ln(r)),a},a.projection(t).digits(r).context(e)}();e.projection(t),this.setPrivateRaw("geoPath",e)}geoPoint(){return this.invert(this.seriesContainer.toGlobal({x:this.width()/2,y:this.height()/2}))}geoCentroid(){return this._geoCentroid}geoBounds(){return this._geoBounds}_handleSetWheel(){const t=this.get("wheelX"),e=this.get("wheelY"),n=this.chartContainer;"none"!=t||"none"!=e?(this._wheelDp&&this._wheelDp.dispose(),this._wheelDp=n.events.on("wheel",(i=>{const r=this.get("wheelEasing"),o=this.get("wheelSensitivity",1),a=this.get("wheelDuration",0),s=i.originalEvent;if(!Ci.isLocalEvent(s,this))return;s.preventDefault();const l=n._display.toLocal(i.point);"zoom"==e?this._handleWheelZoom(s.deltaY,l):"rotateY"==e?this._handleWheelRotateY(s.deltaY/5*o,a,r):"rotateX"==e&&this._handleWheelRotateX(s.deltaY/5*o,a,r),"zoom"==t?this._handleWheelZoom(s.deltaX,l):"rotateY"==t?this._handleWheelRotateY(s.deltaX/5*o,a,r):"rotateX"==t&&this._handleWheelRotateX(s.deltaX/5*o,a,r)})),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_prepareChildren(){super._prepareChildren();const t=this.get("projection"),e=this.innerWidth(),n=this.innerHeight(),i=this._geometryColection.geometries;if(this.isDirty("projection")){this._makeGeoPath(),this.markDirtyProjection(),this._fitMap(),t.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),t.rotate&&t.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]);let i=this._prevSettings.projection;if(i&&i!=t){let r=e/2,o=n/2;if(i.invert){let e=i.invert([r,o]);if(e){let n=t(e);if(n){let e=t.translate(),i=r-(n[0]-e[0]),a=o-(n[1]-e[1]);t.translate([i,a]),this.setRaw("translateX",i),this.setRaw("translateY",a)}}}}}if((this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel(),this._dirtyGeometries&&(this._geometryColection.geometries=[],this.series.each((t=>{r.pushAll(this._geometryColection.geometries,t._geometries)})),this._fitMap()),0!=i.length&&(e!=this._pw||n!=this._ph||this._dirtyGeometries)&&e>0&&n>0){let i=e/2,r=n/2;t.fitSize([e,n],this._geometryColection);const o=t.scale();if(this.setPrivateRaw("mapScale",o),t.scale(o*this.get("zoomLevel",1)),this._centerLocation){let e=t(this._centerLocation);if(e){let n=t.translate(),o=i-(e[0]-n[0]),a=r-(e[1]-n[1]);t.translate([o,a]),this.setRaw("translateX",o),this.setRaw("translateY",a),this._centerX=n[0],this._centerY=n[1]}}this.markDirtyProjection();const a=this.getPrivate("geoPath");this._mapBounds=a.bounds(this._geometryColection)}if(this._pw=e,this._ph=n,this.isDirty("zoomControl")){const t=this._prevSettings.zoomControl,e=this.get("zoomControl");e!==t&&(this._disposeProperty("zoomControl"),t&&t.dispose(),e&&(e.setPrivate("chart",this),this.children.push(e)),this.setRaw("zoomControl",e))}if(this.isDirty("zoomLevel")){t.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),this.markDirtyProjection(),this.series.each((t=>{t.isType("MapPointSeries")&&t.get("autoScale")&&r.each(t.dataItems,(t=>{const e=t.bullets;e&&r.each(e,(t=>{const e=t.get("sprite");e&&e.set("scale",this.get("zoomLevel"))}))}))}));const e=this.get("zoomControl");if(e){const t=this.get("zoomLevel",1);t==this.get("minZoomLevel",1)?this.root.events.once("frameended",(()=>{e.minusButton.set("disabled",!0)})):e.minusButton.set("disabled",!1),t==this.get("maxZoomLevel",32)?e.plusButton.set("disabled",!0):e.plusButton.set("disabled",!1)}}(this.isDirty("translateX")||this.isDirty("translateY"))&&(t.translate([this.get("translateX",this.width()/2),this.get("translateY",this.height()/2)]),this.markDirtyProjection()),t.rotate&&(this.isDirty("rotationX")||this.isDirty("rotationY")||this.isDirty("rotationZ"))&&(t.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]),this.markDirtyProjection()),(this.isDirty("pinchZoom")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_fitMap(){const t=this.get("projection");let e=this.innerWidth(),n=this.innerHeight();if(e>0&&n>0){t.fitSize([e,n],this._geometryColection),this.setPrivateRaw("mapScale",t.scale());const i=t.translate();this.setRaw("translateX",i[0]),this.setRaw("translateY",i[1]),this._centerX=i[0],this._centerY=i[1];const r=this.getPrivate("geoPath");this._mapBounds=r.bounds(this._geometryColection),this._geoCentroid=Di(this._geometryColection);const o=Mi(this._geometryColection);if(this._geoBounds=o,this._geometryColection.geometries.length>0){o.left=jn.round(this._geoBounds.left,3),o.right=jn.round(this._geoBounds.right,3),o.top=jn.round(this._geoBounds.top,3),o.bottom=jn.round(this._geoBounds.bottom,3);const t=this._prevGeoBounds;t&&!Ci.sameBounds(o,t)&&(this._dispatchBounds=!0,this._prevGeoBounds=o)}this._mapFitted=!0}}homeGeoPoint(){let t=this.get("homeGeoPoint");if(!t){const e=this.getPrivate("geoPath").bounds(this._geometryColection),n=e[0][0],i=e[0][1],r=e[1][0],o=e[1][1];t=this.invert({x:n+(r-n)/2,y:i+(o-i)/2})}return t}goHome(t){this.zoomToGeoPoint(this.homeGeoPoint(),this.get("homeZoomLevel",1),!0,t,this.get("homeRotationX"),this.get("homeRotationY"))}_updateChildren(){const t=this.get("projection");if(t.invert){let e=this.innerWidth(),n=this.innerHeight();e>0&&n>0&&(this._centerLocation=t.invert([this.innerWidth()/2,this.innerHeight()/2]))}super._updateChildren()}_afterChanged(){if(super._afterChanged(),this._dispatchBounds){this._dispatchBounds=!1;const t="geoboundschanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}}_setUpTouch(){this.chartContainer._display.cancelTouch||(this.chartContainer._display.cancelTouch=!!(this.get("pinchZoom")||this.get("panX")||this.get("panY")))}markDirtyGeometries(){this._dirtyGeometries=!0,this.markDirty()}markDirtyProjection(){this.series.each((t=>{t.markDirtyProjection()}))}_afterNew(){this._defaultThemes.push(se.new(this._root)),this._settings.themeTags=Ci.mergeTags(this._settings.themeTags,["map"]),this.children.push(this.bulletsContainer),super._afterNew(),this._makeGeoPath(),this.chartContainer.children.push(this.seriesContainer),null==this.get("translateX")&&this.set("translateX",this.width()/2),null==this.get("translateY")&&this.set("translateY",this.height()/2),this.chartContainer.set("interactive",!0),this.chartContainer.set("interactiveChildren",!1),this.chartContainer.set("background",pe.a.new(this._root,{themeTags:["map","background"],fill:Mn.a.fromHex(0),fillOpacity:0})),this._disposers.push(this.chartContainer.events.on("pointerdown",(t=>{this._handleChartDown(t)}))),this._disposers.push(this.chartContainer.events.on("globalpointerup",(t=>{this._handleChartUp(t)}))),this._disposers.push(this.chartContainer.events.on("globalpointermove",(t=>{this._handleChartMove(t)})));let t=!1;for(let e=0;e<In.d.licenses.length;e++)In.d.licenses[e].match(/^AM5M.{5,}/i)&&(t=!0);t?this._root._licenseApplied():this._root._showBranding(),this._setUpTouch()}_handleChartDown(t){this._downZoomLevel=this.get("zoomLevel",1);const e=this.chartContainer._downPoints;let n=o.keys(e).length;if(1==n){let i=e[1];i||(i=e[0]),i&&i.x==t.point.x&&i.y==t.point.y&&(n=0)}if(n>0){this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");const t=this.chartContainer._getDownPointId();if(t){let e=this._movePoints[t];e&&(this.chartContainer._downPoints[t]=e)}}else if(0==n){let e=this.chartContainer.get("background");if(e&&e.events.enableType("click"),this.get("panX")||this.get("panY")){this._za&&this._za.stop(),this._txa&&this._txa.stop(),this._tya&&this._tya.stop(),this._rxa&&this._rxa.stop(),this._rya&&this._rya.stop();const e=this.chartContainer._display.toLocal(t.point);this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");let n=this.get("projection");if(n.invert){let t=n.invert([e.x,e.y]),i=n.invert([e.x+1,e.y+1]);t&&i&&(this._pLon=Math.abs(i[0]-t[0]),this._pLat=Math.abs(i[1]-t[1]))}}}}invert(t){let e=this.get("projection");if(e.invert){const n=e.invert([t.x,t.y]);if(n)return{longitude:n[0],latitude:n[1]}}return{longitude:0,latitude:0}}convert(t,e,n){let i,r=this.get("projection");if(r.rotate||(e=void 0,n=void 0),null!=e||null!=n){null==e&&(e=0),null==n&&(n=0);let o=r.rotate();r.rotate([e,n,0]),i=r([t.longitude,t.latitude]),r.rotate(o)}else i=r([t.longitude,t.latitude]);return i?{x:i[0],y:i[1]}:{x:0,y:0}}_handleChartUp(t){this.chartContainer._downPoints={}}_handlePinch(){const t=this.chartContainer;let e=0,n=[],i=[];if(o.each(t._downPoints,((t,r)=>{n[e]=r;let o=this._movePoints[t];o&&(i[e]=o),e++})),n.length>1&&i.length>1){const e=t._display;let r=n[0],o=n[1],a=i[0],s=i[1];if(r&&o&&a&&s){r=e.toLocal(r),o=e.toLocal(o),a=e.toLocal(a),s=e.toLocal(s);let t=Math.hypot(o.x-r.x,o.y-r.y),n=Math.hypot(s.x-a.x,s.y-a.y)/t*this._downZoomLevel;n=jn.fitToRange(n,this.get("minZoomLevel",1),this.get("maxZoomLevel",32));let i={x:a.x+(s.x-a.x)/2,y:a.y+(s.y-a.y)/2},l={x:r.x+(o.x-r.x)/2,y:r.y+(o.y-r.y)/2},u=this._downTranslateX||0,c=this._downTranslateY||0,h=this._downZoomLevel,f=i.x-(-u+l.x)/h*n,p=i.y-(-c+l.y)/h*n;this.set("zoomLevel",n),this.set("translateX",f),this.set("translateY",p)}}}_handleChartMove(t){const e=this.chartContainer;let n=e._getDownPoint();const i=e._getDownPointId(),r=t.originalEvent.pointerId;if(this.get("pinchZoom")&&r&&(this._movePoints[r]=t.point,o.keys(e._downPoints).length>1))this._handlePinch();else if((!i||!r||r==i)&&n){const i=this.get("panX"),r=this.get("panY");if("none"!=i||"none"!=r){const o=e._display;let a=o.toLocal(t.point);n=o.toLocal(n);let l=this._downTranslateX,u=this._downTranslateY;if(Math.hypot(n.x-a.x,n.y-a.y)>5){let t=e.get("background");if(t&&t.events.disableType("click"),s.isNumber(l)&&s.isNumber(u)){let t=this.get("projection");const e=this.get("zoomLevel",1),o=this.get("maxPanOut",.4),s=this._mapBounds,c=this.width(),h=this.height(),f=s[1][0]-s[0][0],p=s[1][1]-s[0][1];if("translateX"==i){l+=a.x-n.x;const t=c/2-(c/2-this._centerX)*e;l=Math.min(l,t+f*o*e),l=Math.max(l,t-f*o*e)}if("translateY"==r){u+=a.y-n.y;const t=h/2-(h/2-this._centerY)*e;u=Math.min(u,t+p*o*e),u=Math.max(u,t-p*o*e)}if(this.set("translateX",l),this.set("translateY",u),t.invert){let e=t.invert([n.x,n.y]);location&&e&&("rotateX"==i&&this.set("rotationX",this._downRotationX-(n.x-a.x)*this._pLon),"rotateY"==r&&this.set("rotationY",this._downRotationY+(n.y-a.y)*this._pLat))}}}}}}_handleWheelRotateY(t,e,n){this._rya=this.animate({key:"rotationY",to:this.get("rotationY",0)-t,duration:e,easing:n})}_handleWheelRotateX(t,e,n){this._rxa=this.animate({key:"rotationX",to:this.get("rotationX",0)-t,duration:e,easing:n})}_handleWheelZoom(t,e){let n=this.get("zoomStep",2),i=this.get("zoomLevel",1),r=i;t>0?r=i/n:t<0&&(r=i*n),r!=i&&this.zoomToPoint(e,r)}zoomToGeoBounds(t,e,n,i){t.right<t.left&&(t.right=180,t.left=-180);const r=this.getPrivate("geoPath").bounds(this._geometryColection);let o=this.convert({longitude:t.left,latitude:t.top},n,i),a=this.convert({longitude:t.right,latitude:t.bottom},n,i);o.y<r[0][1]&&(o.y=r[0][1]),a.y>r[1][1]&&(a.y=r[1][1]);let s=this.get("zoomLevel",1),l=o.x,u=a.x,c=o.y,h=a.y,f=this.seriesContainer,p=.9*Math.min(f.innerWidth()/(u-l)*s,f.innerHeight()/(h-c)*s),d=l+(u-l)/2,g=c+(h-c)/2,m=this.invert({x:d,y:g});return null==n&&null==i||this.rotate(n,i),this.zoomToGeoPoint(m,p,!0,e)}zoomToPoint(t,e,n,i){e&&(e=jn.fitToRange(e,this.get("minZoomLevel",1),this.get("maxZoomLevel",32))),s.isNumber(i)||(i=this.get("animationDuration",0));const r=this.get("animationEasing"),o=this.get("zoomLevel",1);this.get("centerMapOnZoomOut")&&e==this.get("homeZoomLevel",1)&&(t=this.convert(this.homeGeoPoint(),this.get("homeRotationX"),this.get("homeRotationY")),n=!0);let a=t.x,l=t.y,u=this.get("translateX",0),c=this.get("translateY",0),h=a,f=l;n&&(h=this.width()/2,f=this.height()/2);let p=h-(a-u)/o*e,d=f-(l-c)/o*e;return this._txa=this.animate({key:"translateX",to:p,duration:i,easing:r}),this._tya=this.animate({key:"translateY",to:d,duration:i,easing:r}),this._za=this.animate({key:"zoomLevel",to:e,duration:i,easing:r}),o!=e&&this._root.readerAlert(this._t("Zoom level changed to %1",this._root.locale,s.numberToString(e))),this._za}zoomToGeoPoint(t,e,n,i,r,o){let a=this.convert(t,r,o);if(null==r&&null==o||this.rotate(r,o,i),a)return this.zoomToPoint(a,e,n,i)}rotate(t,e,n){if(this.get("projection").rotate){s.isNumber(n)||(n=this.get("animationDuration",0));const i=this.get("animationEasing");null!=t&&this.animate({key:"rotationX",to:t,duration:n,easing:i}),null!=e&&this.animate({key:"rotationY",to:e,duration:n,easing:i})}else;}zoomIn(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)*this.get("zoomStep",2))}zoomOut(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)/this.get("zoomStep",2))}_clearDirty(){super._clearDirty(),this._dirtyGeometries=!1,this._mapFitted=!1}getArea(t){const e=this.getPrivate("geoPath"),n=t.get("geometry");return n?e.area(n):0}}Object.defineProperty(Oi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapChart"}),Object.defineProperty(Oi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:fe.a.classNames.concat([Oi.className])});class Ei extends a{constructor(){super(...arguments),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["Point","MultiPoint"]}),Object.defineProperty(this,"_lineChangedDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.fields.push("polygonId","lineId","longitude","latitude","fixed"),super._afterNew()}markDirtyProjection(){this.markDirty()}markDirtyValues(t){super.markDirtyValues(),t&&this._positionBullets(t)}processDataItem(t){super.processDataItem(t);let e=t.get("geometry");if(e){if("Point"==e.type){const n=e.coordinates;n&&(t.set("longitude",n[0]),t.set("latitude",n[1]))}else if("MultiPoint"==e.type){const n=e.coordinates;n&&n[0]&&(t.set("longitude",n[0][0]),t.set("latitude",n[0][1]))}}else e={type:"Point",coordinates:[t.get("longitude",0),t.get("latitude",0)]},t.set("geometry",e);this._addGeometry(e,this)}_makeBullets(t){t.bullets=[],this.bullets.each((e=>{const n=t.get("geometry");if(n)if("Point"==n.type)this._setBulletParent(this._makeBullet(t,e));else if(n.type="MultiPoint"){let i=0;r.each(n.coordinates,(()=>{this._setBulletParent(this._makeBullet(t,e,i)),i++}))}}))}_setBulletParent(t){if(t){const e=t.get("sprite"),n=this.chart;if(e&&n){const t=e.dataItem;t&&(t.get("fixed")?e.parent!=n.bulletsContainer&&n.bulletsContainer.children.moveValue(e):e.parent!=this.bulletsContainer&&this.bulletsContainer.children.moveValue(e))}}}_positionBullet(t){const e=t.get("sprite");if(e){const n=e.dataItem;if(n&&n.get("fixed"))return;const i=n.get("latitude"),r=n.get("longitude"),o=n.get("lineDataItem"),a=n.get("fixed"),l=this.chart;let u;if(o)u=o.get("mapLine");else{const t=n.get("lineId");t&&l&&l.series.each((e=>{if(e.isType("MapLineSeries")){let i=e.getDataItemById(t);i&&(n.set("lineDataItem",i),u=i.get("mapLine"))}}))}this._lineChangedDp&&this._lineChangedDp.dispose(),u&&(this._lineChangedDp=u.events.on("linechanged",(()=>{this._positionBullets(n)})));const c=n.get("polygonDataItem");let h;if(c)h=c.get("mapPolygon");else{const t=n.get("polygonId");t&&l&&l.series.each((e=>{if(e.isType("MapPolygonSeries")){let i=e.getDataItemById(t);i&&(n.set("polygonDataItem",i),h=i.get("mapPolygon"))}}))}const f=n.get("positionOnLine");let p,d;if(h){let t=h.visualCentroid();p=[t.longitude,t.latitude],n.setRaw("longitude",t.longitude),n.setRaw("latitude",t.latitude)}else if(u&&s.isNumber(f)){let e=u.positionToGeoPoint(f);if(p=[e.longitude,e.latitude],n.get("autoRotate",t.get("autoRotate"))&&l){const t=u.positionToGeoPoint(f-.002),e=u.positionToGeoPoint(f+.002),n=l.convert(t),i=l.convert(e);d=jn.getAngle(n,i)}n.setRaw("longitude",e.longitude),n.setRaw("latitude",e.latitude)}else if(s.isNumber(r)&&s.isNumber(i))p=[r,i];else{const e=n.get("geometry");if(e)if("Point"==e.type)this._positionBulletReal(t,e,e.coordinates,d);else if("MultiPoint"==e.type){let n=t._index||0;p=e.coordinates[n]}}!a&&p&&this._positionBulletReal(t,{type:"Point",coordinates:p},p,d)}}_positionBulletReal(t,e,n,i){const r=t.get("sprite"),o=this.chart;if(o){const a=o.get("projection"),s=o.getPrivate("geoPath"),l=r.dataItem,u=a(n);if(u){const t={x:u[0],y:u[1]};r.setAll(t),l.setRaw("point",t)}let c=!0;s(e)?this.get("clipFront")&&(c=!1):this.get("clipBack")&&(c=!1),r.setPrivate("visible",c),l.set("clipped",!c),l&&null!=i&&l.get("autoRotate",t.get("autoRotate"))&&r.set("rotation",i+l.get("autoRotateAngle",t.get("autoRotateAngle",0)))}}zoomToDataItem(t,e,n){const i=this.chart;if(i){const r=t.get("longitude",0),o=t.get("latitude",0);return n?i.zoomToGeoPoint({longitude:r,latitude:o},e,!0,void 0,-r,-o):i.zoomToGeoPoint({longitude:r,latitude:o},e,!0)}}zoomToDataItems(t,e){let n=null,i=null,o=null,a=null;if(r.each(t,(t=>{const e=t.get("longitude",0),r=t.get("latitude",0);(null==n||n>e)&&(n=e),(null==i||i<e)&&(i=e),(null==o||o<r)&&(o=r),(null==a||a>r)&&(a=r)})),null!=n&&null!=i&&null!=o&&null!=a){const t=this.chart;if(t)return e?t.zoomToGeoBounds({left:n,right:i,top:o,bottom:a},void 0,-(n+(i-n)/2),-(o+(o-a)/2)):t.zoomToGeoBounds({left:n,right:i,top:o,bottom:a})}}disposeDataItem(t){const e=this.chart;e&&e.series.each((e=>{e.isType("MapLineSeries")&&r.each(e.dataItems,(n=>{const i=n.get("pointsToConnect");i&&r.each(i,(o=>{o==t&&(r.remove(i,o),e.markDirtyValues(n))}))}))})),super.disposeDataItem(t)}_excludeDataItem(t){super._excludeDataItem(t);const e=t.bullets;e&&r.each(e,(t=>{const e=t.get("sprite");e&&e.setPrivate("visible",!1)}))}_unexcludeDataItem(t){super._unexcludeDataItem(t);const e=t.bullets;e&&r.each(e,(t=>{const e=t.get("sprite");e&&e.setPrivate("visible",!0)}))}_notIncludeDataItem(t){super._notIncludeDataItem(t);const e=t.bullets;e&&r.each(e,(t=>{const e=t.get("sprite");e&&e.setPrivate("visible",!1)}))}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const e=t.bullets;e&&r.each(e,(t=>{const e=t.get("sprite");e&&e.setPrivate("visible",!0)}))}}Object.defineProperty(Ei,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPointSeries"}),Object.defineProperty(Ei,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:a.classNames.concat([Ei.className])});var Li=n(482),Ti=n.n(Li);class ki extends u.a{constructor(){super(...arguments),Object.defineProperty(this,"_projectionDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.setPrivate("trustBounds",!0)}_beforeChanged(){if(super._beforeChanged(),this._projectionDirty||this.isDirty("geometry")||this.isDirty("precision")){const t=this.get("geometry");if(t){const e=this.series;if(e){const n=e.projection();n&&n.precision(this.get("precision",.5));const i=e.geoPath();i&&(this._clear=!0,this.set("draw",(e=>{i.context(this._display),i(t),i.context(null)})),this.isHover()&&this.showTooltip())}}}}markDirtyProjection(){this.markDirty(),this._projectionDirty=!0}_clearDirty(){super._clearDirty(),this._projectionDirty=!1}geoCentroid(){const t=this.get("geometry");return t?Di(t):{latitude:0,longitude:0}}visualCentroid(){let t=0,e=[];const n=this.get("geometry");if(n){if("Polygon"==n.type)e=n.coordinates;else if("MultiPolygon"==n.type)for(let i=0;i<n.coordinates.length;i++){let r=n.coordinates[i],o=ci({type:"Polygon",coordinates:r});o>t&&(e=r,t=o)}if(e){let t=Ti()(e);return{longitude:t[0],latitude:t[1]}}}return{longitude:0,latitude:0}}_getTooltipPoint(){const t=this.series;if(t){const e=t.projection();if(e){const t=this.visualCentroid(),n=e([t.longitude,t.latitude]);if(n)return{x:n[0],y:n[1]}}}return{x:0,y:0}}}Object.defineProperty(ki,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygon"}),Object.defineProperty(ki,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.a.classNames.concat([ki.className])});class Ri extends a{constructor(){super(...arguments),Object.defineProperty(this,"mapPolygons",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new K.c(Q.a.new({}),(()=>ki._new(this._root,{},[this.mapPolygons.template]))))}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["Polygon","MultiPolygon"]})}makeMapPolygon(t){const e=this.children.push(this.mapPolygons.make());return e._setDataItem(t),this.mapPolygons.push(e),e}markDirtyProjection(){r.each(this.dataItems,(t=>{let e=t.get("mapPolygon");e&&e.markDirtyProjection()}))}_prepareChildren(){super._prepareChildren(),this.isDirty("fill")&&this.mapPolygons.template.set("fill",this.get("fill")),this.isDirty("stroke")&&this.mapPolygons.template.set("stroke",this.get("stroke"))}processDataItem(t){super.processDataItem(t);let e=t.get("mapPolygon");e||(e=this.makeMapPolygon(t)),t.set("mapPolygon",e);let n=t.get("geometry");if(n){if(this.get("reverseGeodata")){if(n.coordinates)for(let t=0;t<n.coordinates.length;t++)if("MultiPolygon"==n.type)for(let e=0;e<n.coordinates[t].length;e++)n.coordinates[t][e].reverse();else n.coordinates[t].reverse()}e.set("geometry",n)}e.series=this,this._addGeometry(t.get("geometry"),this)}disposeDataItem(t){super.disposeDataItem(t);const e=t.get("mapPolygon");e&&(this.mapPolygons.removeValue(e),e.dispose()),this._removeGeometry(t.get("geometry"))}_excludeDataItem(t){super._excludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!1)}_unexcludeDataItem(t){super._unexcludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!0)}_notIncludeDataItem(t){super._notIncludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!1)}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!0)}markDirtyValues(t){if(super.markDirtyValues(),t){const e=t.get("mapPolygon");e&&e.set("geometry",t.get("geometry"))}}zoomToDataItem(t,e){const n=t.get("mapPolygon");if(n){const t=n.get("geometry"),i=this.chart;if(t&&i){if(e){const e=Di(t);return i.rotate(-e.longitude,-e.latitude),i.zoomToGeoBounds(Mi(t),void 0,-e.longitude,-e.latitude)}return i.zoomToGeoBounds(Mi(t))}}}zoomToDataItems(t,e){let n,i,o,a;if(r.each(t,(t=>{const e=t.get("mapPolygon");if(e){const t=e.get("geometry");if(t){let e=Mi(t);null==n&&(n=e.left),null==i&&(i=e.right),null==o&&(o=e.top),null==a&&(a=e.bottom),n=Math.min(e.left,n),i=Math.max(e.right,i),o=Math.max(e.top,o),a=Math.min(e.bottom,a)}}})),null!=n&&null!=i&&null!=o&&null!=a){const t=this.chart;if(t){if(e){const e=n+(i-n)/2,r=a+(o-a)/2;return t.rotate(-e,-r),t.zoomToGeoBounds({left:n,right:i,top:o,bottom:a},void 0,-e,-r)}return t.zoomToGeoBounds({left:n,right:i,top:o,bottom:a})}}}getPolygonByPoint(t){let e;const n=this._display._renderer.getObjectAtPoint(t);if(n)return this.mapPolygons.each((function(t){t._display==n&&(e=t)})),e}getPolygonByGeoPoint(t){return this.getPolygonByPoint(this.chart.convert(t))}}Object.defineProperty(Ri,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygonSeries"}),Object.defineProperty(Ri,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:a.classNames.concat([Ri.className])});var zi=n(29),Bi=n(14),Gi=n(33),Xi=n(488);class Yi extends Ei{constructor(){super(...arguments),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:this.makeDataItem({})}),Object.defineProperty(this,"_clusterIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_clusters",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"clusteredDataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_scatterIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_scatters",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_packLayout",{enumerable:!0,configurable:!0,writable:!0,value:Xi.a()}),Object.defineProperty(this,"_spiral",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_clusterDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_previousZL",{enumerable:!0,configurable:!0,writable:!0,value:0})}_afterNew(){this.fields.push("groupId"),this._setRawDefault("groupIdField","groupId"),super._afterNew()}_updateChildren(){super._updateChildren(),this.isDirty("scatterRadius")&&(this._spiral=jn.spiralPoints(0,0,300,300,0,3,3,0,0));const t=this.chart;if(t){const e=t.get("zoomLevel",1);if(e!=this._previousZL){const t=this.get("clusterDelay",0);t?this._clusterDP?(this._clusterDP.dispose(),this._clusterDP=this.setTimeout((()=>{this._doTheCluster()}),t)):(this._doTheCluster(),this._clusterDP=this.setTimeout((()=>{}),0)):this._doTheCluster(),this._previousZL=e}r.each(this.clusteredDataItems,(t=>{const e=t.get("bullet"),n=t.get("longitude",0),i=t.get("latitude",0);this._positionBulletReal(e,{type:"Point",coordinates:[n,i]},[n,i])}))}}_doTheCluster(){const t={};r.each(this.dataItems,(e=>{const n=e.get("groupId","_default");t[n]||(t[n]=[]),t[n].push(e)})),this._scatterIndex=-1,this._scatters=[],this._clusterIndex=-1,this._clusters=[],r.each(this.clusteredDataItems,(t=>{t.setRaw("children",void 0)})),r.each(this.dataItems,(t=>{t.setRaw("cluster",void 0)})),o.each(t,((t,e)=>{this._scatterGroup(e)})),o.each(t,((t,e)=>{this._clusterGroup(e)})),r.each(this.dataItems,(t=>{if(!t.get("cluster")){const e=t.bullets;e&&r.each(e,(t=>{const e=t.get("sprite");e&&e.set("forceHidden",!1)}))}}))}zoomToCluster(t,e){this.zoomToDataItems(t.get("children",[]),e)}_clusterGroup(t){const e=this.chart;if(e&&e.get("zoomLevel",1)>=e.get("maxZoomLevel",100)*this.get("stopClusterZoom",.95));else for(t.sort(((t,e)=>{const n=t.get("point"),i=e.get("point");return n&&i?Math.hypot(n.x-i.x,n.y-i.y):0}));t.length>0;){this._clusterIndex++,this._clusters[this._clusterIndex]=[];const e=this._clusters[this._clusterIndex],n=t[0];e.push(n),r.removeFirst(t,n),this._clusterDataItem(n,t)}let n=0;const i=this.get("clusteredBullet");i&&r.each(this._clusters,(t=>{let e=0,o=0,a=t.length;if(a>1){let s,l=this.clusteredDataItems[n];if(!l){l=new zi.b(this,void 0,{});const t=l.set("bullet",i(this._root,this,l));if(t){const e=t.get("sprite");e&&(this.bulletsContainer.children.push(e),e._setDataItem(l),this.root.events.once("frameended",(()=>{e instanceof Bi.a&&e.walkChildren((t=>{t instanceof zi.a&&t.markDirtyValues()}))})))}this.clusteredDataItems.push(l)}r.each(t,(t=>{t.setRaw("cluster",l);const n=t.get("point");n&&(e+=n.x,o+=n.y);const i=t.bullets;i&&r.each(i,(t=>{const e=t.get("sprite");e&&e.set("forceHidden",!0)})),s=t.get("groupId")}));let u=e/a,c=o/a;l.setRaw("children",t),l.setRaw("groupId",s);const h=l.get("value");l.setRaw("value",a);const f=l.get("bullet");if(f){let t=this.chart.invert({x:u,y:c});t&&l.setAll({longitude:t.longitude,latitude:t.latitude}),this._positionBullets(l);const e=f.get("sprite");e&&(e.set("forceHidden",!1),h!=a&&e instanceof Bi.a&&e.walkChildren((t=>{t instanceof Gi.a&&t.text.markDirtyText()})))}n++}})),r.each(this.clusteredDataItems,(t=>{let e=t.get("children");if(!e||0==e.length){const e=t.get("bullet");if(e){const t=e.get("sprite");t&&t.set("forceHidden",!0)}}}))}_onDataClear(){super._onDataClear(),r.each(this.clusteredDataItems,(t=>{const e=t.get("bullet");if(e){const t=e.get("sprite");t&&t.dispose()}})),this.clusteredDataItems=[]}_clusterDataItem(t,e){const n=t.get("point");if(n){let t=this.get("minDistance",20);const i=this._clusters[this._clusterIndex];for(let o=e.length-1;o>=0;o--){const a=e[o];if(a&&!a.get("clipped")){const o=a.get("point");o&&Math.hypot(o.x-n.x,o.y-n.y)<t&&(i.push(a),r.removeFirst(e,a),this._clusterDataItem(a,e))}}}}_scatterGroup(t){const e=this.chart;if(e&&e.get("zoomLevel",1)>=e.get("maxZoomLevel",100)*this.get("stopClusterZoom",.95)){for(;t.length>0;){this._scatterIndex++,this._scatters[this._scatterIndex]=[];const e=this._scatters[this._scatterIndex],n=t[0];e.push(n),r.remove(t,n),this._scatterDataItem(n,t)}r.each(this._scatters,(t=>{if(t.length>1){let e=[],n=0,i=this.get("scatterRadius",8);r.each(t,(t=>{let o=this._spiral[n],a=!0;if(e.length>0)for(;a;)r.each(e,(t=>{for(a=!1;jn.circlesOverlap({x:o.x,y:o.y,radius:i},t);)n++,void 0==this._spiral[n]?a=!1:(a=!0,o=this._spiral[n])}));const s=o.x,l=o.y;e.push({x:s,y:l,radius:i}),t.set("dx",s),t.set("dy",l);const u=t.bullets;u&&r.each(u,(t=>{const e=t.get("sprite");e&&e.setAll({dx:s,dy:l})}))}))}}))}}_scatterDataItem(t,e){const n=t.get("point");if(n){const t=this.get("scatterDistance",5),i=this._scatters[this._scatterIndex];r.each(e,(o=>{if(o&&!o.get("clipped")){const a=o.get("point");a&&Math.hypot(a.x-n.x,a.y-n.y)<t&&(i.push(o),r.removeFirst(e,o),this._scatterDataItem(o,e))}}))}}}Object.defineProperty(Yi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ClusteredPointSeries"}),Object.defineProperty(Yi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ei.classNames.concat([Yi.className])});var Zi,Ai=n(173);class Fi extends Ai.a{_afterNew(){super._afterNew(),this.addTag("zoomtools")}_prepareChildren(){super._prepareChildren(),this.isPrivateDirty("chart")&&this.set("target",this.getPrivate("chart"))}}function Wi(t,e){return[w(e)*I(t),I(e)]}Object.defineProperty(Fi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomControl"}),Object.defineProperty(Fi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ai.a.classNames.concat([Fi.className])}),Wi.invert=(Zi=O,function(t,e){var n=N(t*t+e*e),i=Zi(n),r=I(i),o=w(i);return[P(t*r,n*o),O(n&&e*r/n)]});var Ji=function(){return ne(Wi).scale(249.5).clipAngle(90.000001)};function Vi(t,e){return[t,e]}Vi.invert=Vi;var $i=function(){return ne(Vi).scale(152.63)};function Hi(t,e){var n=I(t),i=(n+I(e))/2;if(_(i)<h)return function(t){var e=w(t);function n(t,n){return[t*e,I(n)/e]}return n.invert=function(t,n){return[t/e,O(n*e)]},n}(t);var r=1+n*(2*i-n),o=N(r)/i;function a(t,e){var n=N(r-2*i*I(e))/i;return[n*I(t*=i),o-n*w(t)]}return a.invert=function(t,e){var n=o-e,a=P(t,_(n))*j(n);return n*i<0&&(a-=p*j(t)*j(n)),[a/i,O((r-(t*t+n*n)*i*i)/(2*i))]},a}var qi=function(){return function(t){var e=0,n=p/3,i=ie(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*v,n=t[1]*v):[e*y,n*y]},r}(Hi).scale(155.424).center([0,33.6442])};var Ui=function(){var t,e,n,i,r,o,a=qi().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]),s=qi().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=qi().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){o=[t,e]}};function c(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(i.point(e,a),o)||(r.point(e,a),o)}function f(){return t=e=null,c}return c.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?s:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:a).invert(t)},c.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([a.stream(e=n),s.stream(n),l.stream(n)])},c.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),f()):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],c=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(u),i=s.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+h,c+.12*e+h],[o-.214*e-h,c+.234*e-h]]).stream(u),r=l.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+h,c+.166*e+h],[o-.115*e-h,c+.234*e-h]]).stream(u),f()},c.fitExtent=function(t,e){return $t(c,t,e)},c.fitSize=function(t,e){return Ht(c,t,e)},c.fitWidth=function(t,e){return qt(c,t,e)},c.fitHeight=function(t,e){return Ut(c,t,e)},c.scale(1070)},Ki=1.340264,Qi=-.081106,tr=893e-6,er=.003796,nr=N(3)/2;function ir(t,e){var n=O(nr*I(e)),i=n*n,r=i*i*i;return[t*w(n)/(nr*(Ki+3*Qi*i+r*(7*tr+9*er*i))),n*(Ki+Qi*i+r*(tr+er*i))]}ir.invert=function(t,e){for(var n,i=e,r=i*i,o=r*r*r,a=0;a<12&&(o=(r=(i-=n=(i*(Ki+Qi*r+o*(tr+er*r))-e)/(Ki+3*Qi*r+o*(7*tr+9*er*r)))*i)*r*r,!(_(n)<f));++a);return[nr*t*(Ki+3*Qi*r+o*(7*tr+9*er*r))/w(i),O(I(i)/nr)]};var rr=function(){return ne(ir).scale(177.158)};function or(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}or.invert=function(t,e){var n,i=e,r=25;do{var o=i*i,a=o*o;i-=n=(i*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(_(n)>h&&--r>0);return[t/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]};var ar=function(){return ne(or).scale(175.295)}}}]);
//# sourceMappingURL=9.2a5f9405.chunk.js.map