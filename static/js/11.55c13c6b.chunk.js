(this.webpackJsonptriple7=this.webpackJsonptriple7||[]).push([[11],{366:function(e,t,i){"use strict";function n(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}))},390:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class n{constructor(e,t){Object.defineProperty(this,"_line",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_point",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_x0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_x1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_t0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tension",{enumerable:!0,configurable:!0,writable:!0,value:0}),this._context=e,this._tension=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0}lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l(this,this._t0,o(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){[e,t]=[t,e];let i=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,l(this,o(this,i=r(this,e,t)),i);break;default:l(this,this._t0,i=r(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}}function s(e){function t(t){return new n(t,e)}return t.tension=function(e){return s(+e)},t}function a(e){return e<0?-1:1}function r(e,t,i){let n=e._x1-e._x0,s=t-e._x1,r=(e._y1-e._y0)/(n||s<0&&-0),o=(i-e._y1)/(s||n<0&&-0),l=(r*s+o*n)/(n+s);return(a(r)+a(o))*Math.min(Math.abs(r),Math.abs(o),.5*Math.abs(l))||0}function o(e,t){let i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function l(e,t,i){let n=e._x0,s=e._y0,a=e._x1,r=e._y1,o=(a-n)/1.5*(1-e._tension);e._context.bezierCurveTo(s+o*t,n+o,r-o*i,a-o,r,a)}},391:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class n{constructor(e,t){Object.defineProperty(this,"_line",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_point",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_x0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_x1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_t0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tension",{enumerable:!0,configurable:!0,writable:!0,value:0}),this._context=e,this._tension=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0}lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l(this,this._t0,o(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){let i=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,l(this,o(this,i=r(this,e,t)),i);break;default:l(this,this._t0,i=r(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}}function s(e){return function(t){return new n(t,e)}}function a(e){return e<0?-1:1}function r(e,t,i){let n=e._x1-e._x0,s=t-e._x1,r=(e._y1-e._y0)/(n||s<0&&-0),o=(i-e._y1)/(s||n<0&&-0),l=(r*s+o*n)/(n+s);return(a(r)+a(o))*Math.min(Math.abs(r),Math.abs(o),.5*Math.abs(l))||0}function o(e,t){let i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function l(e,t,i){let n=e._x0,s=e._y0,a=e._x1,r=e._y1,o=(a-n)/1.5*(1-e._tension);e._context.bezierCurveTo(n+o,s+o*t,a-o,r-o*i,a,r)}},503:function(e,t,i){"use strict";i.r(t),i.d(t,"Chord",(function(){return oe})),i.d(t,"ChordDirected",(function(){return ce})),i.d(t,"ChordNonRibbon",(function(){return ue})),i.d(t,"ChordLink",(function(){return ae})),i.d(t,"ChordLinkDirected",(function(){return le})),i.d(t,"ChordNodes",(function(){return ie})),i.d(t,"Flow",(function(){return b})),i.d(t,"FlowLink",(function(){return se})),i.d(t,"FlowNode",(function(){return Z})),i.d(t,"FlowNodes",(function(){return U})),i.d(t,"Sankey",(function(){return Ve})),i.d(t,"SankeyLink",(function(){return ge})),i.d(t,"SankeyNodes",(function(){return de})),i.d(t,"ArcDiagram",(function(){return He})),i.d(t,"ArcDiagramLink",(function(){return qe})),i.d(t,"ArcDiagramNodes",(function(){return Xe})),i.d(t,"DefaultTheme",(function(){return u}));var n=i(25),s=i(51),a=i(5),r=i(59),o=i(22),l=i(2),c=i(36);class u extends s.a{setupDefaultRules(){super.setupDefaultRules();const e=this._root.interfaceColors,t=this.rule.bind(this);t("Flow").setAll({width:a.d,height:a.d,paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,hiddenSize:.05,minSize:0,minHiddenValue:0}),t("FlowNodes").setAll({colors:r.a.new(this._root,{}),legendLabelText:"{name}",legendValueText:"{sumOutgoing.formatNumber('#.#')}"}),t("FlowNode").setAll({setStateOnChildren:!0,cursorOverStyle:"pointer",toggleKey:"disabled"}),t("FlowNode").states.create("disabled",{}),t("FlowNode",["unknown"]).setAll({draggable:!1,opacity:0}),t("Label",["flow"]).states.create("disabled",{fill:e.get("disabled")}),t("RadialLabel",["flow","node"]).setAll({text:"{name}",populateText:!0}),t("FlowLink").setAll({fillStyle:"gradient",strokeStyle:"gradient"}),t("FlowLink",["source","unknown"]).setAll({}),t("FlowLink",["target","unknown"]).setAll({}),t("FlowNode").events.on("pointerover",(e=>{const t=e.target.dataItem;if(t){const e=t.get("outgoingLinks");e&&l.each(e,(e=>{const t=e.get("link");t.hover(),t.hideTooltip()}));const i=t.get("incomingLinks");i&&l.each(i,(e=>{const t=e.get("link");t.hover(),t.hideTooltip()}))}let i=t.get("slice")||t.get("rectangle");i&&i.get("tooltipText")&&i.showTooltip()})),t("FlowNode").events.on("pointerout",(e=>{const t=e.target.dataItem;if(t){const e=t.get("outgoingLinks");e&&l.each(e,(e=>{e.get("link").unhover()}));const i=t.get("incomingLinks");i&&l.each(i,(e=>{e.get("link").unhover()}))}})),t("Sankey").setAll({orientation:"horizontal",nodeAlign:"justify",linkTension:.5,nodePadding:10,nodeWidth:10}),t("RoundedRectangle",["sankey","node","shape"]).setAll({cornerRadiusTL:0,cornerRadiusBL:0,cornerRadiusTR:0,cornerRadiusBR:0}),t("RoundedRectangle",["shape"]).states.create("disabled",{fill:e.get("disabled")}),t("SankeyLink").setAll({controlPointDistance:.2}),t("FlowNode",["sankey"]).setAll({draggable:!0});{const i=t("Graphics",["sankey","link"]);i.setAll({fillOpacity:.2,strokeOpacity:0,interactive:!0,tooltipText:"{sourceId} - {targetId}: {value}"}),Object(o.b)(i,"fill",e,"grid")}t("Graphics",["sankey","link"]).states.create("hover",{fillOpacity:.5}),t("Label",["sankey","node"]).setAll({text:"{name}",populateText:!0}),t("Label",["sankey","horizontal"]).setAll({y:a.e,centerY:a.e,paddingLeft:15}),t("Label",["sankey","vertical"]).setAll({x:a.e,centerX:a.e,paddingTop:15}),t("Chord").setAll({radius:Object(a.f)(90),nodeWidth:10,padAngle:1,startAngle:0,sort:"none"}),t("ChordDirected").setAll({linkHeadRadius:10}),t("ChordNodes").setAll({x:a.e,y:a.e}),t("FlowNode",["chord"]).setAll({draggable:!0}),t("ChordLink").setAll({sourceRadius:a.d,targetRadius:a.d,fillStyle:"solid",strokeStyle:"solid",tooltipText:"{sourceId} - {targetId}: {value}"}),t("Slice",["chord","node","shape"]).setAll({cornerRadius:0}),t("Slice",["shape"]).states.create("disabled",{fill:e.get("disabled")}),t("RadialLabel",["chord","node"]).setAll({radius:5,textType:"circular"}),t("ChordLinkDirected").setAll({headRadius:10});{const i=t("Graphics",["chord","link","shape"]);i.setAll({fillOpacity:.2,strokeOpacity:0,interactive:!0}),Object(o.b)(i,"fill",e,"grid"),Object(o.b)(i,"stroke",e,"grid")}t("Graphics",["chord","link","shape"]).states.create("hover",{fillOpacity:.5}),t("ChordNonRibbon").setAll({linkType:"curve"}),t("ChordLink",["basic"]).setAll({fillStyle:"none",strokeStyle:"source"}),t("Graphics",["chord","link","shape","basic"]).setAll({strokeOpacity:.4}),t("Graphics",["chord","link","shape","basic"]).states.create("hover",{strokeWidth:2,strokeOpacity:1}),t("ArcDiagram").setAll({orientation:"horizontal",nodePadding:5,minRadius:5,radiusKey:"sum",animationEasing:c.out(c.cubic)}),t("ArcDiagramNodes",["horizontal"]).setAll({y:a.d,centerY:a.d}),t("ArcDiagramNodes",["vertical"]).setAll({centerX:0}),t("Circle",["arcdiagram","node","shape"]).setAll({tooltipText:"{name}: {sum}"}),t("Circle",["arcdiagram","node","shape"]).states.create("disabled",{fill:e.get("disabled")});{const i=t("ArcDiagramLink",["link","shape"]);i.setAll({strokeOpacity:.15,strokeStyle:"solid",fillStyle:"none",isMeasured:!1}),Object(o.b)(i,"stroke",e,"grid")}t("ArcDiagramLink",["link","shape"]).states.create("hover",{strokeOpacity:1}),t("Label",["arcdiagram","node"]).setAll({text:"{name}",populateText:!0}),t("Label",["arcdiagram","horizontal"]).setAll({y:0,centerY:a.e,centerX:a.d,rotation:-90}),t("Label",["arcdiagram","vertical"]).setAll({centerY:a.e,centerX:a.d,paddingRight:15})}}var h=i(63),d=i(14),g=i(113),f=i(4);class b extends h.a{constructor(){super(...arguments),Object.defineProperty(this,"linksContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(d.a.new(this._root,{}))}),Object.defineProperty(this,"_nodesData",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_linksData",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_nodesDataSet",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_linksByIndex",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._defaultThemes.push(u.new(this._root)),this.fields.push("disabled","sourceId","targetId"),this.nodes&&(this.nodes.flow=this),super._afterNew(),this.children.push(this.bulletsContainer)}processDataItem(e){super.processDataItem(e);const t=this.nodes;if(t){let i=!1,n=e.get("sourceId"),s=t.getDataItemById(n);s||(null==n&&(n="undefined"+this._index,this._index++,i=!0),t.data.push({id:n,unknown:i}),s=t.getDataItemById(n),i||s.set("name",n)),i=!1;let a=e.get("targetId"),r=t.getDataItemById(a);r||(null==a&&(a="undefined"+this._index,this._index++,i=!0),t.data.push({id:a,unknown:i}),r=t.getDataItemById(a),i||r.set("name",a)),s&&(e.set("source",s),t.addOutgoingLink(s,e)),r&&(e.set("target",r),t.addincomingLink(r,e)),e.set("link",this.makeLink(e));const o=this.nodes.dataItems.indexOf(s),l=this.nodes.dataItems.indexOf(r);this._linksByIndex[o+"_"+l]=e,s.get("unknown")&&(r&&s.set("fill",r.get("fill")),e.get("link").set("fillStyle","gradient")),r.get("unknown")&&(s&&r.set("fill",s.get("fill")),e.get("link").set("fillStyle","gradient")),this._updateLinkColor(e)}}_onDataClear(){this.nodes._userDataSet||(this.nodes.data.setAll([]),this.nodes._userDataSet=!1)}_prepareChildren(){super._prepareChildren();let e=1/0,t=-1/0,i=0;if(this._valuesDirty){this._nodesData=[];const n=this.nodes;n&&l.each(n.dataItems,(e=>{const t=e.get("d3SankeyNode");this._nodesData.push(t);const i=e.get("incomingLinks");let s=0,a=0;i&&l.each(i,(e=>{const t=e.get("value"),i=e.get("valueWorking");s+=t,a+=i})),e.set("sumIncoming",s),e.set("sumIncomingWorking",a);const r=e.get("outgoingLinks");let o=0,c=0;r&&l.each(r,(e=>{const t=e.get("value"),i=e.get("valueWorking");o+=t,c+=i})),e.set("sumOutgoing",o),e.set("sumOutgoingWorking",c),e.set("sum",s+o),e.set("sumWorking",a+c),n.updateLegendValue(e)})),this._linksData=[],l.each(this.dataItems,(n=>{let s=n.get("value");f.isNumber(s)&&(s<e&&(e=s),s>t&&(t=s),i+=s)})),l.each(this.dataItems,(e=>{let t=e.get("value");if(f.isNumber(t)){let t=e.get("valueWorking"),n=this.get("minSize",0);n>0&&t<n*i&&(t=n*i);let s={source:e.get("source").get("d3SankeyNode"),target:e.get("target").get("d3SankeyNode"),value:t};e.setRaw("d3SankeyLink",s),this._linksData.push(s),this.updateLegendValue(e)}})),this.setPrivateRaw("valueHigh",t),this.setPrivateRaw("valueLow",e),this.setPrivateRaw("valueSum",i)}}_updateLinkColor(e){const t=e.get("link"),i=t.get("fillStyle"),n=t.get("strokeStyle"),s=e.get("source"),a=e.get("target"),r=s.get("fill"),o=a.get("fill");switch(t.remove("fillGradient"),t.remove("strokeGradient"),i){case"solid":t._applyTemplates();break;case"source":t.set("fill",r);break;case"target":t.set("fill",o);break;case"gradient":let e=t._fillGradient;e||(e=g.a.new(this._root,{}));const i={color:r};s.get("unknown")&&(i.opacity=0);const n={color:o};a.get("unknown")&&(n.opacity=0),e.set("stops",[i,n]),t._fillGradient=e,t.set("fillGradient",e);break;case"none":t.set("fill",void 0)}switch(n){case"solid":t._applyTemplates();break;case"source":t.set("stroke",r);break;case"target":t.set("stroke",o);break;case"gradient":let e=t._strokeGradient;if(!e){e=g.a.new(this._root,{});const i={color:r};s.get("unknown")&&(i.opacity=0);const n={color:o};a.get("unknown")&&(n.opacity=0),e.set("stops",[i,n]),t._strokeGradient=e}t.set("strokeGradient",e);break;case"none":t.remove("stroke")}}disposeDataItem(e){super.disposeDataItem(e);let t=e.get("link");t&&(this.links.removeValue(t),t.dispose())}hideDataItem(e,t){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return Object(n.a)(this,void 0,void 0,(function*(){const n=[i.hideDataItem.call(this,e,t)],s=this.states.create("hidden",{}),a="stateAnimationDuration",r="stateAnimationEasing";f.isNumber(t)||(t=s.get(a,this.get(a,0)));const o=s.get(r,this.get(r));n.push(e.animate({key:"valueWorking",to:Math.max(this.get("minHiddenValue",0),this.get("hiddenSize",0)*e.get("value")),duration:t,easing:o}).waitForStop());e.get("link").hide(),yield Promise.all(n)}))}showDataItem(e,t){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return Object(n.a)(this,void 0,void 0,(function*(){const n=[i.showDataItem.call(this,e,t)];f.isNumber(t)||(t=this.get("stateAnimationDuration",0));const s=this.get("stateAnimationEasing");n.push(e.animate({key:"valueWorking",to:e.get("value"),duration:t,easing:s}).waitForStop());e.get("link").show(),yield Promise.all(n)}))}_positionBullet(e){const t=e.get("sprite");if(t){const i=t.dataItem;if(i){const t=i.get("link"),n=e.get("sprite");if(n){const i=t.getPoint(this._getBulletLocation(e));n.setAll({x:i.x,y:i.y}),e.get("autoRotate")&&n.set("rotation",i.angle+e.get("autoRotateAngle",0))}}}}_getBulletLocation(e){return e.get("locationY",0)}}Object.defineProperty(b,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Flow"}),Object.defineProperty(b,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.a.classNames.concat([b.className])});var p=Math.abs,m=Math.cos,_=Math.sin,y=Math.PI,k=y/2,v=2*y,w=Math.max,x=1e-12;function P(e,t){return Array.from({length:t-e},((t,i)=>e+i))}function D(e,t){var i=0,n=null,s=null,a=null;function r(r){var o,l=r.length,c=new Array(l),u=P(0,l),h=new Array(l*l),d=new Array(l),g=0;r=Float64Array.from({length:l*l},t?(e,t)=>r[t%l][t/l|0]:(e,t)=>r[t/l|0][t%l]);for(let t=0;t<l;++t){let i=0;for(let n=0;n<l;++n)i+=r[t*l+n]+e*r[n*l+t];g+=c[t]=i}o=(g=w(0,v-i*l)/g)?i:v/l;{let t=0;n&&u.sort(((e,t)=>n(c[e],c[t])));for(const i of u){const n=t;if(e){const e=P(1+~l,l).filter((e=>e<0?r[~e*l+i]:r[i*l+e]));s&&e.sort(((e,t)=>s(e<0?-r[~e*l+i]:r[i*l+e],t<0?-r[~t*l+i]:r[i*l+t])));for(const n of e)if(n<0){(h[~n*l+i]||(h[~n*l+i]={source:null,target:null})).target={index:i,startAngle:t,endAngle:t+=r[~n*l+i]*g,value:r[~n*l+i]}}else{(h[i*l+n]||(h[i*l+n]={source:null,target:null})).source={index:i,startAngle:t,endAngle:t+=r[i*l+n]*g,value:r[i*l+n]}}d[i]={index:i,startAngle:n,endAngle:t,value:c[i]}}else{const e=P(0,l).filter((e=>r[i*l+e]||r[e*l+i]));s&&e.sort(((e,t)=>s(r[i*l+e],r[i*l+t])));for(const n of e){let e;if(i<n?(e=h[i*l+n]||(h[i*l+n]={source:null,target:null}),e.source={index:i,startAngle:t,endAngle:t+=r[i*l+n]*g,value:r[i*l+n]}):(e=h[n*l+i]||(h[n*l+i]={source:null,target:null}),e.target={index:i,startAngle:t,endAngle:t+=r[i*l+n]*g,value:r[i*l+n]},i===n&&(e.source=e.target)),e.source&&e.target&&e.source.value<e.target.value){const t=e.source;e.source=e.target,e.target=t}}d[i]={index:i,startAngle:n,endAngle:t,value:c[i]}}t+=o}}return(h=Object.values(h)).groups=d,a?h.sort(a):h}return r.padAngle=function(e){return arguments.length?(i=w(0,e),r):i},r.sortGroups=function(e){return arguments.length?(n=e,r):n},r.sortSubgroups=function(e){return arguments.length?(s=e,r):s},r.sortChords=function(e){return arguments.length?(null==e?a=null:(t=e,a=function(e,i){return t(e.source.value+e.target.value,i.source.value+i.target.value)})._=e,r):a&&a._;var t},r}var N=i(346),A=Array.prototype.slice,O=function(e){return function(){return e}};function L(e){return e.source}function I(e){return e.target}function j(e){return e.radius}function T(e){return e.startAngle}function M(e){return e.endAngle}function S(){return 0}function C(){return 10}function R(e){var t=L,i=I,n=j,s=j,a=T,r=M,o=S,l=null;function c(){var c,u=t.apply(this,arguments),h=i.apply(this,arguments),d=o.apply(this,arguments)/2,g=A.call(arguments),f=+n.apply(this,(g[0]=u,g)),b=a.apply(this,g)-k,y=r.apply(this,g)-k,v=+s.apply(this,(g[0]=h,g)),w=a.apply(this,g)-k,P=r.apply(this,g)-k;if(l||(l=c=Object(N.b)()),d>x&&(p(y-b)>2*d+x?y>b?(b+=d,y-=d):(b-=d,y+=d):b=y=(b+y)/2,p(P-w)>2*d+x?P>w?(w+=d,P-=d):(w-=d,P+=d):w=P=(w+P)/2),l.moveTo(f*m(b),f*_(b)),l.arc(0,0,f,b,y),b!==w||y!==P)if(e){var D=v-+e.apply(this,arguments),O=(w+P)/2;l.quadraticCurveTo(0,0,D*m(w),D*_(w)),l.lineTo(v*m(O),v*_(O)),l.lineTo(D*m(P),D*_(P))}else l.quadraticCurveTo(0,0,v*m(w),v*_(w)),l.arc(0,0,v,w,P);if(l.quadraticCurveTo(0,0,f*m(b),f*_(b)),l.closePath(),c)return l=null,c+""||null}return e&&(c.headRadius=function(t){return arguments.length?(e="function"===typeof t?t:O(+t),c):e}),c.radius=function(e){return arguments.length?(n=s="function"===typeof e?e:O(+e),c):n},c.sourceRadius=function(e){return arguments.length?(n="function"===typeof e?e:O(+e),c):n},c.targetRadius=function(e){return arguments.length?(s="function"===typeof e?e:O(+e),c):s},c.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:O(+e),c):a},c.endAngle=function(e){return arguments.length?(r="function"===typeof e?e:O(+e),c):r},c.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:O(+e),c):o},c.source=function(e){return arguments.length?(t=e,c):t},c.target=function(e){return arguments.length?(i=e,c):i},c.context=function(e){return arguments.length?(l=null==e?null:e,c):l},c}var G=function(){return R()};function F(){return R(C)}var W=i(366);i(468),i(495);i(510),i(489);i(389),i(469),i(403),i(375);const{abs:z,max:E,min:B}=Math;function V(e){return[+e[0],+e[1]]}function Y(e){return[V(e[0]),V(e[1])]}["w","e"].map(X),["n","s"].map(X),["n","w","e","s","nw","ne","sw","se"].map(X);function X(e){return{type:e}}function q(e){return((e=Math.exp(e))+1/e)/2}(function e(t,i,n){function s(e,s){var a,r,o=e[0],l=e[1],c=e[2],u=s[0],h=s[1],d=s[2],g=u-o,f=h-l,b=g*g+f*f;if(b<1e-12)r=Math.log(d/c)/t,a=function(e){return[o+e*g,l+e*f,c*Math.exp(t*e*r)]};else{var p=Math.sqrt(b),m=(d*d-c*c+n*b)/(2*c*i*p),_=(d*d-c*c-n*b)/(2*d*i*p),y=Math.log(Math.sqrt(m*m+1)-m),k=Math.log(Math.sqrt(_*_+1)-_);r=(k-y)/t,a=function(e){var n,s=e*r,a=q(y),u=c/(i*p)*(a*(n=t*s+y,((n=Math.exp(2*n))-1)/(n+1))-function(e){return((e=Math.exp(e))-1/e)/2}(y));return[o+u*g,l+u*f,c*a/q(t*s+y)]}}return a.duration=1e3*r*t/Math.SQRT2,a}return s.rho=function(t){var i=Math.max(.001,+t),n=i*i;return e(i,n,n*n)},s})(Math.SQRT2,2,4);function H(e,t,i){this.k=e,this.x=t,this.y=i}H.prototype={constructor:H,scale:function(e){return 1===e?this:new H(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new H(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new H(1,0,0);H.prototype;var K=i(24),Q=i(21),J=i(33);class Z extends d.a{constructor(){super(...arguments),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}}Object.defineProperty(Z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"FlowNode"}),Object.defineProperty(Z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:d.a.classNames.concat([Z.className])});class U extends h.a{constructor(){super(...arguments),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>J.a._new(this._root,{themeTags:["flow"]},[this.labels.template]))))}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>Z._new(this._root,{themeTags:["node"]},[this.nodes.template]))))}),Object.defineProperty(this,"_userDataSet",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this.fields.push("unknown","name","fill"),this.set("idField","id"),this.set("nameField","id"),this.set("fillField","fill"),this.set("unknownField","unknown"),this.children.push(this.bulletsContainer),super._afterNew()}_onDataClear(){const e=this.get("colors");e&&e.reset();const t=this.get("patterns");t&&t.reset(),this._userDataSet=!0}processDataItem(e){if(super.processDataItem(e),e.setRaw("d3SankeyNode",{name:e.get("id"),dataItem:e}),null==e.get("fill")){let t=this.get("colors");t&&e.setRaw("fill",t.next())}if(null==e.get("fillPattern")){let t=this.get("patterns");t&&e.setRaw("fillPattern",t.next())}const t=this.makeNode(e);e.setRaw("node",t);const i=this.get("disabledField");if(i){const t=e.dataContext;t&&t[i]&&this.root.events.once("frameended",(()=>{this.disableDataItem(e,0)}))}}makeNode(e,t){const i=this.nodes.make();return this.nodes.push(i),t&&i.addTag(t),e.get("unknown")&&i.addTag("unknown"),this.children.push(i),i._setDataItem(e),i.series=this,i.events.on("click",(e=>{const t=e.target;if("disabled"==t.get("toggleKey")){const e=t.dataItem;e&&(e.isHidden()?this.enableDataItem(e):this.disableDataItem(e))}})),e.on("fill",(()=>{this._updateNodeColor(e)})),e.on("fillPattern",(()=>{this._updateNodeColor(e)})),e.set("node",i),i}_updateNodeColor(e){}disposeDataItem(e){super.disposeDataItem(e);let t=e.get("node");t&&(this.nodes.removeValue(t),t.dispose());let i=e.get("label");i&&(this.labels.removeValue(i),i.dispose())}addincomingLink(e,t){let i=e.get("incomingLinks");i||(i=[],e.set("incomingLinks",i)),i.push(t)}addOutgoingLink(e,t){let i=e.get("outgoingLinks");i||(i=[],e.set("outgoingLinks",i)),i.push(t)}showDataItem(e,t){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return Object(n.a)(this,void 0,void 0,(function*(){const n=[i.showDataItem.call(this,e,t)],s=this.flow;if(s){const i=e.get("node");i&&i.show();let n=e.get("label");n&&n.show(t);let a=e.get("outgoingLinks");a&&l.each(a,(e=>{s.showDataItem(e,t)})),a=e.get("incomingLinks"),a&&l.each(a,(e=>{s.showDataItem(e,t)}))}yield n}))}hideDataItem(e,t){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return Object(n.a)(this,void 0,void 0,(function*(){const n=[i.hideDataItem.call(this,e,t)],s=this.flow;if(s){const i=e.get("node");i&&i.hide();let n=e.get("label");n&&n.hide(t);let a=e.get("outgoingLinks");a&&l.each(a,(e=>{s.hideDataItem(e,t)})),a=e.get("incomingLinks"),a&&l.each(a,(e=>{s.hideDataItem(e,t)}))}yield n}))}enableDataItem(e,t){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return Object(n.a)(this,void 0,void 0,(function*(){const n=[i.showDataItem.call(this,e,t)],s=this.flow;if(s){const i=e.get("node");i&&this.root.events.once("frameended",(()=>{i.set("disabled",!1)}));let n=e.get("label");n&&n.set("disabled",!1);let a=e.get("outgoingLinks");a&&l.each(a,(e=>{s.showDataItem(e,t)})),a=e.get("incomingLinks"),a&&l.each(a,(e=>{s.showDataItem(e,t)}))}yield n}))}disableDataItem(e,t){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return Object(n.a)(this,void 0,void 0,(function*(){const n=[i.hideDataItem.call(this,e,t)],s=this.flow;if(s){const i=e.get("node");i&&this.root.events.once("frameended",(()=>{i.set("disabled",!0)}));let n=e.get("label");n&&n.set("disabled",!0);let a=e.get("outgoingLinks");a&&l.each(a,(e=>{s.hideDataItem(e,t)})),a=e.get("incomingLinks"),a&&l.each(a,(e=>{s.hideDataItem(e,t)}))}yield n}))}}Object.defineProperty(U,"className",{enumerable:!0,configurable:!0,writable:!0,value:"FlowNodes"}),Object.defineProperty(U,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.a.classNames.concat([U.className])});var $=i(162),ee=i(161),te=i(9);class ie extends U{constructor(){super(...arguments),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>ee.a._new(this._root,{},[this.labels.template]))))}),Object.defineProperty(this,"flow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dAngle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"slices",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>$.a._new(this._root,{themeTags:["shape"]},[this.slices.template]))))}),Object.defineProperty(this,"rectangles",{enumerable:!0,configurable:!0,writable:!0,value:this.slices})}makeNode(e){const t=super.makeNode(e,"chord"),i=t.children.insertIndex(0,this.slices.make());e.set("slice",i),i._setSoft("fill",e.get("fill")),i._setSoft("fillPattern",e.get("fillPattern"));const n=this.labels.make();return this.labels.push(n),n.addTag("flow"),n.addTag("chord"),n.addTag("node"),t.children.push(n),e.set("label",n),t.events.on("dragstart",(e=>{let t=this.toLocal(e.point);const i=te.getAngle({x:0,y:0},t);this.flow&&(this._dAngle=this.flow.get("startAngle",0)-i)})),t.events.on("dragged",(e=>{let i=this.toLocal(e.point);const n=te.getAngle({x:0,y:0},i);t.setAll({x:0,y:0}),this.flow&&this.flow.set("startAngle",n+this._dAngle)})),n._setDataItem(e),i._setDataItem(e),t}_positionBullet(e){const t=e.get("sprite");if(t){const i=t.dataItem;if(i){const t=e.get("sprite");if(t){const n=i.get("slice"),s=e.get("locationX",.5),a=e.get("locationY",.5);if(n){const e=n.get("radius",0),i=n.get("innerRadius",0),r=i+(e-i)*a,o=n.get("startAngle",0)+n.get("arc",0)*s;t.setAll({x:r*te.cos(o),y:r*te.sin(o)})}}}}}_updateNodeColor(e){const t=e.get("slice");t&&(t.set("fill",e.get("fill")),t.set("fillPattern",e.get("fillPattern")))}disposeDataItem(e){super.disposeDataItem(e);let t=e.get("slice");t&&(this.slices.removeValue(t),t.dispose())}}Object.defineProperty(ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordNodes"}),Object.defineProperty(ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:U.classNames.concat([ie.className])});var ne=i(17);class se extends ne.a{constructor(){super(...arguments),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillGradient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeGradient",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_changed(){if(super._changed(),this.isDirty("fillStyle")){const e=this.series,t=this.dataItem;e&&t&&e._updateLinkColor(t)}}_getTooltipPoint(){let e=this.get("tooltipY"),t=.5;return e instanceof a.a&&(t=e.value),this.getPoint(t)}}Object.defineProperty(se,"className",{enumerable:!0,configurable:!0,writable:!0,value:"FlowLink"}),Object.defineProperty(se,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ne.a.classNames.concat([se.className])});class ae extends se{constructor(){super(...arguments),Object.defineProperty(this,"_p0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_p1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getPoint(e){if(this._p0&&this._p1){if("line"===this._type){let t=te.getPointOnLine(this._p0,this._p1,e);return{x:t.x,y:t.y,angle:te.getAngle(this._p0,this._p1)}}{let t=te.getPointOnQuadraticCurve(this._p0,this._p1,{x:0,y:0},Math.max(0,e-.01)),i=te.getPointOnQuadraticCurve(this._p0,this._p1,{x:0,y:0},Math.min(1,e+.01)),n=te.getPointOnQuadraticCurve(this._p0,this._p1,{x:0,y:0},e);return{x:n.x,y:n.y,angle:te.getAngle(t,i)}}}return{x:0,y:0,angle:0}}}Object.defineProperty(ae,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordLink"}),Object.defineProperty(ae,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:se.classNames.concat([ae.className])});var re=i(3);class oe extends b{constructor(){super(...arguments),Object.defineProperty(this,"links",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>ae._new(this._root,{themeTags:["link","shape"]},[this.links.template]))))}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ie.new(this._root,{}))}),Object.defineProperty(this,"_d3chord",{enumerable:!0,configurable:!0,writable:!0,value:D(!1,!1)}),Object.defineProperty(this,"_chordLayout",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_ribbon",{enumerable:!0,configurable:!0,writable:!0,value:G()})}_afterNew(){this._settings.themeTags=re.mergeTags(this._settings.themeTags,["chord"]),this.linksContainer.setAll({x:a.e,y:a.e}),this.bulletsContainer.setAll({x:a.e,y:a.e}),super._afterNew()}_fixRibbon(e){e.startAngle((e=>e.startAngle+this.get("startAngle",0)*te.RADIANS+Math.PI/2)),e.endAngle((e=>e.endAngle+this.get("startAngle",0)*te.RADIANS+Math.PI/2))}makeLink(e){const t=this.linksContainer.children.push(this.links.make());return this.links.push(t),t._setDataItem(e),t.set("source",e.get("source")),t.set("target",e.get("target")),t.series=this,t}_makeMatrix(){const e=[];return l.each(this.nodes.dataItems,(t=>{const i=[];e.push(i);let n=t.get("outgoingLinks");l.each(this.nodes.dataItems,(e=>{let t=0;n&&l.each(n,(i=>{i.get("target")===e&&(t=i.get("valueWorking"));let n=this.getPrivate("valueSum",0),s=this.get("minSize",0);t>0&&s>0&&t<n*s&&(t=n*s)})),i.push(t)}))})),e}_prepareChildren(){super._prepareChildren(),this._fixRibbon(this._ribbon);let e=!1;if(this._valuesDirty||this._sizeDirty||this.isDirty("padAngle")||this.isDirty("startAngle")){const t=this._makeMatrix();this._d3chord.padAngle(this.get("padAngle",0)*te.RADIANS);const i=this.get("sort");"ascending"===i?this._d3chord.sortGroups(W.a):"descending"===i&&this._d3chord.sortGroups(W.b),this._chordLayout=this._d3chord(t),e=!0}if(e||this.isDirty("radius")||this.isDirty("nodeWidth")){let e=re.relativeToValue(this.get("radius",0),Math.min(this.innerWidth(),this.innerHeight()))/2,t=0;const i=this.get("startAngle",0),n=this.get("nodeWidth",0);l.each(this.nodes.dataItems,(s=>{const a=s.get("slice"),r=this._chordLayout.groups[t],o=r.startAngle*te.DEGREES+i,l=r.endAngle*te.DEGREES+i;a.setAll({radius:e,innerRadius:e-n,startAngle:o,arc:l-o});const c=s.get("label");c.setAll({labelAngle:o+(l-o)/2}),c.setPrivate("radius",e),c.setPrivate("innerRadius",.1),t++}));const s=e-this.get("nodeWidth",0);l.each(this._chordLayout,(e=>{let t=this._linksByIndex[e.source.index+"_"+e.target.index];if(t||(t=this._linksByIndex[e.target.index+"_"+e.source.index]),t){const i=t.get("link");this._getLinkPoints(i,s,e),this._updateLink(this._ribbon,i,s,e)}}))}}_getLinkPoints(e,t,i){const n=i.source,s=i.target,a=this.get("startAngle",0)*te.RADIANS;if(n&&s){const i=n.startAngle,r=i+(n.endAngle-i)/2+a,o=s.startAngle,l=o+(s.endAngle-o)/2+a;e._p0={x:t*Math.cos(r),y:t*Math.sin(r)},e._p1={x:t*Math.cos(l),y:t*Math.sin(l)}}}_updateLink(e,t,i,n){n&&(e.sourceRadius(re.relativeToValue(t.get("sourceRadius",a.d),i)),e.targetRadius(re.relativeToValue(t.get("targetRadius",a.d),i)),t.set("draw",(t=>{e.context(t),e(n)})))}}Object.defineProperty(oe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chord"}),Object.defineProperty(oe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([oe.className])});class le extends ae{_afterNew(){this._settings.themeTags=re.mergeTags(this._settings.themeTags,["chord","link","directed"]),super._afterNew()}}Object.defineProperty(le,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordLinkDirected"}),Object.defineProperty(le,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ae.classNames.concat([le.className])});class ce extends oe{constructor(){super(...arguments),Object.defineProperty(this,"_d3chord",{enumerable:!0,configurable:!0,writable:!0,value:D(!0,!1)}),Object.defineProperty(this,"_ribbonArrow",{enumerable:!0,configurable:!0,writable:!0,value:F()}),Object.defineProperty(this,"links",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>le._new(this._root,{themeTags:["link","shape"]},[this.links.template]))))})}makeLink(e){const t=this.linksContainer.children.push(this.links.make());return t._setDataItem(e),t.set("source",e.get("source")),t.set("target",e.get("target")),t.series=this,t}_afterNew(){this._settings.themeTags=re.mergeTags(this._settings.themeTags,["directed"]),super._afterNew(),this._markDirtyKey("linkHeadRadius")}_prepareChildren(){const e="linkHeadRadius";if(this.isDirty(e)){const t=this.get(e);if(null==t)this._ribbon=G();else{let e=F();e.headRadius(t),this._ribbon=e}}super._prepareChildren()}}Object.defineProperty(ce,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordDirected"}),Object.defineProperty(ce,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:oe.classNames.concat([ce.className])});class ue extends oe{_afterNew(){this._settings.themeTags=re.mergeTags(this._settings.themeTags,["chord","basic"]),super._afterNew()}_makeMatrix(){const e=[];return l.each(this.nodes.dataItems,(t=>{const i=[];e.push(i),l.each(this.nodes.dataItems,(e=>{let n=1;t===e&&(n=0),i.push(n)}))})),e}_updateLink(e,t,i,n){if(t._type=this.get("linkType"),n){const e=this.get("linkType");t.set("draw",(i=>{let n=t._p0,s=t._p1;n&&s&&(i.moveTo(n.x,n.y),"line"==e?i.lineTo(s.x,s.y):i.quadraticCurveTo(0,0,s.x,s.y))}))}}_getLinkPoints(e,t,i){const n=e.get("source"),s=e.get("target");if(n&&s){const i=n.get("slice"),a=s.get("slice"),r=i.get("startAngle",0)+i.get("arc",0)/2,o=a.get("startAngle",0)+a.get("arc",0)/2;e._p0={x:t*te.cos(r),y:t*te.sin(r)},e._p1={x:t*te.cos(o),y:t*te.sin(o)}}}}Object.defineProperty(ue,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordNonRibbon"}),Object.defineProperty(ue,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:oe.classNames.concat([ue.className])});var he=i(32);class de extends U{constructor(){super(...arguments),Object.defineProperty(this,"rectangles",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>he.a._new(this._root,{themeTags:["shape"]},[this.rectangles.template]))))}),Object.defineProperty(this,"flow",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}makeNode(e){const t=this.flow,i=super.makeNode(e,"sankey"),n=i.children.insertIndex(0,this.rectangles.make());this.rectangles.push(n),n._setSoft("fill",e.get("fill")),n._setSoft("fillPattern",e.get("fillPattern")),e.set("rectangle",n),i.events.on("dragged",(()=>{const e=i.dataItem.get("d3SankeyNode");e&&t&&("horizontal"==t.get("orientation")?(e.x0=i.x(),e.y0=i.y()):(e.x0=i.y(),e.y0=i.x()),t.updateSankey())}));const s=this.labels.make();return this.labels.push(s),t&&s.addTag(t.get("orientation","")),i.children.push(s),e.set("label",s),s._setDataItem(e),n._setDataItem(e),i}_positionBullet(e){const t=e.get("sprite");if(t){const i=t.dataItem;if(i){const t=e.get("sprite");if(t){const n=i.get("rectangle"),s=i.get("node"),a=e.get("locationX",.5),r=e.get("locationY",.5);n&&t.setAll({x:s.x()+n.width()*a,y:s.y()+n.height()*r})}}}}disposeDataItem(e){super.disposeDataItem(e);let t=e.get("rectangle");t&&(this.rectangles.removeValue(t),t.dispose())}_updateNodeColor(e){const t=e.get("rectangle");t&&(t.set("fill",e.get("fill")),t.set("fillPattern",e.get("fillPattern")))}}Object.defineProperty(de,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SankeyNodes"}),Object.defineProperty(de,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:U.classNames.concat([de.className])});class ge extends se{constructor(){super(...arguments),Object.defineProperty(this,"_svgPath",{enumerable:!0,configurable:!0,writable:!0,value:document.createElementNS("http://www.w3.org/2000/svg","path")}),Object.defineProperty(this,"_totalLength",{enumerable:!0,configurable:!0,writable:!0,value:0})}_beforeChanged(){if(super._beforeChanged(),this.isDirty("source")){const e=this.get("source");if(e){const t=e.get("node");this._disposers.push(t.events.on("positionchanged",(()=>{this.markDirty()})))}}if(this.isDirty("target")){const e=this.get("target");if(e){const t=e.get("node");this._disposers.push(t.events.on("positionchanged",(()=>{this.markDirty()})))}}if(this.isPrivateDirty("orientation")){const e=this.series,t=this.dataItem;t&&e&&e._updateLinkColor(t)}const e=this.get("target"),t=this.get("source");let i,n;if(t&&e){this._clear=!0,i=t.get("node"),n=e.get("node");let s=0,a=0,r=0,o=0,l=0,c=0,u=0,h=0,d=0,g=0,f=0,b=0,p=0,m=0,_=0,y=0,k=0,v=0;const w=this.dataItem;if(w){const x=w.get("d3SankeyLink");if(x){let w=x.width||0,P=this.getPrivate("orientation");"vertical"==P?(i&&(r=i.y()+i.get("dy",0)),n&&(o=n.y()+n.get("dy",0)),k=90,v=90,s=x.y0||0,a=x.y1||0,s+=i.get("dx",0),a+=n.get("dx",0),o<r&&([s,a]=[a,s],[r,o]=[o,r]),t.get("unknown")&&(s=a,r+=(o-r)/2),e.get("unknown")&&(a=s,o=r+(o-r)/2),l=s-w/2,c=r,u=a-w/2,h=o,d=s+w/2,g=a+w/2,f=r,b=o,p=s,m=a,_=r,y=o):(i&&(s=i.x()+i.get("dx",0)),n&&(a=n.x()+n.get("dx",0)),r=x.y0||0,o=x.y1||0,r+=i.get("dy",0),o+=n.get("dy",0),a<s&&([s,a]=[a,s],[r,o]=[o,r]),t.get("unknown")&&(r=o,s+=(a-s)/2),e.get("unknown")&&(o=r,a=s+(a-s)/2),l=s,c=r-w/2,u=a,h=o-w/2,d=s,g=a,f=r+w/2,b=o+w/2,p=s,m=a,_=r,y=o),te.round(l,3)==te.round(u,3)&&(u+=.01),te.round(c,3)==te.round(h,3)&&(h+=.01),te.round(d,3)==te.round(g,3)&&(g+=.01),te.round(f,3)==te.round(b,3)&&(b+=.01);let D=this.get("controlPointDistance",.2);D=Math.min(.4999,D);let N=l+(u-l)*D*te.cos(k),A=c+(h-c)*D*te.sin(k),O=u-(u-l)*D*te.cos(v),L=h-(h-c)*D*te.sin(v),I=p+(m-p)*D*te.cos(k),j=_+(y-_)*D*te.sin(k),T=m-(m-p)*D*te.cos(v),M=y-(y-_)*D*te.sin(v),S=te.getAngle({x:N,y:A},{x:O,y:L}),C=(w/te.cos(S)-w)/te.tan(S)*te.cos(k),R=(w/te.sin(S)-w)*te.tan(S)*te.sin(k),G=-C/2+d+(g-d)*D*te.cos(k),F=-R/2+f+(b-f)*D*te.sin(k),W=-C/2+g-(g-d)*D*te.cos(v),z=-R/2+b-(b-f)*D*te.sin(v);N+=C/2,A+=R/2,O+=C/2,L+=R/2,"vertical"==P?(A=Math.min(h,Math.max(c+1,A)),F=Math.min(b,Math.max(f+1,F)),L=Math.max(c,Math.min(h-1,L)),z=Math.max(f,Math.min(b-1,z))):(N=Math.min(u,Math.max(l+1,N)),G=Math.min(g,Math.max(d+1,G)),O=Math.max(l,Math.min(u-1,O)),W=Math.max(d,Math.min(g-1,W)));let E=[[l,c,d,f],[N,A,G,F],[O,L,W,z],[u,h,g,b]];this.set("draw",(e=>{const t=this.series;t._fillGenerator.context(e),t._fillGenerator(E)}));let B=[[p,_],[I,j],[T,M],[m,y]];const V=this.series._strokeGenerator(B);V&&(this._svgPath.setAttribute("d",V),this._totalLength=this._svgPath.getTotalLength())}}}this.series&&this.dataItem&&this.series._positionBullets(this.dataItem)}getPoint(e){if(this._svgPath&&this._svgPath.getAttribute("d")){let t=this._svgPath.getPointAtLength(e*this._totalLength-.1),i=this._svgPath.getPointAtLength(e*this._totalLength+.1),n=this.toGlobal(this._svgPath.getPointAtLength(e*this._totalLength));return{x:n.x,y:n.y,angle:te.getAngle(t,i)}}return{x:0,y:0,angle:0}}_getTooltipPoint(){return this.toLocal(super._getTooltipPoint())}}Object.defineProperty(ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SankeyLink"}),Object.defineProperty(ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:se.classNames.concat([ge.className])});var fe=i(347),be=i(157),pe=i(391),me=i(390);function _e(e,t){let i=0;if(void 0===t)for(let n of e)(n=+n)&&(i+=n);else{let n=-1;for(let s of e)(s=+t(s,++n,e))&&(i+=s)}return i}function ye(e,t){let i;if(void 0===t)for(const n of e)null!=n&&(i<n||void 0===i&&n>=n)&&(i=n);else{let n=-1;for(let s of e)null!=(s=t(s,++n,e))&&(i<s||void 0===i&&s>=s)&&(i=s)}return i}function ke(e,t){let i;if(void 0===t)for(const n of e)null!=n&&(i>n||void 0===i&&n>=n)&&(i=n);else{let n=-1;for(let s of e)null!=(s=t(s,++n,e))&&(i>s||void 0===i&&s>=s)&&(i=s)}return i}function ve(e){return e.target.depth}function we(e){return e.depth}function xe(e,t){return t-1-e.height}function Pe(e,t){return e.sourceLinks.length?e.depth:t-1}function De(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?ke(e.sourceLinks,ve)-1:0}function Ne(e){return function(){return e}}function Ae(e,t){return Le(e.source,t.source)||e.index-t.index}function Oe(e,t){return Le(e.target,t.target)||e.index-t.index}function Le(e,t){return e.y0-t.y0}function Ie(e){return e.value}function je(e){return e.index}function Te(e){return e.nodes}function Me(e){return e.links}function Se(e,t){const i=e.get(t);if(!i)throw new Error("missing: "+t);return i}function Ce(e){let{nodes:t}=e;for(const i of t){let e=i.y0,t=e;for(const n of i.sourceLinks)n.y0=e+n.width/2,e+=n.width;for(const n of i.targetLinks)n.y1=t+n.width/2,t+=n.width}}function Re(){let e,t,i,n=0,s=0,a=1,r=1,o=24,l=8,c=je,u=Pe,h=Te,d=Me,g=6;function f(){const f={nodes:h.apply(null,arguments),links:d.apply(null,arguments)};return function(e){let{nodes:t,links:n}=e;for(const[i,a]of t.entries())a.index=i,a.sourceLinks=[],a.targetLinks=[];const s=new Map(t.map(((e,i)=>[c(e,i,t),e])));for(const[i,a]of n.entries()){a.index=i;let{source:e,target:t}=a;"object"!==typeof e&&(e=a.source=Se(s,e)),"object"!==typeof t&&(t=a.target=Se(s,t)),e.sourceLinks.push(a),t.targetLinks.push(a)}if(null!=i)for(const{sourceLinks:a,targetLinks:r}of t)a.sort(i),r.sort(i)}(f),function(e){let{nodes:t}=e;for(const i of t)i.value=void 0===i.fixedValue?Math.max(_e(i.sourceLinks,Ie),_e(i.targetLinks,Ie)):i.fixedValue}(f),function(e){let{nodes:t}=e;const i=t.length;let n=new Set(t),s=new Set,a=0;for(;n.size;){for(const e of n){e.depth=a;for(const{target:t}of e.sourceLinks)s.add(t)}if(++a>i)throw new Error("circular link");n=s,s=new Set}}(f),function(e){let{nodes:t}=e;const i=t.length;let n=new Set(t),s=new Set,a=0;for(;n.size;){for(const e of n){e.height=a;for(const{source:t}of e.targetLinks)s.add(t)}if(++a>i)throw new Error("circular link");n=s,s=new Set}}(f),function(i){const c=function(e){let{nodes:i}=e;const s=ye(i,(e=>e.depth))+1,r=(a-n-o)/(s-1),l=new Array(s);for(const t of i){const e=Math.max(0,Math.min(s-1,Math.floor(u.call(null,t,s))));t.layer=e,t.x0=n+e*r,t.x1=t.x0+o,l[e]?l[e].push(t):l[e]=[t]}if(t)for(const n of l)n.sort(t);return l}(i);e=Math.min(l,(r-s)/(ye(c,(e=>e.length))-1)),function(t){const i=ke(t,(t=>(r-s-(t.length-1)*e)/_e(t,Ie)));for(const n of t){let t=s;for(const s of n){s.y0=t,s.y1=t+s.value*i,t=s.y1+e;for(const e of s.sourceLinks)e.width=e.value*i}t=(r-t+e)/(n.length+1);for(let e=0;e<n.length;++e){const i=n[e];i.y0+=t*(e+1),i.y1+=t*(e+1)}v(n)}}(c);for(let e=0;e<g;++e){const t=Math.pow(.99,e),i=Math.max(1-t,(e+1)/g);p(c,t,i),b(c,t,i)}}(f),Ce(f),f}function b(e,i,n){for(let s=1,a=e.length;s<a;++s){const a=e[s];for(const e of a){let t=0,n=0;for(const{source:i,value:a}of e.targetLinks){let s=a*(e.layer-i.layer);t+=w(i,e)*s,n+=s}if(!(n>0))continue;let s=(t/n-e.y0)*i;e.y0+=s,e.y1+=s,k(e)}void 0===t&&a.sort(Le),m(a,n)}}function p(e,i,n){for(let s=e.length-2;s>=0;--s){const a=e[s];for(const e of a){let t=0,n=0;for(const{target:i,value:a}of e.sourceLinks){let s=a*(i.layer-e.layer);t+=x(e,i)*s,n+=s}if(!(n>0))continue;let s=(t/n-e.y0)*i;e.y0+=s,e.y1+=s,k(e)}void 0===t&&a.sort(Le),m(a,n)}}function m(t,i){const n=t.length>>1,a=t[n];y(t,a.y0-e,n-1,i),_(t,a.y1+e,n+1,i),y(t,r,t.length-1,i),_(t,s,0,i)}function _(t,i,n,s){for(;n<t.length;++n){const a=t[n],r=(i-a.y0)*s;r>1e-6&&(a.y0+=r,a.y1+=r),i=a.y1+e}}function y(t,i,n,s){for(;n>=0;--n){const a=t[n],r=(a.y1-i)*s;r>1e-6&&(a.y0-=r,a.y1-=r),i=a.y0-e}}function k(e){let{sourceLinks:t,targetLinks:n}=e;if(void 0===i){for(const{source:{sourceLinks:e}}of n)e.sort(Oe);for(const{target:{targetLinks:e}}of t)e.sort(Ae)}}function v(e){if(void 0===i)for(const{sourceLinks:t,targetLinks:i}of e)t.sort(Oe),i.sort(Ae)}function w(t,i){let n=t.y0-(t.sourceLinks.length-1)*e/2;for(const{target:s,width:a}of t.sourceLinks){if(s===i)break;n+=a+e}for(const{source:e,width:s}of i.targetLinks){if(e===t)break;n-=s}return n}function x(t,i){let n=i.y0-(i.targetLinks.length-1)*e/2;for(const{source:s,width:a}of i.targetLinks){if(s===t)break;n+=a+e}for(const{target:e,width:s}of t.sourceLinks){if(e===i)break;n-=s}return n}return f.update=function(e){return Ce(e),e},f.nodeId=function(e){return arguments.length?(c="function"===typeof e?e:Ne(e),f):c},f.nodeAlign=function(e){return arguments.length?(u="function"===typeof e?e:Ne(e),f):u},f.nodeSort=function(e){return arguments.length?(t=e,f):t},f.nodeWidth=function(e){return arguments.length?(o=+e,f):o},f.nodePadding=function(t){return arguments.length?(l=e=+t,f):l},f.nodes=function(e){return arguments.length?(h="function"===typeof e?e:Ne(e),f):h},f.links=function(e){return arguments.length?(d="function"===typeof e?e:Ne(e),f):d},f.linkSort=function(e){return arguments.length?(i=e,f):i},f.size=function(e){return arguments.length?(n=s=0,a=+e[0],r=+e[1],f):[a-n,r-s]},f.extent=function(e){return arguments.length?(n=+e[0][0],a=+e[1][0],s=+e[0][1],r=+e[1][1],f):[[n,s],[a,r]]},f.iterations=function(e){return arguments.length?(g=+e,f):g},f}var Ge=Math.PI,Fe=2*Ge,We=1e-6,ze=Fe-We;function Ee(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Be(){return new Ee}Ee.prototype=Be.prototype={constructor:Ee,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,i,n){this._+="Q"+ +e+","+ +t+","+(this._x1=+i)+","+(this._y1=+n)},bezierCurveTo:function(e,t,i,n,s,a){this._+="C"+ +e+","+ +t+","+ +i+","+ +n+","+(this._x1=+s)+","+(this._y1=+a)},arcTo:function(e,t,i,n,s){e=+e,t=+t,i=+i,n=+n,s=+s;var a=this._x1,r=this._y1,o=i-e,l=n-t,c=a-e,u=r-t,h=c*c+u*u;if(s<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>We)if(Math.abs(u*o-l*c)>We&&s){var d=i-a,g=n-r,f=o*o+l*l,b=d*d+g*g,p=Math.sqrt(f),m=Math.sqrt(h),_=s*Math.tan((Ge-Math.acos((f+h-b)/(2*p*m)))/2),y=_/m,k=_/p;Math.abs(y-1)>We&&(this._+="L"+(e+y*c)+","+(t+y*u)),this._+="A"+s+","+s+",0,0,"+ +(u*d>c*g)+","+(this._x1=e+k*o)+","+(this._y1=t+k*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,i,n,s,a){e=+e,t=+t,a=!!a;var r=(i=+i)*Math.cos(n),o=i*Math.sin(n),l=e+r,c=t+o,u=1^a,h=a?n-s:s-n;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>We||Math.abs(this._y1-c)>We)&&(this._+="L"+l+","+c),i&&(h<0&&(h=h%Fe+Fe),h>ze?this._+="A"+i+","+i+",0,1,"+u+","+(e-r)+","+(t-o)+"A"+i+","+i+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>We&&(this._+="A"+i+","+i+",0,"+ +(h>=Ge)+","+u+","+(this._x1=e+i*Math.cos(s))+","+(this._y1=t+i*Math.sin(s))))},rect:function(e,t,i,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +i+"v"+ +n+"h"+-i+"Z"},toString:function(){return this._}};Array.prototype.slice;class Ve extends b{constructor(){super(...arguments),Object.defineProperty(this,"links",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>ge._new(this._root,{themeTags:["link","shape"]},[this.links.template]))))}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(de.new(this._root,{}))}),Object.defineProperty(this,"_d3Sankey",{enumerable:!0,configurable:!0,writable:!0,value:Re()}),Object.defineProperty(this,"_d3Graph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillGenerator",{enumerable:!0,configurable:!0,writable:!0,value:Object(fe.a)()}),Object.defineProperty(this,"_strokeGenerator",{enumerable:!0,configurable:!0,writable:!0,value:Object(be.a)()})}_afterNew(){this._settings.themeTags=re.mergeTags(this._settings.themeTags,["sankey",this._settings.orientation||"horizontal"]),this._fillGenerator.y0((function(e){return e[3]})),this._fillGenerator.x0((function(e){return e[2]})),this._fillGenerator.y1((function(e){return e[1]})),this._fillGenerator.x1((function(e){return e[0]})),super._afterNew()}makeLink(e){const t=e.get("source"),i=e.get("target"),n=this.links.make();return t.get("unknown")&&(n.addTag("source"),n.addTag("unknown")),i.get("unknown")&&(n.addTag("target"),n.addTag("unknown")),this.linksContainer.children.push(n),n._setDataItem(e),n.set("source",t),n.set("target",i),n.series=this,this.links.push(n),n}updateSankey(){const e=this._d3Graph;e&&(this._d3Sankey.update(e),l.each(this.dataItems,(e=>{const t=e.get("link");t.setPrivate("orientation",this.get("orientation")),t.markDirty()})))}_updateLinkColor(e){super._updateLinkColor(e);const t=this.get("orientation"),i=e.get("link")._fillGradient,n=e.get("link")._strokeGradient;"vertical"==t?(i&&i.set("rotation",90),n&&n.set("rotation",90)):(i&&i.set("rotation",0),n&&n.set("rotation",0))}_getBulletLocation(e){return"vertical"==this.get("orientation")?e.get("locationY",0):e.get("locationX",0)}_prepareChildren(){super._prepareChildren();let e=!1;if("vertical"==this.get("orientation")&&(e=!0),this.isDirty("orientation")||this.isDirty("linkTension")){const t=this.get("linkTension",.5);e?(this._fillGenerator.curve(Object(me.a)(t)),this._strokeGenerator.curve(Object(me.a)(t))):(this._fillGenerator.curve(Object(pe.a)(t)),this._strokeGenerator.curve(Object(pe.a)(t)))}if((this._valuesDirty||this._sizeDirty||this.isDirty("nodePadding")||this.isDirty("nodeWidth")||this.isDirty("nodeAlign")||this.isDirty("nodeSort")||this.isDirty("orientation")||this.isDirty("linkTension")||this.isDirty("linkSort"))&&this._nodesData.length>0){const t=this._d3Sankey;let i=this.innerWidth(),n=this.innerHeight();switch(e&&([i,n]=[n,i]),t.size([i,n]),t.nodePadding(this.get("nodePadding",10)),t.nodeWidth(this.get("nodeWidth",10)),t.nodeSort(this.get("nodeSort",null)),t.linkSort(this.get("linkSort")),this.get("nodeAlign")){case"right":t.nodeAlign(xe);break;case"justify":t.nodeAlign(Pe);break;case"center":t.nodeAlign(De);break;default:t.nodeAlign(we)}this._d3Graph=t({nodes:this._nodesData,links:this._linksData}),l.each(this.dataItems,(e=>{const t=e.get("link");t.setPrivate("orientation",this.get("orientation")),t.markDirty()}));const s=this._d3Graph;if(s){const t=s.nodes;l.each(t,(t=>{const i=t.dataItem,n=i.get("node");let s,a,r,o;if(e?(s=t.y0,a=t.y1,r=t.x0,o=t.x1):(s=t.x0,a=t.x1,r=t.y0,o=t.y1),f.isNumber(s)&&f.isNumber(a)&&f.isNumber(r)&&f.isNumber(o)){n.setAll({x:s,y:r,width:a-s,height:o-r});i.get("rectangle").setAll({width:a-s,height:o-r})}}))}}}}Object.defineProperty(Ve,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sankey"}),Object.defineProperty(Ve,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([Ve.className])});var Ye=i(163);class Xe extends U{constructor(){super(...arguments),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>J.a._new(this._root,{},[this.labels.template]))))}),Object.defineProperty(this,"flow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dAngle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"circles",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>Ye.a._new(this._root,{themeTags:["shape"]},[this.circles.template]))))})}makeNode(e){const t=super.makeNode(e,"ArcDiagram"),i=t.children.insertIndex(0,this.circles.make());e.set("circle",i),i._setSoft("fill",e.get("fill")),i._setSoft("fillPattern",e.get("fillPattern"));const n=this.labels.make();return this.labels.push(n),n.addTag("flow"),n.addTag("arcdiagram"),n.addTag("node"),t.children.push(n),e.set("label",n),n._setDataItem(e),i._setDataItem(e),t}disposeDataItem(e){super.disposeDataItem(e);let t=e.get("circle");t&&(this.circles.removeValue(t),t.dispose())}_updateNodeColor(e){const t=e.get("circle");t&&(t.set("fill",e.get("fill")),t.set("fillPattern",e.get("fillPattern")))}}Object.defineProperty(Xe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ArcDiagramNodes"}),Object.defineProperty(Xe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:U.classNames.concat([Xe.className])});class qe extends se{constructor(){super(...arguments),Object.defineProperty(this,"_p0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_p1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_radius",{enumerable:!0,configurable:!0,writable:!0,value:0})}_beforeChanged(){if(super._beforeChanged(),this.isDirty("source")){const e=this.get("source");if(e){const t=e.get("node");this._disposers.push(t.events.on("positionchanged",(()=>{this._markDirtyKey("stroke")})))}}if(this.isDirty("target")){const e=this.get("target");if(e){const t=e.get("node");this._disposers.push(t.events.on("positionchanged",(()=>{this._markDirtyKey("stroke")})))}}if(this.isPrivateDirty("orientation")){const e=this.series,t=this.dataItem;t&&e&&e._updateLinkColor(t)}this.series&&this.dataItem&&this.series._positionBullets(this.dataItem),"gradient"==this.get("strokeStyle")?this.set("isMeasured",!0):this.set("isMeasured",!1)}_changed(){super._changed(),this._clear&&this._draw()}_draw(){const e=this.get("target"),t=this.get("source");if(t&&e){let i=t.get("node"),n=e.get("node");const s=i.x(),a=i.y(),r=n.x(),o=n.y();this._p0={x:s,y:a},this._p1={x:r,y:o};let l=0;if("vertical"==this.getPrivate("orientation")){l=(o-a)/2;let e=1;a>o&&(e=-1),this._display.arc(s,a+l,l*e,-Math.PI/2,Math.PI/2)}else{l=(r-s)/2;let e=1;s>r&&(e=-1),this._display.arc(s+l,a,l*e,-Math.PI,0)}this._radius=l}}getPoint(e){if(this._p0&&this._p1){const t=this._radius;if("vertical"==this.getPrivate("orientation")){let i=180*e-90;return{y:this._p0.y+t+t*te.sin(i),x:t*te.cos(i),angle:i+90}}{let i=180+180*e;return{x:this._p0.x+t+t*te.cos(i),y:t*te.sin(i),angle:i+90}}}return{x:0,y:0,angle:0}}}Object.defineProperty(qe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ArcDiagramLink"}),Object.defineProperty(qe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:se.classNames.concat([qe.className])});class He extends b{constructor(){super(...arguments),Object.defineProperty(this,"links",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Q.c(K.a.new({}),(()=>qe._new(this._root,{themeTags:["link","shape"]},[this.links.template]))))}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Xe.new(this._root,{}))})}_afterNew(){this._settings.themeTags=re.mergeTags(this._settings.themeTags,["arcdiagram",this._settings.orientation||"horizontal"]),super._afterNew(),this.nodes.children.push(this.bulletsContainer)}makeLink(e){const t=this.nodes.children.moveValue(this.links.make(),0);return this.links.push(t),t._setDataItem(e),t.set("source",e.get("source")),t.set("target",e.get("target")),t.series=this,t}_prepareChildren(){if(super._prepareChildren(),this._valuesDirty||this._sizeDirty||this.isDirty("orientation")){let e=1;const t=this.get("orientation");l.each(this.dataItems,(e=>{e.get("link").setPrivate("orientation",this.get("orientation"))})),e="vertical"==t?this.innerHeight():this.innerWidth();let i=0,n=1/0,s=this.get("radiusKey");"none"!=s&&l.each(this.nodes.dataItems,(e=>{let t=e.get(s+"Working");i+=t,n=Math.min(n,t)}));const a=this.nodes.dataItems.length,r=this.get("nodePadding",10),o=this.get("minRadius",5);e-=a*(r+2*o),e<=0&&(e=0);let c=e/(i-a*n),u=0;const h=this.get("animationDuration",0),d=this.get("animationEasing");l.each(this.nodes.dataItems,(i=>{let l=i.get(s+"Working");const g=i.get("node");let f=o+c*(l-n)/2;if("none"==s&&(f=o+e/a/2),"vertical"==t){g.set("x",0);const e=u+r+f;0==g.y()?g.set("y",e):g.animate({key:"y",to:e,duration:h,easing:d})}else{g.set("y",0);const e=u+r+f;0==g.x()?g.set("x",e):g.animate({key:"x",to:e,duration:h,easing:d})}u=u+r+2*f,i.get("circle").set("radius",f)}))}}_updateLinkColor(e){super._updateLinkColor(e);const t=this.get("orientation"),i=e.get("link")._fillGradient,n=e.get("link")._strokeGradient;"vertical"==t?(i&&i.set("rotation",90),n&&n.set("rotation",90)):(i&&i.set("rotation",0),n&&n.set("rotation",0))}}Object.defineProperty(He,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ArcDiagram"}),Object.defineProperty(He,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([He.className])})}}]);
//# sourceMappingURL=11.55c13c6b.chunk.js.map