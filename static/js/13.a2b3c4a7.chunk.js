(this.webpackJsonptriple7=this.webpackJsonptriple7||[]).push([[13],{358:function(e,t,i){"use strict";i.r(t),i.d(t,"StockChart",(function(){return a.a})),i.d(t,"registerClass",(function(){return a.b})),i.d(t,"StockLegend",(function(){return s.a})),i.d(t,"StockPanel",(function(){return n.a})),i.d(t,"PanelControls",(function(){return r.a})),i.d(t,"SettingsModal",(function(){return o.a})),i.d(t,"Indicator",(function(){return l.a})),i.d(t,"OverboughtOversold",(function(){return C})),i.d(t,"ChartIndicator",(function(){return b})),i.d(t,"MovingAverage",(function(){return P})),i.d(t,"Momentum",(function(){return S})),i.d(t,"VWAP",(function(){return A})),i.d(t,"MovingAverageEnvelope",(function(){return I})),i.d(t,"MovingAverageDeviation",(function(){return O})),i.d(t,"AccelerationBands",(function(){return M})),i.d(t,"BollingerBands",(function(){return j})),i.d(t,"RelativeStrengthIndex",(function(){return F})),i.d(t,"AccumulationDistribution",(function(){return E})),i.d(t,"AccumulativeSwingIndex",(function(){return Y})),i.d(t,"Aroon",(function(){return X})),i.d(t,"MACD",(function(){return L})),i.d(t,"MACross",(function(){return V})),i.d(t,"ChaikinMoneyFlow",(function(){return R})),i.d(t,"ChaikinOscillator",(function(){return B})),i.d(t,"BullBearPower",(function(){return H})),i.d(t,"OnBalanceVolume",(function(){return z})),i.d(t,"PVT",(function(){return W})),i.d(t,"StochasticOscillator",(function(){return $})),i.d(t,"StochasticMomentumIndex",(function(){return U})),i.d(t,"AwesomeOscillator",(function(){return J})),i.d(t,"WilliamsR",(function(){return K})),i.d(t,"Volume",(function(){return q})),i.d(t,"VolumeProfile",(function(){return Z})),i.d(t,"CommodityChannelIndex",(function(){return Q})),i.d(t,"DisparityIndex",(function(){return ee})),i.d(t,"StandardDeviation",(function(){return te})),i.d(t,"TypicalPrice",(function(){return ie})),i.d(t,"Trix",(function(){return ae})),i.d(t,"MedianPrice",(function(){return se})),i.d(t,"ZigZag",(function(){return ne})),i.d(t,"AverageTrueRange",(function(){return re})),i.d(t,"DrawingSeries",(function(){return me})),i.d(t,"PolylineSeries",(function(){return be})),i.d(t,"RectangleSeries",(function(){return _e})),i.d(t,"ParallelChannelSeries",(function(){return ye})),i.d(t,"SimpleLineSeries",(function(){return ve})),i.d(t,"LineArrowSeries",(function(){return xe})),i.d(t,"HorizontalLineSeries",(function(){return ke})),i.d(t,"VerticalLineSeries",(function(){return Ce})),i.d(t,"AverageSeries",(function(){return De})),i.d(t,"RegressionSeries",(function(){return Ae})),i.d(t,"DoodleSeries",(function(){return Ie})),i.d(t,"IconSeries",(function(){return Te})),i.d(t,"LabelSeries",(function(){return Oe})),i.d(t,"CalloutSeries",(function(){return Fe})),i.d(t,"EllipseSeries",(function(){return Ye})),i.d(t,"TrendLineSeries",(function(){return Xe})),i.d(t,"QuadrantLineSeries",(function(){return Le})),i.d(t,"FibonacciSeries",(function(){return Re})),i.d(t,"FibonacciTimezoneSeries",(function(){return Be})),i.d(t,"HorizontalRaySeries",(function(){return He})),i.d(t,"Measure",(function(){return $e})),i.d(t,"StockToolbar",(function(){return qe})),i.d(t,"StockControl",(function(){return Ge.a})),i.d(t,"DrawingToolControl",(function(){return tt})),i.d(t,"DropdownColors",(function(){return it.a})),i.d(t,"Dropdown",(function(){return Ze.a})),i.d(t,"DropdownList",(function(){return Qe})),i.d(t,"DropdownListControl",(function(){return at})),i.d(t,"DropdownControl",(function(){return st})),i.d(t,"DrawingControl",(function(){return ct})),i.d(t,"IndicatorControl",(function(){return ht})),i.d(t,"StockIcons",(function(){return et.a})),i.d(t,"DateRangeSelector",(function(){return Bt})),i.d(t,"PeriodSelector",(function(){return zt})),i.d(t,"IconControl",(function(){return rt})),i.d(t,"SeriesTypeControl",(function(){return Wt})),i.d(t,"IntervalControl",(function(){return $t})),i.d(t,"ResetControl",(function(){return Ut})),i.d(t,"SettingsControl",(function(){return Kt})),i.d(t,"DataSaveControl",(function(){return Jt})),i.d(t,"ComparisonControl",(function(){return qt})),i.d(t,"ColorControl",(function(){return nt.a}));var a=i(357),s=i(356),n=i(353),r=i(176),o=i(174),l=i(160),c=i(25),h=i(350),d=i(141),u=i(355),g=i(136),p=i(349),m=i(354),f=i(67);class b extends l.a{constructor(){super(...arguments),Object.defineProperty(this,"panel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"xAxis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"yAxis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"legend",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_themeTag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_themeTags",{enumerable:!0,configurable:!0,writable:!0,value:["indicator"]})}_afterNew(){var e;super._afterNew();const t=this.get("stockChart"),i=this.get("stockSeries"),a=i.chart,r=this._root;if(t&&a){const a=t.panels.push(n.a.new(r,{themeTags:this._themeTags}));a.addTag("indicator"),this.panel=a,this.addDisposer(t.panels.events.on("removeIndex",(e=>{e.oldValue==a&&t.indicators.removeValue(this)})));const o=i.get("xAxis"),l=p.a.new(r,{});let c,b=o.get("baseInterval"),v=o.get("start"),_=o.get("end");c=o instanceof u.a?a.xAxes.push(u.a.new(r,{renderer:l,baseInterval:b})):a.xAxes.push(d.a.new(r,{renderer:l,baseInterval:b})),l.set("minorGridEnabled",null===(e=o.get("renderer"))||void 0===e?void 0:e.get("minorGridEnabled")),c.set("groupData",o.get("groupData")),c.set("groupCount",o.get("groupCount")),c.set("tooltip",f.a.new(r,{forceHidden:!0})),c.setAll({start:v,end:_}),this.xAxis=c;const y=m.a.new(r,{minGridDistance:20}),w=a.yAxes.push(g.a.new(r,{renderer:y,tooltip:f.a.new(r,{forceHidden:!0})}));this.yAxis=w;const x=this._createSeries();this.series=x;const k=a.topPlotContainer.children.insertIndex(0,s.a.new(r,{stockChart:this.get("stockChart")}));k.data.push(x);const C=k.dataItems[k.dataItems.length-1];C.set("panel",a),C.get("marker").set("forceHidden",!0);const D=C.get("settingsButton");D.setPrivate("customData",this);const P=this._editableSettings;P&&0!=P.length||D.set("forceHidden",!0),a.set("cursor",h.a.new(r,{yAxis:w,xAxis:c}))}}_dispose(){super._dispose();this.get("stockChart").panels.removeValue(this.panel)}hide(e){const t=Object.create(null,{hide:{get:()=>super.hide}});return Object(c.a)(this,void 0,void 0,(function*(){return Promise.all([t.hide.call(this,e),this.panel.hide(e)])}))}show(e){const t=Object.create(null,{show:{get:()=>super.show}});return Object(c.a)(this,void 0,void 0,(function*(){return Promise.all([t.show.call(this,e),this.panel.show(e)])}))}}Object.defineProperty(b,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChartIndicator"}),Object.defineProperty(b,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.a.classNames.concat([b.className])});var v=i(108),_=i(43),y=i(17),w=i(352),x=i(9),k=i(4);class C extends b{constructor(){super(...arguments),Object.defineProperty(this,"overBought",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"overSold",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"overSoldRange",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"overBoughtRange",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"overBought",name:this.root.language.translateAny("Overbought"),type:"number"},{key:"overBoughtColor",name:this.root.language.translateAny("Overbought"),type:"color"},{key:"overSold",name:this.root.language.translateAny("Oversold"),type:"number"},{key:"overSoldColor",name:this.root.language.translateAny("Oversold"),type:"color"}]})}_afterNew(){this._themeTags.push("overboughtoversold"),super._afterNew();const e=this.panel,t=this.yAxis;t.setAll({strictMinMax:!0,autoZoom:!1}),this.middle=this.yAxis.createAxisRange(this.yAxis.makeDataItem({}));const i=this.middle.get("grid");i.setAll({themeTags:["middlegrid"]}),i._applyThemes();this.middle.get("label").setAll({visible:!0,forceHidden:!1});let a="left";t.get("renderer").get("opposite")&&(a="right");const s=t.makeDataItem({});this.overBought=s,s.set("endValue",500);const n=_.a.new(this._root,{themeTags:["rangegrip","vertical",a],icon:y.a.new(this._root,{themeTags:["rangegrip","icon"]})});n.adapters.add("x",(function(){return 0})),n.adapters.add("y",(function(t){return k.isNumber(t)?x.fitToRange(t,0,e.plotContainer.height()):t})),n.events.on("dragged",(()=>{this._updateRange(n,"overBought")})),s.set("bullet",w.a.new(this._root,{location:0,sprite:n}));const r=this.series.createAxisRange(s);this.overBoughtRange=r;const o=r.fills;o&&o.template.set("themeTags",["overbought","fill"]);const l=s.get("grid");l.setAll({themeTags:["overbought"],visible:!0}),l._applyThemes();s.get("label").setAll({visible:!0,forceHidden:!1,location:0});const c=t.makeDataItem({});this.overSold=c,c.set("endValue",-500);const h=_.a.new(this._root,{themeTags:["rangegrip","vertical",a],icon:y.a.new(this._root,{themeTags:["rangegrip","icon"]})});h.adapters.add("x",(function(){return 0})),h.adapters.add("y",(function(t){return k.isNumber(t)?x.fitToRange(t,0,e.plotContainer.height()):t})),h.events.on("dragged",(()=>{this._updateRange(h,"overSold")})),c.set("bullet",w.a.new(this._root,{location:0,sprite:h}));const d=this.series.createAxisRange(c);this.overSoldRange=d;const u=d.fills;u&&u.template.set("themeTags",["oversold","fill"]);const g=c.get("grid");g.setAll({themeTags:["oversold"],visible:!0}),g._applyThemes();c.get("label").setAll({visible:!0,forceHidden:!1,location:0})}_updateRange(e,t){const i=this.yAxis.chart;if(i){const a=this.yAxis.toAxisPosition(e.y()/i.plotContainer.height());this.set(t,Math.round(this.yAxis.positionToValue(a)))}}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"valueS",stroke:this.get("seriesColor"),fill:void 0}))}_prepareChildren(){super._prepareChildren();const e=this.overBought.get("label"),t=this.overSold.get("label"),i=this.middle.get("label");if(this.isDirty("overBought")||this.isDirty("overSold")){const a=this.getNumberFormatter(),s=this.get("overSold",0),n=this.get("overBought",0),r=s+(n-s)/2;e.set("text",a.format(n)),t.set("text",a.format(s)),i.set("text",a.format(r)),this.overBought.set("value",n),this.overSold.set("value",s),this.middle.set("value",r),this.yAxis.set("baseValue",r)}if(this.isDirty("overSoldColor")){const e=this.get("overSoldColor");t.set("fill",e),this.overSold.get("grid").set("stroke",e),this.overSoldRange.fills.template.set("fill",e),this.overSoldRange.strokes.template.set("stroke",e)}if(this.isDirty("overBoughtColor")){const t=this.get("overBoughtColor");e.set("fill",t),this.overBought.get("grid").set("stroke",t),this.overBoughtRange.fills.template.set("fill",t),this.overBoughtRange.strokes.template.set("stroke",t)}}}Object.defineProperty(C,"className",{enumerable:!0,configurable:!0,writable:!0,value:"OverboughtOversold"}),Object.defineProperty(C,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([C.className])});var D=i(2);class P extends l.a{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"offset",name:this.root.language.translateAny("Offset"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"},{key:"field",name:this.root.language.translateAny("Field"),type:"dropdown",options:["open","close","low","high","hl/2","hlc/3","hlcc/4","ohlc/4"]},{key:"type",name:this.root.language.translateAny("Type"),type:"dropdown",options:["simple","weighted","exponential","dema","tema"]}]})}_prepareChildren(){(this.isDirty("type")||this.isDirty("offset"))&&(this.markDataDirty(),this.setCustomData("type",this.get("type")),this.setCustomData("offset",this.get("offset",0))),super._prepareChildren()}_afterNew(){super._afterNew();const e=this.get("stockSeries"),t=e.chart;if(t){const i=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"ma",groupDataDisabled:!0,calculateAggregates:!0,xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),themeTags:["indicator","movingaverage"],name:"MA"}));i.setPrivate("baseValueSeries",e),this.series=i,this._handleLegend(i)}}prepareData(){if(this.series){let e=this.get("period",50);const t=this.get("type"),i=this.get("stockSeries").dataItems;let a=this._getDataArray(i);switch(t){case"simple":this._sma(a,e,"value_y","ma");break;case"weighted":this._wma(a,e,"value_y","ma");break;case"exponential":this._ema(a,e,"value_y","ma");break;case"dema":this._dema(a,e,"value_y","ma");break;case"tema":this._tema(a,e,"value_y","ma")}const s=this.get("offset",0);if(0!=s){let e=0;const t=this.series.get("xAxis").baseDuration(),n=i.length,r=i[0].get("valueX",0),o=i[n-1].get("valueX",0);D.each(a,(a=>{let l=0;l=e+s>=n?o+(s-n+e+1)*t:e+s<0?r+(e+s)*t:i[e+s].get("valueX",0),a.valueX=l,e++}))}this.series.data.setAll(a)}}}Object.defineProperty(P,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MovingAverage"}),Object.defineProperty(P,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.a.classNames.concat([P.className])});class S extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"field",name:this.root.language.translateAny("Field"),type:"dropdown",options:["open","close","low","high","hl/2","hlc/3","hlcc/4","ohlc/4"]},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"}]})}_afterNew(){this._themeTags.push("momentum"),super._afterNew()}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"valueY",stroke:this.get("seriesColor"),fill:void 0}))}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems,t=this.get("period",14),i=[];let a=0;D.each(e,(s=>{if(a>t){let n=this._getValue(s),r=this._getValue(e[a-t]);void 0!=n&&void 0!=r&&i.push({valueX:s.get("valueX"),valueY:n-r})}else i.push({valueX:s.get("valueX")});a++})),this.series.data.setAll(i)}}}Object.defineProperty(S,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Momentum"}),Object.defineProperty(S,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([S.className])});class A extends l.a{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"},{key:"field",name:this.root.language.translateAny("Field"),type:"dropdown",options:["open","close","low","high","hl/2","hlc/3","hlcc/4","ohlc/4"]}]})}_afterNew(){super._afterNew();const e=this.get("stockSeries"),t=e.chart;if(t){const i=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"vwap",groupDataDisabled:!0,calculateAggregates:!0,xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),themeTags:["indicator","vwap"],name:"VWAP"}));i.setPrivate("baseValueSeries",e),this.series=i,this._handleLegend(i)}}prepareData(){if(this.series){let e=this.get("period",1/0);const t=this.get("stockSeries"),i=this.get("volumeSeries"),a=t.dataItems;if(i){let t=this._getDataArray(a),s=0,n=0,r=0;D.each(t,(a=>{const o=i.dataItems[s];if(o){const i=o.get("valueY",0);if(i>0){const o=a.value_y*i;if(a.vw=o,a.volume=i,r+=o,n+=i,s>=e){let i=t[s-e].volume,a=t[s-e].vw;null!=i&&(n-=i),null!=a&&(r-=a)}a.totalVW=r,a.vwap=r/n}}s++})),this.series.data.setAll(t)}}}}Object.defineProperty(A,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VWAP"}),Object.defineProperty(A,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.a.classNames.concat([A.className])});class I extends P{constructor(){super(...arguments),Object.defineProperty(this,"upperBandSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowerBandSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"type",name:this.root.language.translateAny("Type"),type:"dropdown",options:["simple","weighted","exponential","dema","tema"]},{key:"field",name:this.root.language.translateAny("Field"),type:"dropdown",options:["open","close","low","high","hl/2","hlc/3","hlcc/4","ohlc/4"]},{key:"shiftType",name:this.root.language.translateAny("Shift type"),type:"dropdown",options:["percent","points"]},{key:"shift",name:this.root.language.translateAny("Shift"),type:"number"},{key:"offset",name:this.root.language.translateAny("Offset"),type:"number"},{key:"upperColor",name:this.root.language.translateAny("Top"),type:"color"},{key:"seriesColor",name:this.root.language.translateAny("Median"),type:"color"},{key:"lowerColor",name:this.root.language.translateAny("Bottom"),type:"color"}]})}_afterNew(){const e=this.get("stockSeries"),t=e.chart;if(t){const i=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"upper",openValueYField:"lower",xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),groupDataDisabled:!0,calculateAggregates:!0,themeTags:["indicator","movingaverageenvelope","upper"]}));i.fills.template.set("visible",!0),i.setPrivate("baseValueSeries",e),this.upperBandSeries=i;const a=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"lower",xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),groupDataDisabled:!0,calculateAggregates:!0,themeTags:["indicator","movingaverageenvelope","lower"]}));a.setPrivate("baseValueSeries",e),this.lowerBandSeries=a}super._afterNew(),this.series.addTag("movingaverageenvelope"),this.series._applyThemes()}_updateChildren(){if(super._updateChildren(),this.isDirty("upperColor")){const e=this.get("upperColor"),t=this.upperBandSeries;t.set("stroke",e),t.set("fill",e),t.strokes.template.set("stroke",e),this._updateSeriesColor(t,e,"upperColor")}if(this.isDirty("lowerColor")){const e=this.get("lowerColor"),t=this.lowerBandSeries;t.set("stroke",e),t.strokes.template.set("stroke",e),this._updateSeriesColor(t,e,"lowerColor")}}_prepareChildren(){(this.isDirty("shiftType")||this.isDirty("shift"))&&(this.markDataDirty(),this.setCustomData("shift",this.get("shift")),this.setCustomData("shiftType",this.get("shiftType"))),super._prepareChildren()}prepareData(){if(super.prepareData(),this.series){let e=this.series.data.values,t=Number(this.get("shift",5)),i=this.get("shiftType");D.each(e,(e=>{let a=e.ma;if(null!=a){let s=a,n=a;"points"==i?(s+=t,n-=t):(s+=s*t/100,n-=n*t/100),e.upper=s,e.lower=n}})),this.upperBandSeries.data.setAll(e),this.lowerBandSeries.data.setAll(e)}}_dispose(){this.upperBandSeries.dispose(),this.lowerBandSeries.dispose(),super._dispose()}hide(e){const t=Object.create(null,{hide:{get:()=>super.hide}});return Object(c.a)(this,void 0,void 0,(function*(){return Promise.all([t.hide.call(this,e),this.upperBandSeries.hide(e),this.lowerBandSeries.hide(e)])}))}show(e){const t=Object.create(null,{show:{get:()=>super.show}});return Object(c.a)(this,void 0,void 0,(function*(){return Promise.all([t.show.call(this,e),this.upperBandSeries.show(e),this.lowerBandSeries.show(e)])}))}}Object.defineProperty(I,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MovingAverageEnvelope"}),Object.defineProperty(I,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:P.classNames.concat([I.className])});var T=i(6),N=i(135);class O extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"field",name:this.root.language.translateAny("Field"),type:"dropdown",options:["open","close","low","high","hl/2","hlc/3","hlcc/4","ohlc/4"]},{key:"type",name:this.root.language.translateAny("Type"),type:"dropdown",options:["simple","weighted","exponential","dema","tema"]},{key:"unit",name:this.root.language.translateAny("Points/Percent"),type:"dropdown",options:["points","percent"]},{key:"increasingColor",name:this.root.language.translateAny("Increasing"),type:"color"},{key:"decreasingColor",name:this.root.language.translateAny("Decreasing"),type:"color"}]})}_afterNew(){this._themeTags.push("movingaveragedeviation"),super._afterNew()}_createSeries(){return this.panel.series.push(N.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"deviation",fill:void 0}))}_updateChildren(){if(super._updateChildren(),this.isDirty("increasingColor")||this.isDirty("decreasingColor")){const e=this.series.columns.template,t=this.get("increasingColor"),i=this.get("decreasingColor");e.states.create("riseFromPrevious",{fill:t,stroke:t}),e.states.create("dropFromPrevious",{fill:i,stroke:i})}}_prepareChildren(){(this.isDirty("type")||this.isDirty("unit"))&&this.markDataDirty(),super._prepareChildren()}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems;let t=this.get("decreasingColor",T.a.fromHex(16711680)).toCSSHex(),i=this.get("increasingColor",T.a.fromHex(65280)).toCSSHex(),a=this._getDataArray(e),s=this.get("period",50);const n=this.get("type"),r=this.get("unit");switch(n){case"simple":this._sma(a,s,"value_y","ma");break;case"weighted":this._wma(a,s,"value_y","ma");break;case"exponential":this._ema(a,s,"value_y","ma");break;case"dema":this._dema(a,s,"value_y","ma");break;case"tema":this._tema(a,s,"value_y","ma")}let o=-1/0,l=0;D.each(a,(e=>{if(l++,l>=s){let a=e.value_y-e.ma;"percent"==r&&(a=100*(e.value_y/e.ma-1));let s=i;a<o&&(s=t),e.deviation=a,e.deviationColor=s,o=a}})),this.series.data.setAll(a)}}}Object.defineProperty(O,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MovingAverageDeviation"}),Object.defineProperty(O,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([O.className])});class M extends l.a{constructor(){super(...arguments),Object.defineProperty(this,"upperBandSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowerBandSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"factor",name:this.root.language.translateAny("Factor"),type:"number"},{key:"upperColor",name:this.root.language.translateAny("Upper"),type:"color"},{key:"seriesColor",name:this.root.language.translateAny("Average"),type:"color"},{key:"lowerColor",name:this.root.language.translateAny("Lower"),type:"color"}]})}_afterNew(){const e=this.get("stockSeries"),t=e.chart;if(t){const i=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"average",groupDataDisabled:!0,calculateAggregates:!0,xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),themeTags:["indicator","accelerationbands","average"]}));i.setPrivate("baseValueSeries",e),this.series=i;const a=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"upper",openValueYField:"lower",calculateAggregates:!0,xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),groupDataDisabled:!0,themeTags:["indicator","accelerationbands","upper"]}));a.setPrivate("baseValueSeries",e),this.upperBandSeries=a;const s=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"lower",calculateAggregates:!0,xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),groupDataDisabled:!0,themeTags:["indicator","accelerationbands","lower"]}));s.setPrivate("baseValueSeries",e),this.lowerBandSeries=s}this._handleLegend(this.series),super._afterNew(),this.series.addTag("accelerationbands"),this.series._applyThemes()}_prepareChildren(){this.isDirty("factor")&&(this.markDataDirty(),this.setCustomData("factor",this.get("factor"))),super._prepareChildren()}_updateChildren(){super._updateChildren();const e="upperColor";if(this.isDirty(e)){const t=this.get(e),i=this.upperBandSeries;i.set("stroke",t),i.set("fill",t),i.strokes.template.set("stroke",t),this._updateSeriesColor(i,t,e)}const t="lowerColor";if(this.isDirty(t)){const e=this.get(t),i=this.lowerBandSeries;i.set("stroke",e),i.strokes.template.set("stroke",e),this._updateSeriesColor(i,e,t)}}prepareData(){if(super.prepareData(),this.series){let e=this.get("period",20);const t=this.get("stockSeries").dataItems;let i=this._getDataArray(t),a=this.get("factor",.001),s=0;D.each(i,(e=>{let i=t[s];if(i){let t=i.get("lowValueY"),s=i.get("highValueY");k.isNumber(t)&&k.isNumber(s)&&s+t!=0&&(e._lower=s*(1+(s-t)/((s+t)/2)*1e3*a*2),e._upper=t*(1-(s-t)/((s+t)/2)*1e3*a*2),e._average=e._lower+(e._upper-e._lower)/2)}s++})),this._sma(i,e,"_lower","lower"),this._sma(i,e,"_upper","upper"),this._sma(i,e,"_average","average"),this.upperBandSeries.data.setAll(i),this.lowerBandSeries.data.setAll(i),this.series.data.setAll(i)}}_dispose(){this.upperBandSeries.dispose(),this.lowerBandSeries.dispose(),super._dispose()}hide(e){const t=Object.create(null,{hide:{get:()=>super.hide}});return Object(c.a)(this,void 0,void 0,(function*(){return Promise.all([t.hide.call(this,e),this.upperBandSeries.hide(e),this.lowerBandSeries.hide(e)])}))}show(e){const t=Object.create(null,{show:{get:()=>super.show}});return Object(c.a)(this,void 0,void 0,(function*(){return Promise.all([t.show.call(this,e),this.upperBandSeries.show(e),this.lowerBandSeries.show(e)])}))}}Object.defineProperty(M,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AccelerationBands"}),Object.defineProperty(M,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.a.classNames.concat([M.className])});class j extends P{constructor(){super(...arguments),Object.defineProperty(this,"upperBandSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowerBandSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"standardDeviations",name:this.root.language.translateAny("Deviation"),type:"number"},{key:"upperColor",name:this.root.language.translateAny("Upper"),type:"color"},{key:"seriesColor",name:this.root.language.translateAny("Average"),type:"color"},{key:"lowerColor",name:this.root.language.translateAny("Lower"),type:"color"},{key:"field",name:this.root.language.translateAny("Field"),type:"dropdown",options:["open","close","low","high","hl/2","hlc/3","hlcc/4","ohlc/4"]},{key:"type",name:this.root.language.translateAny("Type"),type:"dropdown",options:["simple","weighted","exponential","dema","tema"]}]})}_afterNew(){const e=this.get("stockSeries"),t=e.chart;if(t){const i=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"upper",openValueYField:"lower",calculateAggregates:!0,xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),groupDataDisabled:!0,themeTags:["indicator","bollingerbands","upper"]}));i.fills.template.set("visible",!0),i.setPrivate("baseValueSeries",e),this.upperBandSeries=i;const a=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"lower",calculateAggregates:!0,xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),groupDataDisabled:!0,themeTags:["indicator","bollingerbands","lower"]}));a.setPrivate("baseValueSeries",e),this.lowerBandSeries=a}super._afterNew(),this.series.addTag("bollingerbands"),this.series._applyThemes()}_prepareChildren(){this.isDirty("standardDeviations")&&this.markDataDirty(),super._prepareChildren()}_updateChildren(){super._updateChildren();const e="upperColor";if(this.isDirty(e)){const t=this.get(e),i=this.upperBandSeries;i.set("stroke",t),i.set("fill",t),i.strokes.template.set("stroke",t),this._updateSeriesColor(i,t,e)}const t="lowerColor";if(this.isDirty(t)){const e=this.get(t),i=this.lowerBandSeries;i.set("stroke",e),i.strokes.template.set("stroke",e),this._updateSeriesColor(i,e,t)}this.setCustomData("standardDeviations",this.get("standardDeviations"))}prepareData(){if(super.prepareData(),this.series){let e=this.get("period",20);const t=this.get("stockSeries").dataItems;let i=this.get("standardDeviations",2),a=this.series.data.values,s=0;D.each(a,(a=>{if(s>=e-1){let n=a.ma,r=0;for(let i=s-e+1;i<=s;i++){let e=t[i],a=this._getValue(e);null!=a&&(r+=Math.pow(a-n,2))}let o=Math.sqrt(r/e);const l=n-i*o,c=n+i*o;a.upper=c,a.lower=l}s++})),this.upperBandSeries.data.setAll(a),this.lowerBandSeries.data.setAll(a)}}_dispose(){this.upperBandSeries.dispose(),this.lowerBandSeries.dispose(),super._dispose()}hide(e){const t=Object.create(null,{hide:{get:()=>super.hide}});return Object(c.a)(this,void 0,void 0,(function*(){return Promise.all([t.hide.call(this,e),this.upperBandSeries.hide(e),this.lowerBandSeries.hide(e)])}))}show(e){const t=Object.create(null,{show:{get:()=>super.show}});return Object(c.a)(this,void 0,void 0,(function*(){return Promise.all([t.show.call(this,e),this.upperBandSeries.show(e),this.lowerBandSeries.show(e)])}))}}Object.defineProperty(j,"className",{enumerable:!0,configurable:!0,writable:!0,value:"BollingerBands"}),Object.defineProperty(j,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:P.classNames.concat([j.className])});class F extends C{constructor(){super(...arguments),Object.defineProperty(this,"smaSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._themeTags.push("rsi"),super._afterNew(),this._editableSettings.unshift({key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Period"),type:"color"},{key:"field",name:this.root.language.translateAny("Field"),type:"dropdown",options:["open","close","low","high","hl/2","hlc/3","hlcc/4","ohlc/4"]},{key:"smaPeriod",name:this.root.language.translateAny("SMA period"),type:"number"},{key:"smaColor",name:this.root.language.translateAny("SMA period"),type:"color"});const e=this.panel.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"sma",xAxis:this.xAxis,yAxis:this.yAxis,groupDataDisabled:!0,themeTags:["indicator","sma"]}));this.smaSeries=e}_updateChildren(){super._updateChildren(),this.isDirty("smaColor")&&this._updateSeriesColor(this.smaSeries,this.get("smaColor"),"smaColor"),this.isDirty("smaPeriod")&&(this.markDataDirty(),this.setCustomData("smaPeriod",this.get("smaPeriod")))}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems;let t=this.get("period",14);const i=[];let a=0,s=0,n=0,r=0,o=0;D.each(e,(l=>{let c=null;if(a++,a==t+1){for(let i=1;i<=t;i++){let a=this._getValue(e[i]),r=this._getValue(e[i-1]);if(void 0!=a&&void 0!=r){let e=a-r;e>=0?s+=e/t:n+=Math.abs(e)/t}}c=100-100/(1+s/n),k.isNaN(c)&&(c=0)}else if(a>t){let i=this._getValue(l),h=this._getValue(e[a-2]);if(null!=i&&null!=h){let e=i-h,a=0,l=0;e>0?a=e:l=-e,s=(r*(t-1)+a)/t,n=(o*(t-1)+l)/t,c=100-100/(1+s/n),isNaN(c)&&(c=0)}}i.push({valueX:l.get("valueX"),valueS:c}),r=s,o=n})),this.series.data.setAll(i),t=this.get("smaPeriod",3),this._sma(i,t,"valueS","sma"),this.series.data.setAll(i),this.smaSeries.data.setAll(i)}}}Object.defineProperty(F,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RelativeStrengthIndex"}),Object.defineProperty(F,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:C.classNames.concat([F.className])});class E extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"},{key:"useVolume",name:this.root.language.translateAny("Use Volume"),type:"checkbox"}]})}_afterNew(){this._themeTags.push("accumulationdistribution"),super._afterNew(),this.yAxis.set("numberFormat","#.###a")}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"ad",stroke:this.get("seriesColor"),fill:void 0}))}_prepareChildren(){const e="useVolume";this.isDirty(e)&&(this.markDataDirty(),this.setCustomData(e,this.get(e)?"Y":"N")),super._prepareChildren()}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems,t=this.get("volumeSeries");this.setRaw("field","close");let i=0,a=this._getDataArray(e),s=0,n=this.get("useVolume");D.each(e,(e=>{let r=e.get("valueY");if(null!=r){let o=e.get("lowValueY",r),l=e.get("highValueY",r),c=1;if(t&&n){const e=t.dataItems[i];e&&(c=e.get("valueY",1))}let h=(r-o-(l-r))/(l-o);l==o&&(h=0);let d=s+h*c;a[i].ad=d,s=d}i++})),this.series.data.setAll(a)}}}Object.defineProperty(E,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AccumulationDistribution"}),Object.defineProperty(E,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([E.className])});class Y extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"positiveColor",name:this.root.language.translateAny("Positive color"),type:"color"},{key:"negativeColor",name:this.root.language.translateAny("Negative color"),type:"color"},{key:"limitMoveValue",name:this.root.language.translateAny("Limit move value"),type:"number"}]}),Object.defineProperty(this,"_axisRange",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_axisRangeDI",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._themeTags.push("accumulativeswingindex"),super._afterNew()}_createSeries(){const e=this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"asi"})),t=this.yAxis.makeDataItem({});return this._axisRangeDI=t,t.set("value",0),t.set("endValue",-100),this._axisRange=e.createAxisRange(t),this.yAxis.onPrivate("min",(e=>{t.set("endValue",e)})),e}_prepareChildren(){const e="limitMoveValue";this.isDirty(e)&&(this.setCustomData(e,this.get(e)),this.markDataDirty());const t=this.series;if(this.isDirty("positiveColor")){let e=this.get("positiveColor");t.setAll({fill:e,stroke:e})}if(this.isDirty("negativeColor")){let e=this.get("negativeColor"),t=this._axisRange;if(t){const i=t.fills;i&&i.template.set("fill",e);const a=t.strokes;a&&a.template.set("stroke",e)}}super._prepareChildren()}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems;this.setRaw("field","close");let t=this._getDataArray(e),i=this.get("limitMoveValue",.5),a=0,s=this.get("negativeColor",T.a.fromHex(16711680)).toCSSHex(),n=this.get("positiveColor",T.a.fromHex(65280)).toCSSHex();if(e.length>2){t[0].asi=0,t[0].swingColor=n;for(let r=1,o=e.length;r<o;r++){const o=e[r],l=e[r-1];let c=o.get("valueY");if(k.isNumber(c)){let e=l.get("valueY",c),h=o.get("highValueY",c),d=o.get("lowValueY",c),u=o.get("openValueY",c),g=l.get("openValueY",c),p=h-d,m=Math.abs(h-e),f=Math.abs(d-e),b=Math.max(m,f,p),v=0;e>h&&(v=m),e<d&&(v=f);let _=Math.max(m,f),y=50*(c-e+(c-u)/2+(e-g)/4)/(b-v/2+Math.abs(e-g)/4)*_/i;k.isNumber(y)&&(a+=y);let w=n;a<0&&(w=s),t[r].asi=a,t[r].swingColor=w}}}this.series.data.setAll(t)}}}Object.defineProperty(Y,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AccumulativeSwingIndex"}),Object.defineProperty(Y,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([Y.className])});class X extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"upColor",name:this.root.language.translateAny("Aroon up"),type:"color"},{key:"downColor",name:this.root.language.translateAny("Aroon down"),type:"color"}]})}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"up",fill:void 0}))}_afterNew(){this._themeTags.push("aroon"),super._afterNew(),this.downSeries=this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"down",fill:void 0})),this.yAxis.setAll({min:-1,max:101,strictMinMax:!0,numberFormat:"#'%'"})}_updateChildren(){super._updateChildren();const e="upColor";if(this.isDirty(e)){let t=this.get(e,T.a.fromHex(65280));this._updateSeriesColor(this.series,t),this.setCustomData(e,t)}const t="downColor";if(this.isDirty(t)){let e=this.get(t,T.a.fromHex(16711680));this._updateSeriesColor(this.downSeries,e),this.setCustomData(t,e)}}prepareData(){if(this.series){this.set("field","close");const e=this.get("stockSeries").dataItems;let t=this._getDataArray(e),i=this.get("period",14),a=0;D.each(t,(t=>{let s=-1/0,n=1/0,r=0,o=0;for(let l=Math.max(0,a-i);l<=a;l++){let t=e[l].get("highValueY",0);t>=s&&(s=t,o=l);let i=e[l].get("lowValueY",0);i<=n&&(n=i,r=l)}t.up=(i-(a-o))/i*100,t.down=(i-(a-r))/i*100,a++})),this.series.data.setAll(t),this.downSeries.data.setAll(t)}}}Object.defineProperty(X,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Aroon"}),Object.defineProperty(X,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([X.className])});class L extends b{constructor(){super(...arguments),Object.defineProperty(this,"signalSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"differenceSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"fastPeriod",name:this.root.language.translateAny("Fast MA period"),type:"number"},{key:"slowPeriod",name:this.root.language.translateAny("Slow MA period"),type:"number"},{key:"signalPeriod",name:this.root.language.translateAny("Signal period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("MACD"),type:"color"},{key:"signalColor",name:this.root.language.translateAny("Signal"),type:"color"},{key:"increasingColor",name:this.root.language.translateAny("Increasing"),type:"color"},{key:"decreasingColor",name:this.root.language.translateAny("Decreasing"),type:"color"}]})}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"macd",groupDataDisabled:!0,stroke:this.get("seriesColor"),fill:void 0}))}_afterNew(){this._themeTags.push("macd"),super._afterNew();const e=this.panel;if(e){const t=e.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"signal",xAxis:this.xAxis,yAxis:this.yAxis,groupDataDisabled:!0,themeTags:["indicator","signal"]}));this.signalSeries=t;const i=e.series.push(N.a.new(this._root,{valueXField:"valueX",valueYField:"difference",xAxis:this.xAxis,yAxis:this.yAxis,groupDataDisabled:!0,themeTags:["indicator","difference"]}));this.differenceSeries=i}}_prepareChildren(){(this.isDirty("fastPeriod")||this.isDirty("slowPeriod")||this.isDirty("signalPeriod"))&&(this.markDataDirty(),this.setCustomData("fastPeriod",this.get("fastPeriod")),this.setCustomData("slowPeriod",this.get("slowPeriod")),this.setCustomData("signalPeriod",this.get("signalPeriod"))),super._prepareChildren()}_updateChildren(){if(super._updateChildren(),this.isDirty("increasingColor")||this.isDirty("decreasingColor")){const e=this.differenceSeries.columns.template,t=this.get("increasingColor"),i=this.get("decreasingColor");e.states.create("riseFromPrevious",{fill:t,stroke:t}),e.states.create("dropFromPrevious",{fill:i,stroke:i}),this._dataDirty=!0}this.isDirty("signalColor")&&this._updateSeriesColor(this.signalSeries,this.get("signalColor"),"signalColor");const e=this.series.dataItem;if(e){const t=e.dataContext;if(t){t.fastPeriod=this.get("fastPeriod"),t.slowPeriod=this.get("slowPeriod"),t.signalPeriod=this.get("signalPeriod");const e=this.get("seriesColor");e&&(t.seriesColor=e.toCSSHex());const i=this.get("signalColor");i&&(t.signalColor=i.toCSSHex())}}}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems;let t=this._getDataArray(e),i=this.get("fastPeriod",12);this._ema(t,i,"value_y","emaFast"),i=this.get("slowPeriod",26),this._ema(t,i,"value_y","emaSlow"),D.each(t,(e=>{let t=e.emaFast,i=e.emaSlow;null!=t&&null!=i&&(e.macd=t-i)})),i=this.get("signalPeriod",9),this._ema(t,i,"macd","signal");const a=this.get("increasingColor",Object(T.b)(65280)).toCSSHex(),s=this.get("decreasingColor",Object(T.b)(16711680)).toCSSHex();let n=-1/0;D.each(t,(e=>{let t=e.macd,i=e.signal;if(null!=t&&null!=i){let r=t-i;e.difference=r;let o=a;r<n&&(o=s),e.differenceColor=o,n=r}})),this.differenceSeries.data.setAll(t),this.signalSeries.data.setAll(t),this.series.data.setAll(t)}}}Object.defineProperty(L,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MACD"}),Object.defineProperty(L,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([L.className])});class V extends l.a{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Slow period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Slow period"),type:"color"},{key:"fastPeriod",name:this.root.language.translateAny("Fast period"),type:"number"},{key:"fastColor",name:this.root.language.translateAny("Fast period"),type:"color"}]})}_prepareChildren(){(this.isDirty("period")||this.isDirty("fastPeriod"))&&this.markDataDirty(),this.isDirty("fastColor")&&this._updateSeriesColor(this.fastSeries,this.get("fastColor"),"fastColor"),this.setCustomData("fastPeriod",this.get("fastPeriod")),super._prepareChildren()}_dispose(){this.fastSeries.dispose(),super._dispose()}_afterNew(){super._afterNew();const e=this.get("stockSeries"),t=e.chart;if(t){const i=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"ma",groupDataDisabled:!0,calculateAggregates:!0,xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),themeTags:["indicator","macross"],name:"MA"}));i.setPrivate("baseValueSeries",e),this.series=i;const a=t.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"maf",groupDataDisabled:!0,calculateAggregates:!0,xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),stroke:this.get("fastColor"),themeTags:["indicator","macross","fast"]}));a.setPrivate("baseValueSeries",e),this.fastSeries=a,this._handleLegend(i)}}prepareData(){if(this.series){let e=this.get("period",9),t=this.get("fastPeriod",21);const i=this.get("stockSeries").dataItems;let a=this._getDataArray(i);this._sma(a,e,"value_y","ma"),this._sma(a,t,"value_y","maf"),this.series.data.setAll(a),this.fastSeries.data.setAll(a)}}}Object.defineProperty(V,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MACross"}),Object.defineProperty(V,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.a.classNames.concat([V.className])});class R extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"}]})}_afterNew(){this._themeTags.push("chaikinmoneyflow"),super._afterNew()}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"cmf",stroke:this.get("seriesColor"),fill:void 0}))}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems,t=this.get("volumeSeries");this.setRaw("field","close");let i=this._getDataArray(e),a=0;D.each(e,(e=>{let s=e.get("valueY");if(null!=s){let n=e.get("lowValueY",s),r=e.get("highValueY",s),o=1;const l=t.dataItems[a];l&&(o=l.get("valueY",1));let c=(s-n-(r-s))/(r-n);r==n&&(c=0);let h=c*o;i[a].mfv=h,i[a].volume=o}a++}));const s=this.get("period",20);a=0,D.each(i,(e=>{if(a>=s-1){let t=0,n=0;for(let e=a;e>a-s;e--)t+=i[e].mfv,n+=i[e].volume;0!=n&&(e.cmf=t/n)}a++})),this.series.data.setAll(i)}}}Object.defineProperty(R,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChaikinMoneyFlow"}),Object.defineProperty(R,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([R.className])});class B extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Fast period"),type:"number"},{key:"slowPeriod",name:this.root.language.translateAny("Slow period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"}]})}_afterNew(){this._themeTags.push("chaikinoscillator"),super._afterNew(),this.yAxis.set("numberFormat","#.###a")}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"cmf",stroke:this.get("seriesColor"),fill:void 0}))}_prepareChildren(){this.isDirty("slowPeriod")&&(this.markDataDirty(),this.setCustomData("slowPeriod",this.get("slowPeriod"))),super._prepareChildren()}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems,t=this.get("volumeSeries");this.setRaw("field","close");let i=0,a=this._getDataArray(e),s=0;D.each(e,(e=>{let n=e.get("valueY");if(null!=n){let r=e.get("lowValueY",n),o=e.get("highValueY",n),l=1;const c=t.dataItems[i];c&&(l=c.get("valueY",1));let h=(n-r-(o-n))/(o-r);o==r&&(h=0);let d=s+h*l;a[i].ad=d,s=d}i++})),this._ema(a,this.get("slowPeriod",10),"ad","emaSlow"),this._ema(a,this.get("period",3),"ad","emaFast"),D.each(a,(e=>{const t=e.emaSlow,i=e.emaFast;null!=t&&null!=i&&(e.cmf=i-t)})),this.series.data.setAll(a)}}}Object.defineProperty(B,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChaikinOscillator"}),Object.defineProperty(B,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([B.className])});class H extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"}]})}_afterNew(){this._themeTags.push("bullbearpower"),super._afterNew()}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"bbp",stroke:this.get("seriesColor"),fill:void 0}))}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems;this.setRaw("field","close");let t=0,i=this._getDataArray(e),a=this.get("period",3);this._ema(i,a,"value_y","ema"),D.each(e,(e=>{if(t>=a-1){let a=e.get("valueY");if(null!=a){let s=e.get("lowValueY",a),n=e.get("highValueY",a),r=i[t].ema;i[t].bbp=n-r+s-r}}t++})),this.series.data.setAll(i)}}}Object.defineProperty(H,"className",{enumerable:!0,configurable:!0,writable:!0,value:"BullBearPower"}),Object.defineProperty(H,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([H.className])});class z extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"}]})}_afterNew(){this._themeTags.push("onbalancevolume"),super._afterNew(),this.yAxis.set("numberFormat","#.###a")}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"obv",stroke:this.get("seriesColor"),fill:void 0}))}prepareData(){if(this.series){this.setRaw("field","close");const e=this.get("stockSeries").dataItems,t=this.get("volumeSeries");let i=this._getDataArray(e),a=0,s=i.length;if(t&&s>1){let e=i[0].value_y;for(let n=1;n<s;n++){const s=i[n];let r=s.value_y;if(null!=r){const i=t.dataItems[n];let o=0;i&&(o=i.get("valueY",1));let l=a;r>e?l+=o:r<e&&(l-=o),s.obv=l,a=l,e=r}}}this.series.data.setAll(i)}}}Object.defineProperty(z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"OnBalanceVolume"}),Object.defineProperty(z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([z.className])});class W extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"}]})}_afterNew(){this._themeTags.push("pvt"),super._afterNew(),this.yAxis.set("numberFormat","#.###a")}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"pvt",stroke:this.get("seriesColor"),fill:void 0}))}prepareData(){if(this.series){this.setRaw("field","close");const e=this.get("stockSeries").dataItems,t=this.get("volumeSeries");let i=this._getDataArray(e),a=0,s=i.length;if(t&&s>1){let e=i[0].value_y;for(let n=1;n<s;n++){const s=i[n];let r=s.value_y;if(null!=r&&k.isNumber(r)&&0!=r){const i=t.dataItems[n];let o=0;i&&(o=i.get("valueY",1));let l=(r-e)/e*o+a;s.pvt=l,a=l,e=r}}}this.series.data.setAll(i)}}}Object.defineProperty(W,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PVT"}),Object.defineProperty(W,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([W.className])});class $ extends C{constructor(){super(...arguments),Object.defineProperty(this,"slowSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._themeTags.push("stochastic"),super._afterNew(),this._editableSettings.unshift({key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Period"),type:"color"},{key:"kSmoothing",name:this.root.language.translateAny("K period"),type:"number"},{key:"dSmoothing",name:this.root.language.translateAny("SMA period"),type:"number"},{key:"slowColor",name:this.root.language.translateAny("SMA period"),type:"color"}),this.yAxis.setAll({min:0,max:100,strictMinMax:!0});const e=this.panel.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"slow",xAxis:this.xAxis,yAxis:this.yAxis,groupDataDisabled:!0,themeTags:["indicator","slow"]}));this.slowSeries=e}_updateChildren(){(this.isDirty("kSmoothing")||this.isDirty("dSmoothing"))&&(this.markDataDirty(),this.setCustomData("dSmoothing",this.get("dSmoothing")),this.setCustomData("kSmoothing",this.get("kSmoothing"))),super._updateChildren(),this.isDirty("slowColor")&&this._updateSeriesColor(this.slowSeries,this.get("slowColor"),"slowColor")}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems;let t=this.get("period",14),i=[],a=0;D.each(e,(s=>{const n=s.get("valueX");let r;if(a>=t-1){let i=this._getValue(s);if(null!=i){let s=1/0,n=-s;for(let i=a;i>a-t;i--){let t=e[i].get("highValueY"),a=e[i].get("lowValueY");null!=t&&null!=a&&(a<s&&(s=a),t>n&&(n=t))}r=(i-s)/(n-s)*100}}null==r||k.isNaN(r)?i.push({valueX:n}):i.push({valueX:n,value_y:r}),a++})),t=this.get("kSmoothing",1),this._sma(i,t,"value_y","valueS"),t=this.get("dSmoothing",3),this._sma(i,t,"valueS","slow"),this.series.data.setAll(i),this.slowSeries.data.setAll(i)}}}Object.defineProperty($,"className",{enumerable:!0,configurable:!0,writable:!0,value:"StochasticOscillator"}),Object.defineProperty($,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:C.classNames.concat([$.className])});class U extends C{constructor(){super(...arguments),Object.defineProperty(this,"emaSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._themeTags.push("stochasticmomentum"),super._afterNew(),this._editableSettings.unshift({key:"period",name:this.root.language.translateAny("K period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("K period"),type:"color"},{key:"dPeriod",name:this.root.language.translateAny("D period"),type:"number"},{key:"emaPeriod",name:this.root.language.translateAny("EMA period"),type:"number"},{key:"emaColor",name:this.root.language.translateAny("EMA period"),type:"color"});const e=this.panel.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"ema",xAxis:this.xAxis,yAxis:this.yAxis,groupDataDisabled:!0,themeTags:["indicator","ema"]}));this.emaSeries=e}_updateChildren(){(this.isDirty("dPeriod")||this.isDirty("emaPeriod"))&&(this.markDataDirty(),this.setCustomData("dPeriod",this.get("dPeriod")),this.setCustomData("emaPeriod",this.get("emaPeriod"))),super._updateChildren(),this.isDirty("emaColor")&&this._updateSeriesColor(this.emaSeries,this.get("emaColor"),"emaColor")}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems;let t=this.get("period",10),i=[],a=0;D.each(e,(s=>{const n=s.get("valueX");let r,o,l=1/0,c=-l;if(a>=t-1){let i=this._getValue(s);if(null!=i){for(let i=a;i>a-t;i--){let t=e[i].get("highValueY"),a=e[i].get("lowValueY");null!=t&&null!=a&&(a<l&&(l=a),t>c&&(c=t))}r=i-(c+l)/2,o=c-l}}null==r||k.isNaN(r)||0===r?i.push({valueX:n}):i.push({valueX:n,hhh:r,dhl:o}),a++}));let s=this.get("dPeriod",3);this._ema(i,s,"hhh","hhh_ema"),this._ema(i,s,"hhh_ema","hhh_ema2"),this._ema(i,s,"dhl","dhl_ema"),this._ema(i,s,"dhl_ema","dhl_ema2"),D.each(i,(e=>{let t=e.hhh_ema2,i=e.dhl_ema2;null!=t&&null!=i&&(e.valueS=e.hhh_ema2/e.dhl_ema2*200)}));let n=this.get("emaPeriod",3);this._sma(i,n,"valueS","ema"),this.series.data.setAll(i),this.emaSeries.data.setAll(i)}}}Object.defineProperty(U,"className",{enumerable:!0,configurable:!0,writable:!0,value:"StochasticMomentumIndex"}),Object.defineProperty(U,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:C.classNames.concat([U.className])});class J extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"increasingColor",name:this.root.language.translateAny("Increasing"),type:"color"},{key:"decreasingColor",name:this.root.language.translateAny("Decreasing"),type:"color"}]})}_afterNew(){this._themeTags.push("awesomeoscillator"),super._afterNew()}_createSeries(){return this.panel.series.push(N.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"ao",stroke:this.get("seriesColor"),fill:void 0}))}_updateChildren(){super._updateChildren();const e="increasingColor",t="decreasingColor";if(this.isDirty(e)||this.isDirty(t)){const i=this.series.columns.template,a=this.get(e),s=this.get(t);i.states.create("riseFromPrevious",{fill:a,stroke:a}),i.states.create("dropFromPrevious",{fill:s,stroke:s}),this.markDataDirty()}}prepareData(){if(this.series){this.set("field","hl/2");const e=this.get("stockSeries").dataItems;let t=this.get("decreasingColor",T.a.fromHex(16711680)).toCSSHex(),i=this.get("increasingColor",T.a.fromHex(65280)).toCSSHex(),a=this._getDataArray(e),s=5;this._sma(a,5,"value_y","sma5"),s=34,this._sma(a,34,"value_y","sma34");let n=-1/0,r=0;D.each(a,(e=>{if(r++,r>=s){let a=e.sma5-e.sma34,s=i;a<n&&(s=t),e.ao=a,e.oscillatorColor=s,n=a}})),this.series.data.setAll(a)}}}Object.defineProperty(J,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AwesomeOscillator"}),Object.defineProperty(J,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([J.className])});class K extends C{_afterNew(){this._themeTags.push("williamsr"),super._afterNew(),this._editableSettings.unshift({key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Period"),type:"color"})}prepareData(){if(this.series){this.set("field","close");const e=this.get("stockSeries").dataItems;let t=this._getDataArray(e),i=this.get("period",14);for(let a=0,s=t.length;a<s;a++){const s=t[a];let n=-1/0,r=1/0;for(let t=Math.max(0,a-i);t<=a;t++){let i=e[t].get("highValueY",0);i>=n&&(n=i);let a=e[t].get("lowValueY",0);a<=r&&(r=a)}n-r!=0&&(s.valueS=-100*(n-s.value_y)/(n-r))}this.series.data.setAll(t)}}}Object.defineProperty(K,"className",{enumerable:!0,configurable:!0,writable:!0,value:"WilliamsR"}),Object.defineProperty(K,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:C.classNames.concat([K.className])});class q extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"increasingColor",name:this.root.language.translateAny("Up volume"),type:"color"},{key:"decreasingColor",name:this.root.language.translateAny("Down volume"),type:"color"}]})}_afterNew(){this._themeTags.push("volume"),super._afterNew(),this.yAxis.set("numberFormat","#.###a")}_createSeries(){return this.panel.series.push(N.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"volume",stroke:this.get("seriesColor"),fill:void 0}))}_prepareChildren(){(this.isDirty("increasingColor")||this.isDirty("decreasingColor"))&&this.markDataDirty(),super._prepareChildren()}prepareData(){if(this.series){const e=this.get("volumeSeries"),t=this.get("stockChart");if(e&&t){const i=e.dataItems;this.setRaw("field","close");let a=this.get("decreasingColor",T.a.fromHex(16711680)),s=this.get("increasingColor",T.a.fromHex(65280)),n=this._getDataArray(i);D.each(n,(e=>{e.volume=e.value_y})),this.series.data.setAll(n),D.each(this.series.dataItems,(e=>{e.dataContext.volumeColor=t.getVolumeColor(e,a,s)}))}}}}Object.defineProperty(q,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Volume"}),Object.defineProperty(q,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([q.className])});var G=i(5);class Z extends l.a{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"countType",name:this.root.language.translateAny("Count"),type:"dropdown",options:[{value:"rows",text:this.root.language.translateAny("number of rows"),extTarget:"count",extTargetValue:24,extTargetMinValue:1},{value:"ticks",text:this.root.language.translateAny("ticks per row"),extTarget:"count",extTargetValue:1e3,extTargetMinValue:200}]},{key:"count",name:this.root.language.translateAny("Count"),type:"number",minValue:1},{key:"valueArea",name:this.root.language.translateAny("Value Area"),type:"number"},{key:"upColor",name:this.root.language.translateAny("Up volume"),type:"color"},{key:"downColor",name:this.root.language.translateAny("Down volume"),type:"color"},{key:"axisWidth",name:this.root.language.translateAny("Width %"),type:"number"}]}),Object.defineProperty(this,"xAxis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"upSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_previousColumn",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew();const e=this.get("volumeSeries"),t=this.get("stockSeries");if(e){const e=t.chart,i=this._root;if(e){const a=t.get("yAxis");if(void 0!==a.getPrivate("step")){const e=50*a.getPrivate("step");this._editableSettings[0].options[1].extTargetValue=e,this._editableSettings[0].options[1].extTargetMinValue=.2*e}a.onPrivate("step",(e=>{const t=50*e;this._editableSettings[0].options[1].extTargetValue=t,this._editableSettings[0].options[1].extTargetMinValue=.2*t}));const s=t.get("xAxis");s.on("start",(()=>{this.markDataDirty()})),s.on("end",(()=>{this.markDataDirty()}));const n=p.a.new(i,{});n.grid.template.set("forceHidden",!0),n.labels.template.set("forceHidden",!0),this.xAxis=e.xAxes.push(g.a.new(i,{zoomable:!1,strictMinMax:!0,panX:!1,panY:!1,renderer:n})),a.get("renderer").get("opposite")&&(n.set("inversed",!0),this.xAxis.setAll({x:Object(G.f)(100),centerX:Object(G.f)(100)})),this.series=e.series.unshift(N.a.new(i,{xAxis:this.xAxis,yAxis:a,snapTooltip:!1,valueXField:"down",openValueXField:"xOpen",openValueYField:"yOpen",valueYField:"y",calculateAggregates:!0,themeTags:["indicator","volumeprofile","down"]})),this.upSeries=e.series.unshift(N.a.new(i,{xAxis:this.xAxis,yAxis:a,snapTooltip:!1,valueXField:"total",openValueXField:"down",openValueYField:"yOpen",valueYField:"y",calculateAggregates:!0,themeTags:["indicator","volumeprofile","up"]})),this.upSeries.setPrivate("doNotUpdateLegend",!0),this.series.setPrivate("doNotUpdateLegend",!0),this.upSeries.setPrivate("baseValueSeries",t),this.series.setPrivate("baseValueSeries",t),this._handleLegend(this.series),this._addInteractivity(this.series),this._addInteractivity(this.upSeries)}}}_addInteractivity(e){e.columns.template.events.on("pointerover",(e=>{let t=e.target.dataItem;if(t){if(t.component==this.upSeries){if(t=this.series.dataItems[this.upSeries.dataItems.indexOf(t)],t){const e=t.get("graphics");e&&(e.hover(),this._previousColumn=e)}}else if(t=this.upSeries.dataItems[this.series.dataItems.indexOf(t)],t){const e=t.get("graphics");e&&(e.hover(),this._previousColumn=e)}this.series.updateLegendValue(t)}})),e.columns.template.events.on("pointerout",(()=>{this.series.updateLegendValue(void 0),this._previousColumn&&this._previousColumn.unhover()})),e.columns.template.adapters.add("fillOpacity",((e,t)=>{const i=t.dataItem;if(i){const e=i.dataContext;if(e&&e.area)return this.get("valueAreaOpacity",.7)}return e}))}_updateChildren(){if(this.series){if(super._updateChildren(),(this.isDirty("count")||this.isDirty("countType")||this.isDirty("valueArea"))&&this.markDataDirty(),this.isDirty("countType")){if("ticks"==this.get("countType")){const e=this.get("stockSeries").get("yAxis");this._editableSettings[1].minValue=50*e.getPrivate("step")*.2}else this._editableSettings[1].minValue=1}if(this.isDirty("upColor")){const e=this.get("upColor");this.upSeries.set("fill",e),this.upSeries.set("stroke",e),this.upSeries.columns.template.setAll({fill:e,stroke:e}),this.setCustomData("upColor",e)}if(this.isDirty("downColor")){const e=this.get("downColor");this.series.set("fill",e),this.series.set("stroke",e),this.series.columns.template.setAll({fill:e,stroke:e}),this.setCustomData("downColor",e)}this.isDirty("axisWidth")&&this.xAxis.set("width",Object(G.f)(this.get("axisWidth",40)))}}prepareData(){const e=this.get("volumeSeries"),t=this.get("stockSeries");if(e&&this.series){let i=e.getPrivate("adjustedStartIndex",e.startIndex()),a=e.endIndex();const s=this.get("count",20),n=this.get("countType");let r=1,o=1/0,l=-1/0;for(let e=i;e<a;e++){const i=t.dataItems[e];if(i){const e=i.get("valueY");k.isNumber(e)&&(e<o&&(o=e),e>l&&(l=e))}}if(o!=1/0){let c;"ticks"==n?(r=s/100,o=Math.floor(o/r)*r,l=Math.ceil(l/r)*r,c=(l-o)/r):(r=(l-o)/s,c=s);const h=[],d=[];for(let e=0;e<c;e++)h[e]=0,d[e]=0;let u;for(let n=i;n<a;n++){const i=t.dataItems[n],a=e.dataItems[n];if(i&&a){const e=i.get("valueY"),t=a.get("valueY");if(k.isNumber(e)&&k.isNumber(t)){let i=Math.floor((e-o)/r);i==s&&(i=s-1),k.isNumber(i)&&(u&&u.get("valueY",e)<e?h[i]+=t:d[i]+=t)}u=i}}const g=[];let p=0;for(let e=0;e<c;e++){let t=d[e]+h[e];p+=t,g.push({yOpen:o+e*r,y:o+(e+1)*r,up:d[e],down:h[e],total:t,xOpen:0,area:!1})}let m=this.series.data.length;if(m&&m==g.length)for(let e=0;e<m;e++)this.series.data.setIndex(e,g[e]);else this.series.data.setAll(g);const f=[];let b=0,v=0;for(let e=0;e<c;e++){let t=d[e]+h[e];f.push({yOpen:o+e*r,y:o+(e+1)*r,up:d[e],down:h[e],total:t,area:!1}),t>b&&(b=t,v=e)}let _=p*this.get("valueArea",70)/100,y=b,w=1,x=1,C=f.length;for(f[v].area=!0,g[v].area=!0;y<_;){let e=v+x,t=0;e<C&&(t+=f[e].total);let i=v-w,a=0;if(i>=0&&(a+=f[i].total),a<=t?(y+=t,e<C&&(g[e].area=!0,f[e].area=!0,x++)):(y+=a,i>=0&&(g[i].area=!0,f[i].area=!0,w++)),0==a&&w++,0==t&&x++,w>C&&x>C)break}if(y=Math.ceil(y),m=this.upSeries.data.length,m>0&&m==f.length)for(let e=0;e<m;e++)this.upSeries.data.setIndex(e,f[e]);else this.upSeries.data.setAll(f)}else this.upSeries.data.clear(),this.series.data.clear()}this.series.columns.each((e=>{e._markDirtyKey("fillOpacity")})),this.upSeries.columns.each((e=>{e._markDirtyKey("fillOpacity")}))}_dispose(){super._dispose(),this.upSeries&&this.upSeries.dispose(),this.xAxis&&this.xAxis.dispose()}}Object.defineProperty(Z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VolumeProfile"}),Object.defineProperty(Z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.a.classNames.concat([Z.className])});class Q extends C{_afterNew(){this._themeTags.push("commoditychannelindex"),super._afterNew(),this._editableSettings.unshift({key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Period"),type:"color"})}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems;let t=this._getTypicalPrice(e),i=this.get("period",20);this._sma(t,i,"value_y","sma");for(let a=0,s=t.length;a<s;a++){const e=t[a],s=e.value_y;let n=e.sma,r=0;if(a>=i-1){for(let e=a;e>a-i;e--){let i=t[e];r+=Math.abs(i.value_y-n)}r/=i;let o=(s-n)/(.015*r);k.isNumber(o)&&(e.valueS=o)}}this.series.data.setAll(t)}}}Object.defineProperty(Q,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CommodityChannelIndex"}),Object.defineProperty(Q,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:C.classNames.concat([Q.className])});class ee extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"},{key:"field",name:this.root.language.translateAny("Field"),type:"dropdown",options:["open","close","low","high","hl/2","hlc/3","hlcc/4","ohlc/4"]},{key:"movingAverageType",name:this.root.language.translateAny("Moving Average Type"),type:"dropdown",options:["simple","weighted","exponential","dema","tema"]}]})}_afterNew(){this._themeTags.push("disparityindex"),super._afterNew()}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"disparity",stroke:this.get("seriesColor"),fill:void 0}))}_prepareChildren(){const e="movingAverageType";this.isDirty(e)&&(this.markDataDirty(),this.setCustomData(e,this.get(e))),super._prepareChildren()}prepareData(){if(this.series){const e=this.get("stockSeries").dataItems,t=this.get("period",14),i=this.get("movingAverageType");let a=this._getDataArray(e);switch(i){case"simple":this._sma(a,t,"value_y","ma");break;case"weighted":this._wma(a,t,"value_y","ma");break;case"exponential":this._ema(a,t,"value_y","ma");break;case"dema":this._dema(a,t,"value_y","ma");break;case"tema":this._tema(a,t,"value_y","ma")}D.each(a,(e=>{const t=e.ma;null!=t&&(e.disparity=100*(e.value_y-t)/t)})),this.series.data.setAll(a)}}}Object.defineProperty(ee,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DisparityIndex"}),Object.defineProperty(ee,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([ee.className])});class te extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"},{key:"field",name:this.root.language.translateAny("Field"),type:"dropdown",options:["open","close","low","high","hl/2","hlc/3","hlcc/4","ohlc/4"]}]})}_afterNew(){this._themeTags.push("standarddeviation"),super._afterNew()}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"deviation",fill:void 0}))}prepareData(){if(super.prepareData(),this.series){let e=this.get("period",20);const t=this.get("stockSeries").dataItems;let i=this._getDataArray(t);this._sma(i,e,"value_y","ma");let a=0;D.each(i,(i=>{if(a>=e-1){let s=i.ma,n=0;for(let i=a-e+1;i<=a;i++){let e=t[i],a=this._getValue(e);null!=a&&(n+=Math.pow(a-s,2))}let r=Math.sqrt(n/e);i.deviation=r}a++})),this.series.data.setAll(i)}}}Object.defineProperty(te,"className",{enumerable:!0,configurable:!0,writable:!0,value:"StandardDeviation"}),Object.defineProperty(te,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([te.className])});class ie extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"}]})}_afterNew(){this._themeTags.push("typicalprice"),super._afterNew()}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"typical",fill:void 0}))}prepareData(){if(super.prepareData(),this.series){let e=this.get("period",20);const t=this.get("stockSeries").dataItems;let i=this._getDataArray(t),a=0,s=0,n=0;D.each(i,(t=>{let r=t.value_y;if(null!=r&&(a++,n+=r/e,a>=e)){if(a>e){let t=i[s-e].value_y;null!=t&&(n-=t/e)}t.typical=n}s++})),this.series.data.setAll(i)}}}Object.defineProperty(ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"TypicalPrice"}),Object.defineProperty(ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([ie.className])});class ae extends b{constructor(){super(...arguments),Object.defineProperty(this,"signalSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"},{key:"signalPeriod",name:this.root.language.translateAny("Signal period"),type:"number"},{key:"signalColor",name:this.root.language.translateAny("Signal color"),type:"color"}]}),Object.defineProperty(this,"_themeTag",{enumerable:!0,configurable:!0,writable:!0,value:"trix"})}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"trix",fill:void 0}))}_afterNew(){this._themeTags.push("trix"),super._afterNew();const e=this.panel;if(e){const t=e.series.push(v.a.new(this._root,{valueXField:"valueX",valueYField:"signal",xAxis:this.xAxis,yAxis:this.yAxis,groupDataDisabled:!0,themeTags:["indicator","signal"]}));this.signalSeries=t}}_prepareChildren(){this.isDirty("signalPeriod")&&(this.markDataDirty(),this.setCustomData("signalPeriod",this.get("signalPeriod"))),super._prepareChildren()}_updateChildren(){super._updateChildren(),this.isDirty("signalColor")&&this._updateSeriesColor(this.signalSeries,this.get("signalColor"),"signalColor");const e=this.series.dataItem;if(e){const t=e.dataContext;if(t){t.signalPeriod=this.get("signalPeriod");const e=this.get("signalColor");e&&(t.signalColor=e.toCSSHex())}}}prepareData(){if(super.prepareData(),this.series){let e=this.get("period",14);const t=this.get("stockSeries").dataItems;let i,a,s=this._getDataArray(t);this._ema(s,e,"value_y","ema"),this._ema(s,e,"ema","ema2"),this._ema(s,e,"ema2","ema3"),D.each(s,(e=>{let t=e.ema3;i&&(a=i.ema3),k.isNumber(t)&&k.isNumber(a)&&(e.trix=100*(t-a)/a),i=e})),this.series.data.setAll(s),e=this.get("signalPeriod",9),this._sma(s,e,"trix","signal"),this.signalSeries.data.setAll(s)}}}Object.defineProperty(ae,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Trix"}),Object.defineProperty(ae,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([ae.className])});class se extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"}]})}_afterNew(){this._themeTags.push("medianprice"),super._afterNew()}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"median",fill:void 0}))}prepareData(){if(super.prepareData(),this.series){let e=this.get("period",20);const t=this.get("stockSeries").dataItems;let i=this._getDataArray(t),a=0,s=0,n=0;D.each(i,(t=>{let r=t.value_y;if(null!=r&&(a++,n+=r/e,a>=e)){if(a>e){let t=i[s-e].value_y;null!=t&&(n-=t/e)}t.median=n}s++})),this.series.data.setAll(i)}}}Object.defineProperty(se,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MedianPrice"}),Object.defineProperty(se,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([se.className])});class ne extends l.a{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"deviation",name:this.root.language.translateAny("Deviation"),type:"number"},{key:"depth",name:this.root.language.translateAny("Depth"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"}]})}_prepareChildren(){(this.isDirty("deviation")||this.isDirty("depth"))&&(this._dataDirty=!0,this.setCustomData("deviation",this.get("deviation")),this.setCustomData("depth",this.get("depth"))),super._prepareChildren()}_afterNew(){super._afterNew();const e=this.get("stockSeries"),t=e.chart;if(t){const i=t.series.push(v.a.new(this._root,{valueXField:"time",valueYField:"zigzag",groupDataDisabled:!0,calculateAggregates:!0,xAxis:e.get("xAxis"),yAxis:e.get("yAxis"),themeTags:["indicator","zigzag"],name:"ZigZag",snapTooltip:!0}));i.setPrivate("baseValueSeries",e),this.series=i,this._handleLegend(i)}}prepareData(){if(this.series){const e=this.get("deviation",5)/100,t=this.get("stockSeries"),i=[];if(t){const a=t.dataItems;if(a.length>1){let t,s,n=a[0],r=!1,o=n.get("valueX",0),l=n.get("valueY"),c=n.get("highValueY",l),h=n.get("lowValueY",l),d=1;for(let u=1,g=a.length;u<g;u++){let n=a[u],l=n.get("value",0),g=n.get("lowValueY",l),p=n.get("highValueY",l),m=n.get("valueX",0);if(g<=Number(c)*(1-e)){i.push({time:o,zigzag:c}),t=m,s=g,r=!0,d=u;break}if(p>=Number(h)*(1+e)){i.push({time:o,zigzag:h}),t=m,s=p,r=!1,d=u;break}}if(null!=s){let n=this.get("depth",3);for(let g=d-1,p=a.length;g<p;g++){let o=a[g],l=o.get("value",0),c=o.get("lowValueY",l),h=o.get("highValueY",l),d=o.get("valueX",0);if(r){if(c<=s)s=c,t=d;else if(h>=s*(1+e)){let e=Math.max(0,g-n),o=!1;for(let t=g;t>e;t--)if(h<a[t].get("highValueY")){o=!0;break}o||(i.push({time:t,zigzag:s}),s=h,t=d,r=!1)}}else if(h>=s)s=h,t=d;else if(c<=s*(1-e)){let e=Math.max(0,g-n),o=!1;for(let t=g;t>e;t--)if(c>a[t].get("lowValueY")){o=!0;break}o||(i.push({time:t,zigzag:s}),s=c,t=d,r=!0)}}const o=a[a.length-1];let l=o.get("valueX",0),c=o.get("valueY"),h=o.get("highValueY",c),u=o.get("lowValueY",c);s<h?i.push({time:l,zigzag:u}):i.push({time:l,zigzag:h})}}this.series.data.setAll(i)}}}}Object.defineProperty(ne,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZigZag"}),Object.defineProperty(ne,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.a.classNames.concat([ne.className])});class re extends b{constructor(){super(...arguments),Object.defineProperty(this,"_editableSettings",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"period",name:this.root.language.translateAny("Period"),type:"number"},{key:"seriesColor",name:this.root.language.translateAny("Color"),type:"color"}]})}_afterNew(){this._themeTags.push("averagetruerange"),super._afterNew()}_createSeries(){return this.panel.series.push(v.a.new(this._root,{themeTags:["indicator"],xAxis:this.xAxis,yAxis:this.yAxis,valueXField:"valueX",valueYField:"atr",fill:void 0}))}_getDataArray(e){const t=[];return D.each(e,(e=>{t.push({valueX:e.get("valueX"),value_close:e.get("valueY"),value_high:e.get("highValueY"),value_low:e.get("lowValueY")})})),t}prepareData(){if(super.prepareData(),this.series){let e=this.get("period",20);const t=this.get("stockSeries").dataItems;let i,a,s=this._getDataArray(t),n=0,r=0,o=0;D.each(s,(t=>{let l=t.value_close;if(null!=l&&null!=i&&(n++,o=Math.max(t.value_high-t.value_low,Math.abs(t.value_high-i),Math.abs(t.value_low-i)),t.tr=o,n>=e)){if(n==e){let i=0,a=0;for(let t=r;t>=0&&(i+=s[t].tr,a++,a!=e);t--);t.atr=i/e}else null!=a&&(t.atr=(a*(e-1)+o)/e);a=t.atr}i=l,r++})),this.series.data.setAll(s)}}}Object.defineProperty(re,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AverageTrueRange"}),Object.defineProperty(re,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.classNames.concat([re.className])});var oe=i(164),le=i(163),ce=i(28),he=i(14),de=i(24),ue=i(21),ge=i(15),pe=i(13);class me extends v.a{constructor(){super(...arguments),Object.defineProperty(this,"_clickDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_moveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_upDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_drawingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_clickPointerPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_movePointerPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDrawing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isPointerDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_drawingId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_di",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dragStartPX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dragStartY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dvpX",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dvY",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_isHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_erasingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"selectorContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(he.a.new(this.root,{}))}),Object.defineProperty(this,"_selected",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_isSelecting",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_pIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"grips",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ue.c(de.a.new({}),(()=>he.a._new(this._root,{themeTags:["grip"],setStateOnChildren:!0,draggable:!0},[this.grips.template]))))}),Object.defineProperty(this,"circles",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ue.c(de.a.new({}),(()=>le.a._new(this._root,{},[this.circles.template]))))}),Object.defineProperty(this,"outerCircles",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ue.c(de.a.new({}),(()=>le.a._new(this._root,{themeTags:["outline"]},[this.outerCircles.template]))))}),Object.defineProperty(this,"selectors",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ue.c(de.a.new({}),(()=>ce.a._new(this._root,{themeTags:["selector"]},[this.selectors.template]))))})}_afterNew(){this.addTag("drawing"),this.setPrivate("allowChangeSnap",!0),this._tag&&this.addTag(this._tag),this.set("valueYField","valueY"),this.set("valueXField","valueX"),super._afterNew(),this.set("connect",!1),this.set("autoGapCount",1/0),this.set("ignoreMinMax",!0),this.set("groupDataDisabled",!0);const e=this.strokes.template;e.set("templateField","stroke");const t=this.fills.template;t.setAll({templateField:"fill"}),t.events.on("pointerdown",(e=>{const t=this._getIndex(e.target);if(this._erasingEnabled)this._disposeIndex(t);else{!e.originalEvent.button&&this._drawingEnabled&&this._handlePointerDown(e)}const i=this.strokes.getIndex(this._getStrokeIndex(t));i&&i.dragStart(e)})),t.events.on("dragstart",(e=>{this.startDragItem(e,this._getIndex(e.target))})),t.events.on("click",(e=>{const t=this._getIndex(e.target),i=e.originalEvent;this._isDrawing||this._selectDrawing(t,i.ctrlKey)})),t.events.on("dragstop",(e=>{const t=this._getIndex(e.target);this.stopDragItem(e,t)})),t.events.on("pointerover",(e=>{const t=this._getIndex(e.target),i=this.strokes.getIndex(this._getStrokeIndex(t));i&&i.hover(),this._isHover=!0,this._showSegmentBullets(t)})),t.events.on("pointerout",(()=>{this._isHover=!1})),e.events.on("pointerdown",(e=>{const t=this._getIndex(e.target);this._erasingEnabled&&this._disposeIndex(t)})),e.events.on("click",(e=>{const t=this._getIndex(e.target),i=e.originalEvent;this._selectDrawing(t,i.ctrlKey)})),e.events.on("pointerover",(e=>{this._isHover=!0,this._showSegmentBullets(this._getIndex(e.target))})),e.events.on("pointerout",(()=>{this._isHover=!1})),e.events.on("dragstop",(e=>{this.stopDragItem(e,this._getIndex(e.target))})),e.events.on("dragstart",(e=>{this.startDragItem(e,this._getIndex(e.target))})),this.bulletsContainer.states.create("hidden",{visible:!0,opacity:0}),this.bullets.push(((e,t,i)=>{const a=i.dataContext.index,s=this._di[a].e;let n=this.get("strokeColor",this.get("stroke"));if(s){const e=s.dataContext;if(e){const t=e.stroke;t&&(n=t.get("stroke"))}}const r=this.grips.make();r.setRaw("userData","grip"),this.grips.push(r);const o=r.children.push(this.circles.make());this.circles.push(o),o.set("stroke",n);const l=r.children.push(this.outerCircles.make());return this.outerCircles.push(l),l.set("stroke",n),r.events.on("pointerover",(e=>{const t=e.target.dataItem;if(t){const e=t.dataContext;this._showSegmentBullets(e.index)}})),this._addBulletInteraction(r),this._tweakBullet(r,i),oe.a.new(this._root,{locationX:void 0,sprite:r})})),this.events.on("pointerover",(()=>{this._handlePointerOver()})),this.events.on("pointerout",(()=>{this._handlePointerOut()})),this._getStockChart().markDirtyKey("drawingSelectionEnabled")}disposeIndex(e){this._disposeIndex(e)}getIndex(e){let t=null;return D.eachContinue(this.dataItems,(i=>{const a=i.dataContext;return a.drawingId!=e||(t=a.index,!1)})),t}_disposeIndex(e){const t=this._di[e];if(t){let e,i;pe.each(t,((t,a)=>{const s=a.dataContext;this.data.removeValue(s),s&&(s.drawingId&&(e=s.drawingId),s.index&&(i=s.index))}));for(let t=this.dataItems.length-1;t>=0;t--){const e=this.dataItems[t],a=e.dataContext;a.index==i&&(this.data.removeValue(a),this.disposeDataItem(e))}this._pIndex=0,delete this._di[i],this._dispatchStockEvent("drawingremoved",e,i)}const i=this._getSprite(this.selectors,e);i&&this.selectors.removeValue(i),D.remove(this._selected,e)}_afterDataChange(){D.each(this.dataItems,(e=>{const t=e.dataContext,i=t.index,a=t.corner;void 0!=i&&(void 0==this._di[i]&&(this._di[i]={}),this._createElements(i,e),this._di[i][a]=e,this._index=i)}))}_createElements(e,t){}_clearDirty(){super._clearDirty(),this._isSelecting=!1}clearDrawings(){D.each(this._di,((e,t)=>{this._disposeIndex(t)})),this.data.setAll([]),this._index=0,this._selected=[]}_getIndex(e){const t=e.get("userData");if(t&&t.length>0){const e=this.dataItems[t[0]];if(e){const t=e.dataContext;if(t)return t.index}}return 0}_getStrokeIndex(e){let t=0,i=e;return this.strokes.each((a=>{this._getIndex(a)==e&&(i=t),t++})),i}setInteractive(e){this.strokes.template.set("forceInactive",!e),this.fills.template.set("forceInactive",!e)}enableDrawingSelection(e){this._erasingEnabled=!1,this.strokes.template.set("forceInactive",!e),this.fills.template.set("forceInactive",!e)}_showSegmentBullets(e){const t=this._di[e];t&&pe.each(t,((e,t)=>{const i=t.bullets;i&&D.each(i,(e=>{const t=e.get("sprite");t&&t.show(0)}))}))}_hideResizer(e){const t=this._getStockChart().spriteResizer;if(t){const i=t.get("sprite");i&&(e&&e.dataItem==i.dataItem||t.set("sprite",void 0))}}startDragItem(e,t){const i=this._getStockChart();i&&i._dragStartDrawing(e),-1==this._selected.indexOf(t)&&this.unselectAllDrawings(),this._handleFillDragStart(e,t)}stopDragItem(e,t){const i=this._getStockChart();i&&i._dragStopDrawing(e),this._handleFillDragStop(e,t)}_handleFillDragStart(e,t){this._hideResizer(e.target),this._isPointerDown=!1;const i=this.chart;if(i){const a=this.get("xAxis"),s=this.get("yAxis"),n=i.plotContainer.toLocal(e.point);this._dragStartPX=a.coordinateToPosition(n.x);const r=a.positionToValue(this._dragStartPX);this._dragStartY=this._getYValue(s.positionToValue(s.coordinateToPosition(n.y)),r);const o=this._di[t];this._dvpX[t]={},this._dvY[t]={},o&&pe.each(o,((e,i)=>{this._dvpX[t][e]=a.valueToPosition(i.get("valueX",0)),this._dvY[t][e]=i.get("valueY")}))}}_dragStart(e){D.each(this._selected,(t=>{this._handleFillDragStart(e,t)}))}_dragStop(e){D.each(this._selected,(t=>{this._handleFillDragStop(e,t)}))}_handleFillDragStop(e,t){this._isPointerDown=!1;const i=this.chart;if(i){const a=i.plotContainer.toLocal(e.point),s=this.get("xAxis"),n=this.get("yAxis"),r=s.coordinateToPosition(a.x),o=s.positionToValue(s.coordinateToPosition(a.x)),l=this._getYValue(n.positionToValue(n.coordinateToPosition(a.y)),o),c=r-this._dragStartPX,h=l-this._dragStartY;e.target.setAll({x:0,y:0});const d=this._di[t];d&&pe.each(d,((e,i)=>{const a=this._dvpX[t][e],n=this._dvY[t][e];if(k.isNumber(a)&&k.isNumber(n)){const e=a+c,t=s.positionToValue(e),r=this._getXValue(t);let o=n+h;const l=this.get("yAxis").getPrivate("stepDecimalPlaces",0)+1;o=x.round(o,l),o=this._getYValue(o,t,!0),this._setContext(i,"valueX",r),this._setContext(i,"valueY",o,!0),this._setXLocation(i,r),this._positionBullets(i)}}))}const a=this.strokes.getIndex(this._getStrokeIndex(t));a&&a.dragStop(e),this.markDirty(),this._updateSegment(t)}_updateSegment(e){this._updateElements()}_updateChildren(){this._updateElements(),(this.isDirty("strokeColor")||this.isDirty("strokeOpacity")||this.isDirty("strokeDasharray")||this.isDirty("strokeWidth"))&&D.each(this._selected,(e=>{let t={stroke:this.get("strokeColor"),strokeOpacity:this.get("strokeOpacity"),strokeDasharray:this.get("strokeDasharray"),strokeWidth:this.get("strokeWidth")};const i=this.strokes.getIndex(this._getStrokeIndex(e));if(i){let a;D.each(this.dataItems,(t=>{const i=t.dataContext;i.index==e&&i.stroke&&(a=i.stroke)}));const s=i.states.lookup("default");pe.each(t,((e,t)=>{i.set(e,t),s.set(e,t),a&&a.set(e,t)}))}this.circles.each((i=>{const a=i.dataItem;if(a){const s=a.dataContext;s&&s.index==e&&(i.set("stroke",t.stroke),i.states.lookup("default").set("stroke",t.stroke))}})),this.outerCircles.each((i=>{const a=i.dataItem;if(a){const s=a.dataContext;s&&s.index==e&&(i.set("stroke",t.stroke),i.states.lookup("default").set("stroke",t.stroke))}})),this._applySettings(e,t)})),(this.isDirty("fillColor")||this.isDirty("fillOpacity"))&&D.each(this._selected,(e=>{const t=this.fills.getIndex(this._getStrokeIndex(e));let i={fill:this.get("fillColor"),fillOpacity:this.get("fillOpacity")};if(t){let a;D.each(this.dataItems,(t=>{const i=t.dataContext;i.index==e&&i.fill&&(a=i.fill)}));const s=t.states.lookup("default");pe.each(i,((e,i)=>{t.set(e,i),s.set(e,i),a&&a.set(e,i)}))}this._applySettings(e,i)})),this._valuesDirty&&this.markDirtyDrawings(),super._updateChildren(),this._updateSelectors()}isDrawing(e){this._isDrawing=e;const t=this._getStockChart();t&&e&&(t._selectionWasOn=t.get("drawingSelectionEnabled",!1),t.set("drawingSelectionEnabled",!1))}_applySettings(e,t){this.markDirtyDrawings()}_updateElements(){}markDirtyDrawings(){const e=this._getStockChart();e&&e.markDirtyDrawings()}_getFillTemplate(){const e={},t=this.get("fillColor");null!=t&&(e.fill=t);const i=this.get("fillOpacity");return null!=i&&(e.fillOpacity=i),de.a.new(e)}_getStrokeTemplate(){const e={},t=this.get("strokeColor");null!=t&&(e.stroke=t);const i=this.get("strokeOpacity");null!=i&&(e.strokeOpacity=i);const a=this.get("strokeDasharray");null!=a&&(e.strokeDasharray=a);const s=this.get("strokeWidth");return null!=s&&(e.strokeWidth=s),de.a.new(e)}_tweakBullet(e,t){}_dispatchStockEvent(e,t,i){const a=this._getStockChart();"drawingadded"==e&&a._selectionWasOn&&a.set("drawingSelectionEnabled",!0),a&&a.events.isEnabled(e)&&a.events.dispatch(e,{drawingId:t,series:this,target:a,index:i})}_addBulletInteraction(e){e.events.on("dragged",(e=>{this._handleBulletDragged(e),this._isDragging=!0})),e.events.on("dragstart",(e=>{this._handleBulletDragStart(e)})),e.events.on("dragstop",(e=>{this._handleBulletDragStop(e),this.setTimeout((()=>{this._isDragging=!1}),100)})),e.events.on("click",(e=>{const t=e.target.dataItem;if(t){const i=t.dataContext;this._erasingEnabled?i&&this._disposeIndex(i.index):this._isDrawing?this._handlePointerClick(e):this._selectDrawing(i.index,e.originalEvent.ctrlKey)}}))}_increaseIndex(){this._index++,this._drawingId=this._generateId()}_generateId(){return""+(new Date).getTime()+Math.round(1e4*Math.random()+1e4)}_handlePointerClick(e){if(this._drawingEnabled){const t=this.chart;t&&(this._clickPointerPoint=t.plotContainer.toLocal(e.point))}}_placeBulletsContainer(){this.children.moveValue(this.bulletsContainer),this.enableDrawing(),this.disableDrawing()}_handleBulletDragged(e){const t=e.target.dataItem;if(this.chart){const i=e.target,a={x:i.x(),y:i.y()};this._handleBulletDraggedReal(t,a)}const i=t.dataContext;if(i){const e=i.index;this._updateSegment(e)}}_handleBulletDraggedReal(e,t){const i=this.get("xAxis"),a=this.get("yAxis"),s=i.positionToValue(i.coordinateToPosition(t.x)),n=this._getXValue(s),r=this._getYValue(a.positionToValue(a.coordinateToPosition(t.y)),s);this._setContext(e,"valueX",n),this._setContext(e,"valueY",r,!0),this._setXLocation(e,n),this._positionBullets(e)}_handleBulletDragStart(e){this._hideResizer(),this.unselectAllDrawings()}_handleBulletDragStop(e){}_handlePointerOver(){}_handlePointerOut(){}enableDrawing(){const e=this.chart;this._erasingEnabled=!1,this._drawingEnabled=!0,e&&(this._clickDp||(this._clickDp=e.plotContainer.events.on("click",(e=>{e.originalEvent.button||this._erasingEnabled||this._handlePointerClick(e)}))),this._downDp||(this._downDp=e.plotContainer.events.on("pointerdown",(e=>{e.originalEvent.button||this._erasingEnabled||this._handlePointerDown(e)}))),this._upDp||(this._upDp=e.plotContainer.events.on("globalpointerup",(e=>{e.originalEvent.button||this._erasingEnabled||this._handlePointerUp(e)}))),this._moveDp||(this._moveDp=e.plotContainer.events.on("globalpointermove",(e=>{this._erasingEnabled||e.point.x==this._movePoint.x&&e.point.y==this._movePoint.y||this._handlePointerMove(e)}))))}enableErasing(){this._erasingEnabled=!0,this.setInteractive(!0)}disableErasing(){this._erasingEnabled=!1,this._getStockChart().get("drawingSelectionEnabled")||this.setInteractive(!1)}disableDrawing(){this._erasingEnabled=!1,this._drawingEnabled=!1,this.isDrawing(!1),this._clickDp&&(this._clickDp.dispose(),this._clickDp=void 0),this._downDp&&(this._downDp.dispose(),this._downDp=void 0),this._upDp&&(this._upDp.dispose(),this._upDp=void 0)}toggleDrawing(e){this._getStockChart().get("hideDrawingGrips")&&this.root.events.once("frameended",(()=>{this.circles.each((t=>{t.set("forceHidden",!e)})),this.grips.each((t=>{t.set("forceInactive",!e)}))}))}_handlePointerMove(e){const t=this.chart;t&&(this._movePointerPoint=t.plotContainer.toLocal(e.point))}_handlePointerDown(e){this._isPointerDown=!0}_handlePointerUp(e){this._isPointerDown=!1}startIndex(){return 0}endIndex(){return this.dataItems.length}_setXLocation(e,t){this.get("snapToData")?e.set("locationX",void 0):this._setXLocationReal(e,t)}_setXLocationReal(e,t){const i=this.get("xAxis").getPrivate("baseInterval"),a=this._root,s=a.locale.firstDayOfWeek,n=ge.round(new Date(t),i.timeUnit,i.count,s,a.utc,void 0,a.timezone).getTime();let r=n+ge.getDuration(i.timeUnit,1.05*i.count);r=ge.round(new Date(r),i.timeUnit,i.count,s,a.utc,void 0,a.timezone).getTime();const o=(t-n)/(r-n);e.set("locationX",o)}disposeDataItem(e){super.disposeDataItem(e);const t=e.dataContext;if(t){const e=t.index;this.markDirtyValues();const i=this._di[e];i&&pe.each(i,((e,t)=>{super.disposeDataItem(t)})),delete this._di[e]}}_getYValue(e,t,i){const a=this.get("series");if(this.get("snapToData")&&a){const i=this.get("field","value")+"Y";return this._snap(t,e,i,a)}{if(!i&&"valueYChangeSelectionPercent"==this.get("valueYShow")){const t=this.getPrivate("baseValueSeries");if(t){const i=t._getBase("valueY");e=e/100*i+i}}const t=this.get("yAxis").getPrivate("stepDecimalPlaces",0)+1;return x.round(e,t)}}_getXValue(e){const t=this.get("series");if(this.get("snapToData")&&t){const i=this.get("xAxis"),a=i.getPrivate("min",0)+1,s=i.getPrivate("max",1)-1;return e=x.fitToRange(e,a,s),e=this._snap(e,e,"valueX",t)+1}return Math.round(e)}_setContext(e,t,i,a){e.set(t,i),a&&e.set(t+"Working",i);const s=e.dataContext,n=this.get(t+"Field");n&&(s[n]=i)}_snap(e,t,i,a){const s=this.get("xAxis"),n=s.getSeriesItem(a,Math.max(0,s.valueToPosition(e)),.5,!0);return n?n.get(i):t}_getStockChart(){return this.get("series").chart.getPrivate("stockChart")}_getSprite(e,t){for(let i=0,a=e.length;i<a;i++){let a=e.getIndex(i);if(a&&a.get("userData")==t)return a}}_selectDrawing(e,t,i){if(this._getStockChart().get("drawingSelectionEnabled")||i)if(this._isSelecting=!0,-1!=this._selected.indexOf(e))t?this._unselectDrawing(e):this.unselectAllDrawings();else{t||(this._hideResizer(),this.unselectAllDrawings());let i=this._getSprite(this.selectors,e);i||(i=this.selectorContainer.children.push(this.selectors.make()),this.selectors.push(i)),i.show(0),i.set("userData",e),D.move(this._selected,e),this._dispatchStockEvent("drawingselected",this.indexToDrawingId(e),e),this.markDirty()}}_unselectDrawing(e){const t=this._getSprite(this.selectors,e);t&&(t.hide(0),D.remove(this._selected,e),this._dispatchStockEvent("drawingunselected",this.indexToDrawingId(e),e))}_updateSelectors(){this.selectors.each((e=>{const t=e.get("userData");this._updateSelector(e,t)}))}_updateSelector(e,t){let i,a,s,n;const r=this.get("selectorPadding",5);D.each(this.dataItems,(e=>{const r=e.dataContext;if(r&&r.index==t){let t=e.get("point");t&&(null==i&&(i=t.x),i=Math.min(i,t.x),null==a&&(a=t.x),a=Math.max(a,t.x),null==s&&(s=t.y),s=Math.min(s,t.y),null==n&&(n=t.y),n=Math.max(n,t.y))}})),null!=a&&null!=i&&null!=s&&null!=n&&e.setAll({width:a-i+2*r,height:n-s+2*r,x:i-r,y:s-r})}indexToDrawingId(e){let t;return D.eachContinue(this.dataItems,(i=>{const a=i.dataContext;return a.index!=e||(t=a.drawingId,!1)})),t}_getContext(e){let t;return D.eachContinue(this.dataItems,(i=>{const a=i.dataContext;return a.index!=e||!a.sprite||(t=a,!1)})),t}getContext(e){const t=this.getIndex(e);if(null!=t)return this._getContext(t)}unselectAllDrawings(){const e=this._getStockChart();return e?e.unselectDrawings():0}unselectDrawings(){let e=0;for(let t=this._selected.length-1;t>=0;t--)this._unselectDrawing(this._selected[t]),e++;return e}selectDrawing(e,t){const i=this.getIndex(e);null!=i&&this._selectDrawing(i,t)}unselectDrawing(e){const t=this.getIndex(e);null!=t&&this._unselectDrawing(t)}deleteSelected(){for(let e=this._selected.length-1;e>=0;e--)this.disposeIndex(this._selected[e])}deleteDrawing(e){const t=this.getIndex(e);null!=t&&this.disposeIndex(t)}cancelDrawing(){this._isDrawing&&this._disposeIndex(this._index),this.isDrawing(!1)}}Object.defineProperty(me,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DrawingSeries"}),Object.defineProperty(me,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:v.a.classNames.concat([me.className])});var fe=i(95);class be extends me{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"polyline"}),Object.defineProperty(this,"_drawingLine",{enumerable:!0,configurable:!0,writable:!0,value:this.mainContainer.children.push(fe.a.new(this._root,{forceInactive:!0}))})}_prepareChildren(){super._prepareChildren(),this.strokes.template.setAll({fill:Object(T.b)(16777215),fillOpacity:0}),this.isDirty("fillShape")&&(this.get("fillShape")?this.fills.template.setAll({visible:!0,forceHidden:!1,fillOpacity:this.get("fillOpacity"),fill:this.get("fillColor")}):this.fills.template.setAll({visible:!1}))}_handlePointerClick(e){if(this._drawingEnabled)if(super._handlePointerClick(e),"grip"==e.target.get("userData"))this._endPolyline(e.target.dataItem);else{if(!this._isDragging&&(this.isDrawing(!0),this._hideResizer(e.target),0==this.unselectAllDrawings())){if(0==this._index&&(this._index=1),0==this._pIndex){this._increaseIndex();const e={stroke:this._getStrokeTemplate(),fill:this._getFillTemplate(),index:this._index,corner:"e",drawingId:this._drawingId};this._setContextSprite(e),this.data.push(e)}if(this._drawingLine.show(),this._addPoint(e),this.get("fillShape")&&(1==this._pIndex?this._addPoint(e,!0):this._pIndex>1&&this.data.moveValue(this.data.getIndex(this.data.length-1),this.data.length-2)),this._pIndex-1==this.get("pointCount",1e3))return void this._endPolyline()}this._drawingLine.set("stroke",this.get("strokeColor"))}}_setContextSprite(e){e.sprite=this.mainContainer}disableDrawing(){super.disableDrawing(),this._endPolyline()}clearDrawings(){super.clearDrawings(),this._drawingLine.hide()}_addPoint(e,t){const i=this.chart;if(i){const a=this.get("xAxis"),s=this.get("yAxis"),n=i.plotContainer.toLocal(e.point),r=this._getXValue(a.positionToValue(a.coordinateToPosition(n.x))),o=this._getYValue(s.positionToValue(s.coordinateToPosition(n.y)),r),l=this.dataItems,c=l.length;this.data.push({valueY:o,valueX:r,index:this._index,corner:this._pIndex,drawingId:this._drawingId,closing:t}),this.setPrivate("startIndex",0),this.setPrivate("endIndex",c);const h=l[c];this._positionBullets(h),this._setXLocation(h,r),this._pIndex++}}_endPolyline(e){if(e||(e=this.dataItems[this.dataItems.length-1]),e){this._pIndex=0;const t=e.dataContext,i=t.index;if(0==t.corner){this.data.push({valueX:e.get("valueX"),valueY:e.get("valueY"),index:i,corner:"c",closing:!0,drawingId:this._drawingId});const t=this.dataItems,a=t.length-1;this.setPrivate("startIndex",0),this.setPrivate("endIndex",a),e=t[a],this._positionBullets(e),this._setXLocation(e,e.get("valueX",0))}this._drawingLine.hide(),this.isDrawing(!1),this._dispatchAdded()}}_dispatchAdded(){this._dispatchStockEvent("drawingadded",this._drawingId,this._index)}_handlePointerMove(e){if(super._handlePointerMove(e),this._isDrawing){const e=this._movePointerPoint;if(e){const t=this.dataItems,i=t.length;if(i>0){const a=[],s=t[i-1].get("point");if(s&&a.push(s),a.push(e),this.get("fillShape")){const e=t[i-2];if(e){const t=e.get("point");t&&a.push(t)}}a.length>1&&this._drawingLine.set("points",a)}}}}_updateElements(){D.each(this.dataItems,(e=>{const t=e.dataContext;if(t){if(t.closing&&this._di[t.index]){const i=this._di[t.index][0],a=i.get("valueX",0),s=i.get("valueY");this._setContext(e,"valueX",a),this._setContext(e,"valueY",s,!0),this._setXLocation(e,a),this._positionBullets(e);const n=e.bullets;n&&D.each(n,(e=>{const t=e.get("sprite");t&&t.set("forceHidden",!0)}))}}}))}cancelDrawing(){super.cancelDrawing(),this._drawingLine.hide(0)}}Object.defineProperty(be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PolylineSeries"}),Object.defineProperty(be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:me.classNames.concat([be.className])});class ve extends me{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"line"}),Object.defineProperty(this,"_updateExtension",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lines",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ue.c(de.a.new({}),(()=>fe.a._new(this._root,{},[this.lines.template]))))}),Object.defineProperty(this,"hitLines",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ue.c(de.a.new({}),(()=>fe.a._new(this._root,{},[this.hitLines.template]))))}),Object.defineProperty(this,"_di",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_hitLines",{enumerable:!0,configurable:!0,writable:!0,value:[]})}makeLine(){const e=this.lines.make();return this.mainContainer.children.push(e),this.lines.push(e),e}makeHitLine(){const e=this.hitLines.make();return e.addTag("hit"),this.mainContainer.children.push(e),this.hitLines.push(e),e}_afterNew(){super._afterNew();const e=this.lines.template;e.events.on("pointerover",(e=>{this._showSegmentBullets(e.target.get("userData"))})),this.strokes.template.set("forceInactive",!0),e.events.on("pointerout",(e=>{const t=e.target.get("userData"),i=this._lines[t];i&&i.unhover();const a=this._getStrokeIndex(t),s=this.strokes.getIndex(a);s&&s.unhover()}));const t=this.hitLines.template;t.events.on("pointerover",(e=>{const t=e.target.get("userData");this._showSegmentBullets(t);const i=this._lines[t];i&&i.hover();const a=this._getStrokeIndex(t),s=this.strokes.getIndex(a);s&&s.hover()})),t.events.on("click",(e=>{const t=e.target.get("userData");this._erasingEnabled?this._disposeIndex(t):this._selectDrawing(t,e.originalEvent.ctrlKey)})),t.events.on("dragstart",(e=>{const t=e.target.get("userData"),i=this._lines[t];i&&i.dragStart(e);const a=this._getStrokeIndex(t),s=this.strokes.getIndex(a);s&&s.dragStart(e)})),t.events.on("dragstop",(e=>{const t=e.target.get("userData");this.markDirtyValues(),e.target.setAll({x:0,y:0});const i=this._lines[t];i&&(i.dragStop(e),i.setAll({x:0,y:0}));const a=this._getStrokeIndex(t),s=this.strokes.getIndex(a);s&&(s.dragStop(e),s.setAll({x:0,y:0}))})),t.events.on("pointerout",(e=>{const t=e.target.get("userData"),i=this._lines[t];i&&i.unhover();const a=this._getStrokeIndex(t),s=this.strokes.getIndex(a);s&&s.unhover()}))}_updateElements(){const e=this.chart;if(e){const t=2*Math.max(e.plotContainer.width(),e.plotContainer.height());for(let e=0;e<this._lines.length;e++){if(this._lines[e]){const i=this._di[e].p1,a=this._di[e].p2;if(i&&a){const s=i.get("point"),n=a.get("point");if(s&&n){const i=Math.max(Math.abs(t-s.x),Math.abs(t-n.x),Math.abs(t-s.y),Math.abs(t-n.y),Math.abs(s.x),Math.abs(n.x),Math.abs(s.y),Math.abs(n.y));let a=x.getAngle(n,s);const r={x:s.x+i*x.cos(a),y:s.y+i*x.sin(a)},o={x:n.x-i*x.cos(a),y:n.y-i*x.sin(a)};this._updateLine(e,r,o,s,n)}}}}}}_updateLine(e,t,i,a,s){const n=this._lines[e],r=this._hitLines[e];let o=[[[t,a]],[[s,i]]],l=[[[t,i]]];n.set("segments",o),r.set("segments",l)}_handlePointerClickReal(e){this._isDragging||this._isSelecting||(this._isDrawing?(this.isDrawing(!1),this._dispatchStockEvent("drawingadded",this._drawingId,this._index)):(0==this.unselectAllDrawings()&&(this.isDrawing(!0),this._increaseIndex(),this._addPoints(e,this._index)),this._hideResizer(e.target)))}_handlePointerClick(e){this._drawingEnabled&&(super._handlePointerClick(e),this._handlePointerClickReal(e))}_handlePointerMove(e){super._handlePointerMove(e),this._handlePointerMoveReal(e)}_handlePointerMoveReal(e){if(this._isDrawing){const e=this._movePointerPoint,t=this._index,i=this._di[t];if(e&&i){const a=this.get("xAxis"),s=this.get("yAxis"),n=a.positionToValue(a.coordinateToPosition(e.x)),r=this._getXValue(n),o=this._getYValue(s.positionToValue(s.coordinateToPosition(e.y)),n),l=i.p1,c=i.p2;l&&c&&(this._setContext(c,"valueX",r,!0),this._setContext(c,"valueY",o,!0),this._setXLocation(l,l.get("valueX",0)),this._setXLocation(c,r),this._updateSegment(t))}}}_createElements(e){if(!this._lines[e]){const t=this.makeLine();this._lines[e]=t;const i=this.makeHitLine();this._hitLines[e]=i;const a=this.dataItems[this.dataItems.length-1].dataContext;a.sprite=t;let s=this.get("showExtension",!0),n=this.get("strokeColor",this.get("stroke"));const r=a.stroke;r&&(n=r.get("stroke")),a&&(s=a.showExtension),t.setPrivate("visible",s);const o={stroke:n,userData:e};t.setAll(o),i.setAll(o),this._updateSegment(e)}}_addTemplates(e){this.data.push({stroke:this._getStrokeTemplate(),fill:this._getFillTemplate(),index:e,showExtension:this.get("showExtension",!0),corner:"e",drawingId:this._drawingId})}addPoints(e,t){const i=this.chart;this._addTemplates(t),e=i.plotContainer.toLocal(e);const a=this.get("xAxis"),s=this.get("yAxis"),n=a.positionToValue(a.coordinateToPosition(e.x)),r=this._getXValue(n),o=this._getYValue(s.positionToValue(s.coordinateToPosition(e.y)),n);this._addPointsReal(r,o,t)}_addPoints(e,t){this.addPoints(e.point,t)}_addPointsReal(e,t,i){this._addPoint(e,t,"p1",i),this._addPoint(e,t,"p2",i)}_addPoint(e,t,i,a){this.data.push({valueY:t,valueX:e,corner:i,index:a,drawingId:this._drawingId})}disposeDataItem(e){super.disposeDataItem(e);const t=e.dataContext;if(t){const e=t.index,i=this._lines[e];i&&(this.lines.removeValue(i),delete this._lines[e],i.dispose());const a=this._hitLines[e];a&&(this.hitLines.removeValue(a),delete this._hitLines[e],a.dispose())}}setInteractive(e){super.setInteractive(e),this.hitLines.template.set("forceInactive",!e),this.lines.template.set("forceInactive",!e)}enableDrawingSelection(e){super.enableDrawingSelection(e),this.hitLines.template.set("forceInactive",!e),this.lines.template.set("forceInactive",!e),this.strokes.template.set("forceInactive",!0)}_applySettings(e,t){super._applySettings(e,t);let i=this._getContext(e);if(i){let e=i.sprite;e&&t&&t.stroke&&e.set("stroke",t.stroke)}}addLine(e){this._increaseIndex(),this.addPoints(e,this._index),this._updateSegment(this._index),this._dispatchStockEvent("drawingadded",this._drawingId,this._index)}}Object.defineProperty(ve,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SimpleLineSeries"}),Object.defineProperty(ve,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:me.classNames.concat([ve.className])});class _e extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_di",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"rectangle"})}_updateSegment(e){const t=this._di[e].p1,i=this._di[e].p2;if(this.get("series")&&t&&i){const e=this.get("field")+"Y";let a=t.get(e),s=i.get(e);this._setContext(t,"valueY",a,!0),this._setContext(i,"valueY",s,!0),this._positionBullets(t),this._positionBullets(i)}}_setXLocation(e,t){this.get("snapToData")?e.set("locationX",0):this._setXLocationReal(e,t)}_updateChildren(){super._updateChildren();const e=this.chart;if(this.fills.clear(),e)for(let t=0;t<this._lines.length;t++){if(this._lines[t]){const e=this._di[t].p1,i=this._di[t].p2,a=this._di[t].e.dataContext,s=this.makeFill(this.fills);for(let t=this.dataItems.indexOf(e);t>=0;t--){const e=this.dataItems[t].dataContext.fill;e&&(s.template=e)}const n=[this.dataItems.indexOf(e),this.dataItems.indexOf(i)];let r=this.get("fillColor",this.get("fill"));const o=a.fill;o&&(r=o.get("fill"));const l={userData:n,fill:r};s.setAll(l);const c=e.get("point"),h=i.get("point");if(c&&h){s.set("draw",(e=>{e.moveTo(c.x,c.y),e.lineTo(h.x,c.y),e.lineTo(h.x,h.y),e.lineTo(c.x,h.y),e.lineTo(c.x,c.y)}));const e=this.strokes.getIndex(this._getStrokeIndex(t));e&&e.set("draw",(e=>{e.moveTo(c.x,c.y),e.lineTo(h.x,c.y),e.lineTo(h.x,h.y),e.lineTo(c.x,h.y),e.lineTo(c.x,c.y)})),this._updateOthers(t,s,c,h)}}}}_updateOthers(e,t,i,a){}_drawFill(){}_updateLine(){}}Object.defineProperty(_e,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RectangleSeries"}),Object.defineProperty(_e,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([_e.className])});class ye extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_di",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"parallelchannel"}),Object.defineProperty(this,"_firstClick",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_addPointsReal(e,t,i){this._addPoint(e,t,"p1",i),this._addPoint(e,t,"p2",i),this._addPoint(e,t,"p3",i),this._addPoint(e,t,"p4",i),this._addPoint(e,t,"m1",i),this._addPoint(e,t,"m2",i)}_handlePointerClickReal(e){this._isDragging||(this._isDrawing?(this._firstClick||(this.isDrawing(!1),this._dispatchStockEvent("drawingadded",this._drawingId)),this._firstClick=!1):this._firstClick||0==this.unselectDrawings()&&(this.isDrawing(!0),this._hideResizer(e.target),this._increaseIndex(),this._addPoints(e,this._index),this._firstClick=!0))}_handlePointerMoveReal(e){if(this._isDrawing){const e=this._movePointerPoint;if(e){const t=this.get("xAxis"),i=this.get("yAxis"),a=this._getXValue(t.positionToValue(t.coordinateToPosition(e.x))),s=this._getYValue(i.positionToValue(i.coordinateToPosition(e.y)),a),n=this._index,r=this._di[n].p1,o=this._di[n].p2,l=this._di[n].p3,c=this._di[n].p4,h=this._di[n].m1,d=this._di[n].m2;r&&o&&(this._firstClick?(this._setContext(o,"valueX",a),this._setContext(o,"valueY",s,!0),this._setXLocation(r,r.get("valueX",0)),this._setXLocation(l,l.get("valueX",0)),this._setXLocation(o,a),this._setContext(c,"valueX",a),this._setContext(c,"valueY",s,!0),this._setXLocation(c,a),this._setContext(h,"valueX",a),this._setContext(h,"valueY",s,!0),this._setXLocation(h,a),this._setContext(d,"valueX",a),this._setContext(d,"valueY",s,!0),this._setXLocation(d,a)):(this._setContext(c,"valueY",s,!0),this._setContext(l,"valueY",r.get("valueY",0)+s-o.get("valueY",0),!0),this._updateMiddlePoints(n)),this._updateSegment(n))}}}_updateMiddlePoints(e){const t=this._di[e].p1,i=this._di[e].p2,a=this._di[e].p3,s=this._di[e].p4,n=this._di[e].m1,r=this._di[e].m2,o=t.get("valueX",0),l=i.get("valueX",0),c=a.get("valueX",0),h=s.get("valueX",0),d=t.get("valueY",0),u=i.get("valueY",0),g=a.get("valueY",0),p=s.get("valueY",0),m=Math.round(o+(l-o)/2);this._setContext(n,"valueY",d+(u-d)/2,!0),this._setContext(n,"valueX",m,!0),this._setXLocation(n,m);const f=c+(h-c)/2;if(this._setContext(r,"valueY",g+(p-g)/2,!0),this._setContext(r,"valueX",f,!0),this._setXLocation(r,f),n.bullets){const e=n.bullets[0].get("sprite");if(e){const a=t.get("point"),s=i.get("point");a&&s&&(e.set("x",a.x+(s.x-a.x)/2),e.set("y",a.y+(s.y-a.y)/2))}}if(r.bullets){const e=r.bullets[0].get("sprite");if(e){const t=a.get("point"),i=s.get("point");t&&i&&(e.set("x",t.x+(i.x-t.x)/2),e.set("y",t.y+(i.y-t.y)/2))}}}_updateChildren(){super._updateChildren();const e=this.chart;if(this.fills.clear(),e)for(let t=0;t<this._lines.length;t++){const e=this._lines[t];if(e){const i=this._di[t].p1,a=this._di[t].p2,s=this._di[t].p3,n=this._di[t].p4,r=this._di[t].e.dataContext,o=this.makeFill(this.fills);for(let e=this.dataItems.indexOf(i);e>=0;e--){const t=this.dataItems[e].dataContext.fill;t&&(o.template=t)}const l=[this.dataItems.indexOf(i),this.dataItems.indexOf(a)];let c=this.get("fillColor",this.get("fill"));const h=r.fill;h&&(c=h.get("fill"));const d={userData:l,fill:c};o.setAll(d);const u=i.get("point"),g=a.get("point"),p=s.get("point"),m=n.get("point");if(u&&g&&p&&m){o.set("draw",(e=>{e.moveTo(u.x,u.y),e.lineTo(g.x,g.y),e.lineTo(m.x,m.y),e.lineTo(p.x,p.y),e.lineTo(u.x,u.y)}));const i=this.strokes.getIndex(this._getStrokeIndex(t));i&&i.set("draw",(e=>{e.moveTo(u.x,u.y),e.lineTo(g.x,g.y),e.moveTo(p.x,p.y),e.lineTo(m.x,m.y)})),e.set("draw",(e=>{e.moveTo(u.x,u.y+(p.y-u.y)/2),e.lineTo(g.x,g.y+(m.y-g.y)/2)})),this._updateOthers(t,o,u,g),this._updateMiddlePoints(t)}}}}_handleBulletDraggedReal(e,t){const i=this.get("xAxis"),a=this.get("yAxis"),s=e.dataContext,n=s.index,r=this._di[n].p1,o=this._di[n].p2,l=this._di[n].p3,c=this._di[n].p4,h=this._di[n].m1,d=this._di[n].m2;if(r&&o&&l&&c){const h=l.get("valueY",0)-r.get("valueY",0),d=o.get("valueY",0)-r.get("valueY",0),u=c.get("valueY",0)-l.get("valueY",0),g=this._getXValue(i.positionToValue(i.coordinateToPosition(t.x))),p=this._getYValue(a.positionToValue(a.coordinateToPosition(t.y)),g);this._setContext(e,"valueX",g),this._setContext(e,"valueY",p,!0),this._setXLocation(e,g);const m=s.corner;"p1"==m?(this._setContext(l,"valueX",g),this._setContext(l,"valueY",p+h,!0),this._setXLocation(l,g)):"p3"==m?(this._setContext(r,"valueX",g),this._setContext(r,"valueY",p-h,!0),this._setXLocation(r,g)):"p2"==m?(this._setContext(c,"valueX",g),this._setContext(c,"valueY",p+h,!0),this._setXLocation(c,g)):"p4"==m?(this._setContext(o,"valueX",g),this._setContext(o,"valueY",p-h,!0),this._setXLocation(o,g)):"m1"==m?(this._setContext(r,"valueY",p-d/2,!0),this._setContext(o,"valueY",p+d/2,!0)):"m2"==m&&(this._setContext(l,"valueY",p-u/2,!0),this._setContext(c,"valueY",p+u/2,!0)),this._updateMiddlePoints(n)}this._positionBullets(r),this._positionBullets(o),this._positionBullets(l),this._positionBullets(c),this._positionBullets(h),this._positionBullets(d)}_updateOthers(e,t,i,a){}_drawFill(){}_updateLine(){}}Object.defineProperty(ye,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ParallelChannelSeries"}),Object.defineProperty(ye,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([ye.className])});var we=i(172);class xe extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_arrows",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"arrows",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ue.c(de.a.new({}),(()=>we.a._new(this._root,{themeTags:["arrow"]},[this.arrows.template]))))})}_afterNew(){super._afterNew(),this.lines.template.set("forceHidden",!0),this.bullets.push(((e,t,i)=>{const a=i.dataContext;if("p2"==a.corner){const e=a.index,t=this._di[e].e;let s=this.get("strokeColor",this.get("stroke"));if(t){const e=t.dataContext;if(e){const t=e.stroke;t&&(s=t.get("stroke"))}}const n=i.bullets;if(n){const e=n[0];if(e){const t=e.get("sprite");if(t){const e=t.children.getIndex(0);e&&e.set("scale",.1)}}}const r=this.makeArrow();return r.setAll({forceInactive:!0,fill:s,userData:a.index}),oe.a.new(this._root,{sprite:r,locationX:void 0})}}))}clearDrawings(){super.clearDrawings(),this.arrows.clear()}_changed(){super._changed(),this.arrows.each((e=>{const t=e.get("userData");if(this._di[t]){const i=this._di[t].p1,a=this._di[t].p2,s=i.get("point"),n=a.get("point");if(s&&n){const i=x.getAngle(s,n)+90;e.set("rotation",i);const a=e.width(),r=this._getStrokeIndex(t),o=this.strokes.getIndex(r);o&&e.set("scale",(a+2*o.get("strokeWidth",2))/a)}}}))}_applySettings(e,t){let i;super._applySettings(e,t),D.each(this.dataItems,(t=>{const a=t.dataContext;a.index==e&&a.settings&&(i=a.settings)}));const a=pe.copy(t);void 0!=t.stroke?a.fill=t.stroke:delete a.fill,void 0!=t.strokeOpacity?a.fillOpacity=t.strokeOpacity:delete a.fillOpacity,a.strokeOpacity=0;const s=this._getSprite(this.arrows,e);if(s){const e=s.states.lookup("default");pe.each(a,((t,a)=>{s.set(t,a),e.set(t,a),i&&i.set(t,a)}))}}makeArrow(){const e=this.arrows.make();return this.arrows.push(e),e}_updateLine(e,t,i,a,s){super._updateLine(e,t,i,a,s)}}Object.defineProperty(xe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LineArrowSeries"}),Object.defineProperty(xe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([xe.className])});class ke extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"horizontal"})}_afterNew(){super._afterNew(),this.lines.template.set("forceHidden",!0)}_handleBulletDragged(e){super._handleBulletDragged(e);const t=e.target.dataItem.dataContext;if(t){const e=t.index,i=this._di[e].p1,a=this._di[e].p2,s=this._di[e].p3,n=this._movePointerPoint;if(i&&a&&s&&n){const e=this.get("yAxis"),t=this.get("xAxis"),r=this._getXValue(t.positionToValue(t.coordinateToPosition(n.x))),o=this._getYValue(e.positionToValue(e.coordinateToPosition(n.y)),r),l=t.getPrivate("min",0),c=t.getPrivate("max",1);this._setContext(i,"valueY",o,!0),this._setContext(a,"valueY",o,!0),this._setContext(s,"valueY",o,!0),this._setContext(i,"valueX",l-200*(c-l)),this._setContext(a,"valueX",r),this._setContext(s,"valueX",c+200*(c-l)),this._setXLocation(a,a.get("valueX",0)),this._positionBullets(a)}}}_handlePointerMoveReal(){}_updateSegment(e){if(this._di[e]){const t=this._di[e].p1,i=this._di[e].p3;if(t&&i){const e=this.get("xAxis"),a=e.getPrivate("min",0),s=e.getPrivate("max",1);this._setContext(t,"valueX",a-200*(s-a),!0),this._setContext(i,"valueX",s+200*(s-a),!0)}}}_handlePointerClickReal(e){this._drawingEnabled&&(this._isDragging||0==this.unselectAllDrawings()&&(this._increaseIndex(),this._addPoints(e,this._index),this.isDrawing(!1),this._updateSegment(this._index),this._dispatchStockEvent("drawingadded",this._drawingId,this._index)))}_addPointsReal(e,t,i){super._addPointsReal(e,t,i),this._addPoint(e,t,"p3",i)}}Object.defineProperty(ke,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLineSeries"}),Object.defineProperty(ke,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([ke.className])});class Ce extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"vertical"})}_afterNew(){super._afterNew(),this.lines.template.set("forceHidden",!0)}_handleBulletDragged(e){super._handleBulletDragged(e);const t=e.target.dataItem.dataContext;if(t){const e=t.index,i=this._di[e].p1,a=this._di[e].p2,s=this._di[e].p3,n=this._movePointerPoint;if(i&&a&&s&&n){const e=this.get("yAxis"),t=this.get("xAxis"),r=this._getXValue(t.positionToValue(t.coordinateToPosition(n.x))),o=this._getYValue(e.positionToValue(e.coordinateToPosition(n.y)),r),l=e.getPrivate("min",0),c=e.getPrivate("max",1);this._setContext(i,"valueY",l-10*(c-l),!0),this._setContext(a,"valueY",o,!0),this._setContext(s,"valueY",c+10*(c-l),!0),this._setContext(i,"valueX",r),this._setContext(a,"valueX",r),this._setContext(s,"valueX",r),this._setXLocation(i,r),this._setXLocation(a,r),this._setXLocation(s,r),this._positionBullets(i),this._positionBullets(a),this._positionBullets(s)}}}_updateSegment(e){if(this._di[e]){const t=this._di[e].p1,i=this._di[e].p3;if(t&&i){const e=this.get("yAxis"),a=e.getPrivate("min",0),s=e.getPrivate("max",1);this._setContext(t,"valueY",a-10*(s-a),!0),this._setContext(i,"valueY",s+10*(s-a),!0)}}}_handlePointerMoveReal(){}_handlePointerClickReal(e){this._drawingEnabled&&(this._isDragging||0==this.unselectAllDrawings()&&(this._increaseIndex(),this._addPoints(e,this._index),this.isDrawing(!1),this._hideResizer(),this._updateSegment(this._index),this._dispatchStockEvent("drawingadded",this._drawingId,this._index)))}_addPointsReal(e,t,i){super._addPointsReal(e,t,i),this._addPoint(e,t,"p3",i)}}Object.defineProperty(Ce,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLineSeries"}),Object.defineProperty(Ce,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([Ce.className])});class De extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"average"})}_afterNew(){super._afterNew(),this.setPrivate("allowChangeSnap",!1),this.set("snapToData",!0)}_updateSegment(e){if(this._di[e]){const t=this._di[e].p1,i=this._di[e].p2,a=this.get("series");if(a&&t&&i){let e=this._getXValue(t.get("valueX")),s=this._getXValue(i.get("valueX"));const n=this.get("xAxis"),r=n.getSeriesItem(a,Math.max(0,n.valueToPosition(e))),o=n.getSeriesItem(a,Math.min(1,n.valueToPosition(s))),l=this.get("field")+"Y";if(r&&o){let n=a.dataItems.indexOf(r),c=a.dataItems.indexOf(o);n>c&&([n,c]=[c,n]);let h=0,d=0;for(let e=n;e<=c;e++){const t=a.dataItems[e].get(l);null!=t&&(h+=t,d++)}const u=h/d;t.set("valueX",e),i.set("valueX",s),this._setContext(t,"valueX",e),this._setContext(i,"valueX",s),this._setContext(t,"valueY",u,!0),this._setContext(i,"valueY",u,!0),this._positionBullets(t),this._positionBullets(i)}}this._updateElements()}}}function Pe(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}function Se(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const i=[0,0,0,0,0];let a=0;for(let l=0;l<e.length;l++)null!==e[l][1]&&(a++,i[0]+=e[l][0],i[1]+=e[l][1],i[2]+=e[l][0]*e[l][0],i[3]+=e[l][0]*e[l][1],i[4]+=e[l][1]*e[l][1]);const s=a*i[2]-i[0]*i[0],n=a*i[3]-i[0]*i[1],r=0===s?0:Pe(n/s,t),o=Pe(i[1]/a-r*i[0]/a,t);return e.map((e=>{return[Pe(i=e[0],t),Pe(r*i+o,t)];var i}))}Object.defineProperty(De,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AverageSeries"}),Object.defineProperty(De,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([De.className])});class Ae extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"regression"})}_afterNew(){super._afterNew(),this.setPrivate("allowChangeSnap",!1),this.set("snapToData",!0)}_updateSegment(e){const t=this._di[e].p1,i=this._di[e].p2,a=this.get("series");if(a&&t&&i){const e=a.get("xAxis");let s=this._getXValue(t.get("valueX")),n=this._getXValue(i.get("valueX"));const r=e.getSeriesItem(a,e.valueToPosition(s)),o=e.getSeriesItem(a,e.valueToPosition(n)),l=this.get("field")+"Y";if(r&&o){const e=a.dataItems;let c=e.indexOf(r),h=e.indexOf(o),d=!1;c>h&&(d=!0,[c,h]=[h,c]);const u=[];let g=0;for(let t=c;t<=h;t++){const i=e[t];u.push([g,i.get(l)]),g++}const p=Se(u);if(p.length>1){const e=p[0],a=p[p.length-1];if(e&&a){let r=e[1],o=a[1];d&&([r,o]=[o,r]),this._setContext(t,"valueY",r,!0),this._setContext(i,"valueY",o,!0),this._setContext(t,"valueX",s),this._setContext(i,"valueX",n),this._positionBullets(t),this._positionBullets(i)}}}}}}Object.defineProperty(Ae,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RegressionSeries"}),Object.defineProperty(Ae,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([Ae.className])});class Ie extends me{constructor(){super(...arguments),Object.defineProperty(this,"_panX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_panY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"doodle"}),Object.defineProperty(this,"_down",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this.setPrivate("allowChangeSnap",!1),this.bullets.clear(),this.strokes.template.setAll({fill:Object(T.b)(16777215),fillOpacity:0})}_handlePointerMove(e){super._handlePointerMove(e),this._drawingEnabled&&this._isPointerDown&&this._handleBulletPosition(e)}_handleBulletPosition(e){const t=this.chart;if(t){const i=this.get("xAxis"),a=this.get("yAxis"),s=t.plotContainer.toLocal(e.point),n=this._getXValue(i.positionToValue(i.coordinateToPosition(s.x))),r=this._getYValue(a.positionToValue(a.coordinateToPosition(s.y)),n),o=this._index;this.data.push({valueY:r,valueX:n,index:o,corner:this._pIndex,drawingId:this._drawingId});const l=this.dataItems.length,c=this.dataItems[l-1];this._setXLocation(c,n),this._pIndex++,this.setPrivate("startIndex",0),this.setPrivate("endIndex",l)}}_handlePointerDown(e){const t=this.chart;if(t&&0==this.unselectAllDrawings()){super._handlePointerDown(e),this._increaseIndex(),this._pIndex=0,this._panX=t.get("panX"),this._panY=t.get("panY"),t.set("panX",!1),t.set("panY",!1);const i=t.get("cursor");i&&i.setPrivate("visible",!1),this._down=!0,this.data.push({stroke:this._getStrokeTemplate(),sprite:this.mainContainer,index:this._index,corner:this._pIndex,drawingId:this._drawingId})}}_handlePointerUp(e){super._handlePointerUp(e);const t=this.chart;t&&this._down&&(this._down=!1,this.setTimeout((()=>{t.set("panX",this._panX),t.set("panY",this._panY);const e=t.get("cursor");e&&e.setPrivate("visible",!0)}),100),this._dispatchStockEvent("drawingadded",this._drawingId,this._index))}}Object.defineProperty(Ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DoodleSeries"}),Object.defineProperty(Ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:me.classNames.concat([Ie.className])});class Te extends be{constructor(){super(...arguments),Object.defineProperty(this,"spriteResizer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"icon"})}_afterNew(){super._afterNew(),this.spriteResizer=this._getStockChart().spriteResizer,this.bullets.clear(),this.strokes.template.set("visible",!1),this.fills.template.set("visible",!1),this.bullets.push(((e,t,i)=>{const a=i.dataContext,s=a.settings;if(s){const t=y.a.new(e,{draggable:!0,themeTags:["icon"]},s);return a.sprite=t,this._addBulletInteraction(t),t.events.on("click",(e=>{const i=this.spriteResizer;i.get("sprite")==t?i.set("sprite",void 0):i.set("sprite",t)})),t.events.on("pointerover",(()=>{this._isHover=!0})),t.events.on("pointerout",(()=>{this._isHover=!1})),this.spriteResizer.set("sprite",void 0),t.on("scale",(e=>{s.set("scale",e)})),t.on("rotation",(e=>{s.set("rotation",e)})),oe.a.new(this._root,{locationX:void 0,sprite:t})}}))}_setContextSprite(e){}_handlePointerClick(e){if(this._selected.length>0)this._hideResizer(),this.unselectAllDrawings();else if(this._drawingEnabled&&!this._isHover){super._handlePointerClick(e);this.data.getIndex(this.data.length-1).settings=this._getIconTemplate(),this._increaseIndex(),this._di[this._index]={},this._dispatchStockEvent("drawingadded",this._drawingId,this._index)}this.isDrawing(!1)}disposeDataItem(e){super.disposeDataItem(e),this.spriteResizer.set("sprite",void 0),this._isHover=!1}_applySettings(e,t){let i,a;super._applySettings(e,t);let s=this._getContext(e);if(s&&(a=s.sprite,i=s.settings,a)){const e=this.get("iconSvgPath"),s=this.get("iconCenterX"),n=this.get("iconCenterY");a.set("svgPath",e),a.set("centerX",s),a.set("centerY",n);const r=a.states.lookup("default");r.set("svgPath",e),r.set("centerX",s),r.set("centerY",n),i&&(i.set("svgPath",e),i.set("centerX",s),i.set("centerY",n)),t&&pe.each(t,((e,t)=>{a.set(e,t),r.set(e,t),i&&i.set(e,t)}))}}_dispatchAdded(){}_getIconTemplate(){const e={},t=this.get("iconSvgPath");null!=t&&(e.svgPath=t);const i=this.get("iconScale");null!=i&&(e.scale=i);const a=this.get("iconCenterX");null!=a&&(e.centerX=a);const s=this.get("iconCenterY");null!=s&&(e.centerY=s);const n=this.get("strokeColor");null!=n&&(e.stroke=n);const r=this.get("strokeOpacity");null!=r&&(e.strokeOpacity=r);const o=this.get("fillColor");null!=o&&(e.fill=o);const l=this.get("fillOpacity");return null!=l&&(e.fillOpacity=l),de.a.new(e)}setInteractive(e){super.setInteractive(e),D.each(this.dataItems,(t=>{const i=t.bullets;i&&D.each(i,(t=>{const i=t.get("sprite");i&&i.set("forceInactive",!e)}))}))}_prepareChildren(){super._prepareChildren(),this.isDirty("iconSvgPath")&&D.each(this._selected,(e=>{this._applySettings(e)}))}_updateSelector(e,t){var i;const a=this._getContext(t);if(a){const s=a.sprite;if(s){s.dataItem==(null===(i=this.spriteResizer.get("sprite"))||void 0===i?void 0:i.dataItem)?e.hide(0):-1!=this._selected.indexOf(t)&&e.show(0);const a=this.get("selectorPadding",5);let n=s.bounds(),r=n.right-n.left+2*a,o=n.bottom-n.top+2*a;e.setAll({width:r,height:o,x:n.left-a,y:n.top-a})}}}toggleDrawing(e){D.each(this.dataItems,(t=>{const i=t.bullets;i&&D.each(i,(t=>{const i=t.get("sprite");i&&i.set("forceInactive",!e)}))}))}_handleBulletDragStart(e){this._hideResizer(e.target);const t=this._getStockChart();t&&t._dragStartDrawing(e)}_handleBulletDragStop(e){const t=this._getStockChart();t&&t._dragStopDrawing(e),this._root.events.once("frameended",(()=>{this._positionBullets(e.target.dataItem)}))}}Object.defineProperty(Te,"className",{enumerable:!0,configurable:!0,writable:!0,value:"IconSeries"}),Object.defineProperty(Te,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:be.classNames.concat([Te.className])});var Ne=i(170);class Oe extends be{constructor(){super(...arguments),Object.defineProperty(this,"spriteResizer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"label"}),Object.defineProperty(this,"_isEditing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isSelected",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this.spriteResizer=this._getStockChart().spriteResizer,this.strokes.template.set("visible",!1),this.fills.template.set("visible",!1),this.addTag(this._tag)}_dispatchAdded(){}_setContextSprite(e){}_tweakBullet(e,t){const i=t.dataContext,a=i.text,s=i.settings;if(s){const n=e.children.push(Ne.a.new(this._root,{themeTags:["label"],text:a,editOn:"none"},s));n.on("text",(e=>{i.text=e})),this.setPrivate("label",n),n.on("active",(()=>{if(this.setTimeout((()=>{this._isEditing=n.get("active",!1)}),200),!n.get("active")){this.setTimeout((()=>{n&&""==n.get("text")&&this._disposeIndex(i.index)}),100);const e=this._getStockChart(),t="drawingsupdated";e.events.isEnabled(t)&&e.events.dispatch(t,{type:t,target:e})}})),e.events.on("click",(e=>{const t=this.spriteResizer;t.get("sprite")==n?(this._isEditing=!0,n.set("active",!0),this._selectDrawing(i.index,e.originalEvent.ctrlKey,!0),t.set("sprite",void 0)):(this._isEditing=!1,this._isSelected=!0,t.set("sprite",n))})),e.events.on("pointerover",(()=>{this._isHover=!0})),e.events.on("pointerout",(()=>{this._isHover=!1})),n.on("scale",(e=>{s.set("scale",e)})),n.on("rotation",(e=>{s.set("rotation",e)})),n.events.on("boundschanged",(()=>{this.markDirty()})),i.sprite=e,i.label=n,this._tweakBullet2(n,t)}}_tweakBullet2(e,t){}_handlePointerClick(e){if(!this._isEditing){if(this._selected.length>0||this._isSelected)this._isSelected=!1,this._hideResizer(),this.unselectAllDrawings();else if(this._drawingEnabled&&!this._isHover){this.isDrawing(!0),this._increaseIndex(),this._di[this._index]={},this._addPoint(e);const t=this.data.getIndex(this.data.length-1);t.text="",t.index=this._index,t.corner=0,t.settings=this._getLabelTemplate(),this._afterTextSave(t),this._root.events.once("frameended",(()=>{t.label.set("active",!0),this._isEditing=!0})),this.spriteResizer.set("sprite",void 0),this._dispatchStockEvent("drawingadded",this._drawingId,this._index)}this.isDrawing(!1)}}_afterTextSave(e){}_getLabelTemplate(){const e={},t=this.get("labelFontSize");null!=t&&(e.fontSize=t);const i=this.get("labelFontFamily");null!=i&&(e.fontFamily=i);const a=this.get("labelFontWeight");null!=a&&(e.fontWeight=a);const s=this.get("labelFontStyle");null!=s&&(e.fontStyle=s);const n=this.get("labelFill");return null!=n&&(e.fill=n),de.a.new(e)}disposeDataItem(e){super.disposeDataItem(e),this.spriteResizer.set("sprite",void 0),this._isHover=!1}_hideAllBullets(){}_updateSelector(e,t){var i;const a=this._getContext(t);if(a){const s=a.sprite;if(s){s.dataItem==(null===(i=this.spriteResizer.get("sprite"))||void 0===i?void 0:i.dataItem)?e.hide(0):-1!=this._selected.indexOf(t)&&e.show(0);const a=this.get("selectorPadding",5);let n=s.bounds(),r=n.right-n.left+2*a,o=n.bottom-n.top+2*a;e.setAll({width:r,height:o,x:n.left-a,y:n.top-a})}}}_prepareChildren(){super._prepareChildren(),(this.isDirty("labelFontSize")||this.isDirty("labelFontFamily")||this.isDirty("labelFontWeight")||this.isDirty("labelFontStyle")||this.isDirty("labelFill"))&&D.each(this._selected,(e=>{this._applySettings(e)}))}_applySettings(e,t){super._applySettings(e,t);let i=this._getContext(e);if(i){let e=i.label;if(e){let t=i.settings;const a={fontSize:this.get("labelFontSize"),fontFamily:this.get("labelFontFamily"),fontWeight:this.get("labelFontWeight"),fontStyle:this.get("labelFontStyle"),fill:this.get("labelFill"),fillColor:this.get("fillColor")},s=e.states.lookup("default");a&&pe.each(a,((i,a)=>{e.set(i,a),s.set(i,a),t&&t.set(i,a)}))}}}_handleBulletDragStart(e){const t=this._getStockChart();t&&t._dragStartDrawing(e)}_handleBulletDragStop(e){const t=this._getStockChart();t&&t._dragStopDrawing(e),this._root.events.once("frameended",(()=>{this._positionBullets(e.target.dataItem)}))}toggleDrawing(e){this.grips.each((t=>{t.set("forceInactive",!e)}))}}Object.defineProperty(Oe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LabelSeries"}),Object.defineProperty(Oe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:be.classNames.concat([Oe.className])});var Me=i(80),je=i(36);class Fe extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"callout"})}_tweakBullet2(e,t){const i=t.dataContext,a=e.set("background",Me.a.new(this._root,{themeTags:["callout"]},i.bgSettings));i.background=a}_tweakBullet(e,t){super._tweakBullet(e,t),e.events.off("click");const i=t.dataContext,a=i.settings;if(a){const e=this.getPrivate("label");if(e){e.events.on("positionchanged",(()=>{this._root.events.once("frameended",(()=>{this._updatePointer(e)}))})),e.events.on("click",(t=>{const a=this.spriteResizer;a.get("sprite")==e?(this._isEditing=!0,e.set("active",!0),this._selectDrawing(i.index,t.originalEvent.ctrlKey,!0),a.set("sprite",void 0)):(this._isEditing=!1,this._isSelected=!0,this._selectDrawing(i.index,t.originalEvent.ctrlKey,!0),a.set("sprite",e)),this._erasingEnabled&&this._disposeIndex(i.index)})),e.on("scale",(()=>{this._updatePointer(e)})),e.on("rotation",(()=>{this._updatePointer(e)})),e.setAll({draggable:!0}),e.on("x",(e=>{a.set("x",e)})),e.on("y",(e=>{a.set("y",e)}));const t=e.states.lookup("default");setTimeout((()=>{e.animate({key:"y",to:-e.height()/2-10,from:0,duration:t.get("stateAnimationDuration",500),easing:t.get("stateAnimationEasing",je.out(je.cubic))})}),50)}}}_updatePointer(e){const t=e.get("background");if(t instanceof Me.a){const i=e.parent;if(i){let e=i.toGlobal({x:0,y:0});e=t.toLocal(e),t.setAll({pointerX:e.x,pointerY:e.y})}}this.markDirty()}_afterTextSave(e){e.bgSettings=this._getBgTemplate()}_hideAllBullets(){}_getBgTemplate(){const e={},t=this.get("fillColor");null!=t&&(e.fill=t);const i=this.get("fillOpacity");null!=i&&(e.fillOpacity=i);const a=this.get("strokeOpacity");null!=a&&(e.strokeOpacity=a);const s=this.get("strokeColor");return null!=s&&(e.stroke=s),de.a.new(e)}_applySettings(e,t){super._applySettings(e,t);const i=this._getContext(e);if(i&&t){const e=i.background;if(e){let a=i.bgSettings;void 0!=t.fill&&(e.set("fill",t.fill),a.set("fill",t.fill)),void 0!=t.fillOpacity&&(e.set("fillOpacity",t.fillOpacity),a.set("fillOpacity",t.fillOpacity)),void 0!=t.strokeOpacity&&(e.set("strokeOpacity",t.strokeOpacity),a.set("strokeOpacity",t.strokeOpacity)),void 0!=t.stroke&&(e.set("stroke",t.stroke),a.set("stroke",t.stroke))}}}}Object.defineProperty(Fe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CalloutSeries"}),Object.defineProperty(Fe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Oe.classNames.concat([Fe.className])});var Ee=i(169);class Ye extends me{constructor(){super(...arguments),Object.defineProperty(this,"_ellipses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"ellipse"}),Object.defineProperty(this,"_clickPX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_clickVY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ellipses",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ue.c(de.a.new({radiusX:0,radiusY:0}),(()=>Ee.a._new(this._root,{radiusX:0,radiusY:0,templateField:"settings"},[this.ellipses.template]))))})}makeEllipse(){const e=this.ellipses.make();return this.mainContainer.children.push(e),this.ellipses.push(e),e}_afterNew(){super._afterNew(),this.setPrivate("allowChangeSnap",!1),this.strokes.template.set("visible",!1),this.fills.template.set("visible",!1);const e=this.ellipses.template;e.events.on("pointerover",(e=>{this._showSegmentBullets(e.target.get("userData"))})),e.events.on("dragstart",(e=>{this.startDragItem(e,e.target.get("userData"))})),e.events.on("dragstop",(e=>{this.stopDragItem(e,e.target.get("userData"))})),e.events.on("click",(e=>{const t=e.target.get("userData");this._erasingEnabled?this._disposeIndex(t):this._selectDrawing(t,e.originalEvent.ctrlKey)}))}_applySettings(e,t){let i;super._applySettings(e,t),D.each(this.dataItems,(t=>{const a=t.dataContext;a.index==e&&a.settings&&(i=a.settings)}));const a=this._getSprite(this.ellipses,e);if(a){const e=a.states.lookup("default");pe.each(t,((t,s)=>{a.set(t,s),e.set(t,s),i&&i.set(t,s)}))}}_handleFillDragStop(e,t){super._handleFillDragStop(e,t);const i=this._di[t],a=i.b,s=i.t,n=i.r,r=i.l,o=this.get("xAxis");if(a&&s&&n&&r){const e=o.valueToPosition(r.get("valueX",0)),t=o.valueToPosition(n.get("valueX",0));let i=this._getXValue(o.positionToValue(e+(t-e)/2));this._setContext(s,"valueX",i),this._setContext(a,"valueX",i),this._setXLocation(s,i),this._setXLocation(a,i)}}_handleBulletDragged(e){const t=e.target.dataItem,i=t.get("valueX"),a=t.get("locationX"),s=t.get("valueY");super._handleBulletDragged(e);const n=this._movePointerPoint;if(t&&n){const e=t.dataContext,r=e.index,o=e.corner,l=this.get("xAxis"),c=this.get("yAxis"),h=this._getXValue(l.positionToValue(l.coordinateToPosition(n.x))),d=this._getYValue(c.positionToValue(c.coordinateToPosition(n.y)),h),u="valueX",g="valueY",p="valueYWorking",m=this._di[r],f=m.b,b=m.t,v=m.r,_=m.l;if(f&&b&&v&&_){if("b"==o){const e=b.get(p,0);this._setContext(f,g,d,!0);let t=e+(d-e)/2;this._setContext(v,g,t,!0),this._setContext(_,g,t,!0),this._setContext(f,u,i),f.set("locationX",a)}if("t"==o){const e=f.get(p,0);this._setContext(b,g,d,!0);let t=e+(d-e)/2;this._setContext(v,g,t,!0),this._setContext(_,g,t,!0),this._setContext(b,u,i),b.set("locationX",a)}if("l"==o){const e=v.get(u,0),t=l.valueToPosition(e),i=l.valueToPosition(h);this._setContext(_,u,h),this._setXLocation(_,h);let a=t+(i-t)/2,n=this._getXValue(l.positionToValue(a));this._setContext(b,u,n),this._setContext(f,u,n),this._setXLocation(b,n),this._setXLocation(f,n),this._setContext(_,g,s,!0)}if("r"==o){const e=_.get(u,0),t=l.valueToPosition(e),i=l.valueToPosition(h);this._setContext(v,u,h),this._setXLocation(v,h);let a=t+(i-t)/2,n=this._getXValue(l.positionToValue(a));this._setContext(b,u,n),this._setContext(f,u,n),this._setXLocation(b,n),this._setXLocation(f,n),this._setContext(v,g,s,!0)}}this._positionBullets(t)}}_handlePointerClick(e){this._drawingEnabled&&(super._handlePointerClick(e),this._isDragging||(this._isDrawing?(this.isDrawing(!1),this._dispatchStockEvent("drawingadded",this._drawingId,this._index)):0==this.unselectAllDrawings()&&(this._increaseIndex(),this.isDrawing(!0),this._hideResizer(e.target),this.bulletsContainer.show(),this._addPoints(e,this._index))))}_createElements(e,t){if(!this._ellipses[e]){const i=this.makeEllipse();i._setDataItem(t),this._ellipses[e]=i,i.setAll({userData:e}),(null===t||void 0===t?void 0:t.dataContext).sprite=i}}_handlePointerMove(e){if(super._handlePointerMove(e),this._isDrawing){const e=this._movePointerPoint;if(e){const t=this.get("xAxis"),i=this.get("yAxis"),a=this._index;if(this._di[a]){const s=this._di[a].t,n=this._di[a].b,r=this._di[a].l,o=this._di[a].r,l=this._clickVY,c=t.coordinateToPosition(e.x),h=this._clickPX,d=this._getXValue(t.positionToValue(t.coordinateToPosition(e.x))),u=this._getYValue(i.positionToValue(i.coordinateToPosition(e.y)),d);if(n&&r&&o&&s){this._setContext(n,"valueY",u,!0);const e=l+(u-l)/2,i=this._getXValue(t.positionToValue(h+(c-h)/2));this._setContext(o,"valueY",e,!0),this._setContext(r,"valueY",e,!0),this._setContext(n,"valueX",i),this._setContext(s,"valueX",i),this._setXLocation(n,i),this._setXLocation(s,i),this._setContext(o,"valueX",d),this._setXLocation(o,d)}}}}}_addPoints(e,t){const i=this.chart;if(i){this.data.push({settings:this._getEllipseTemplate(),stroke:this._getStrokeTemplate(),index:t,corner:"e",drawingId:this._drawingId});const a=this.get("xAxis"),s=this.get("yAxis"),n=i.plotContainer.toLocal(e.point);this._clickPX=a.coordinateToPosition(n.x);const r=this._getXValue(a.positionToValue(this._clickPX)),o=this._getYValue(s.positionToValue(s.coordinateToPosition(n.y)),r);this._clickVY=o,this._di[t]={},this._addPoint(r,o,"l",t),this._addPoint(r,o,"t",t),this._addPoint(r,o,"b",t),this._addPoint(r,o,"r",t)}}_addPoint(e,t,i,a){this.data.push({valueY:t,valueX:e,index:a,corner:i,drawingId:this._drawingId});const s=this.dataItems.length,n=this.dataItems[s-1];n&&(this._setXLocation(n,e),this.setPrivate("startIndex",0),this.setPrivate("endIndex",s))}_updateChildren(){super._updateChildren();let e=0;D.each(this._di,(t=>{if(t){const i=t.t,a=t.b,s=t.l,n=t.r;if(i&&a&&s&&n){const t=i.get("point"),r=a.get("point"),o=n.get("point"),l=s.get("point");if(t&&r&&o&&l){const i=(o.x-l.x)/2,a=(r.y-t.y)/2,s=l.x+i,n=t.y+a,c=this._ellipses[e];c&&c.setAll({x:s,y:n,radiusX:i,radiusY:a})}}}e++}))}disposeDataItem(e){super.disposeDataItem(e);const t=e.dataContext;if(t){const e=t.index,i=this._ellipses[e];i&&(delete this._ellipses[e],this.ellipses.removeValue(i),i.dispose())}}_getEllipseTemplate(){const e=this._getStrokeTemplate(),t=this.get("fillColor");null!=t&&e.set("fill",t);const i=this.get("fillOpacity");return null!=i&&e.set("fillOpacity",i),e}setInteractive(e){super.setInteractive(e),this.ellipses.template.set("forceInactive",!e)}enableDrawingSelection(e){super.enableDrawingSelection(e),this.ellipses.template.set("forceInactive",!e)}}Object.defineProperty(Ye,"className",{enumerable:!0,configurable:!0,writable:!0,value:"EllipseSeries"}),Object.defineProperty(Ye,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:me.classNames.concat([Ye.className])});class Xe extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"trendline"})}_afterNew(){super._afterNew(),this.setPrivate("allowChangeSnap",!1),this.set("snapToData",!0)}_updateSegment(e){const t=this._di[e].p1,i=this._di[e].p2,a=this.get("series");if(a&&t&&i){const e=this.get("xAxis");let s=this._getXValue(t.get("valueX")),n=this._getXValue(i.get("valueX"));const r=e.getSeriesItem(a,Math.max(0,e.valueToPosition(s))),o=e.getSeriesItem(a,Math.min(1,e.valueToPosition(n))),l=this.get("field")+"Y";if(r&&o){let e=r.get(l),a=o.get(l);this._setContext(t,"valueY",e,!0),this._setContext(i,"valueY",a,!0),this._setContext(t,"valueX",s),this._setContext(i,"valueX",n),this._positionBullets(t),this._positionBullets(i)}}}}Object.defineProperty(Xe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"TrendLineSeries"}),Object.defineProperty(Xe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([Xe.className])});class Le extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"quadrant"})}_afterNew(){super._afterNew(),this.strokes.template.set("visible",!1)}_updateSegment(e){const t=this._di[e].p1,i=this._di[e].p2;if(this.get("series")&&t&&i){let e=this._getXValue(t.get("valueX")),a=this._getXValue(i.get("valueX"));const s=this.get("field")+"Y";let n=this._getYValue(t.get(s),e,!0),r=this._getYValue(i.get(s),a,!0);this._setContext(t,"valueY",n,!0),this._setContext(i,"valueY",r,!0),this._positionBullets(t),this._positionBullets(i)}}_updateChildren(){super._updateChildren();const e=this.chart;if(this.fills.clear(),e)for(let t=0;t<this._lines.length;t++){const e=this._lines[t];if(e){const i=this._di[t].p1,a=this._di[t].p2,s=this._di[t].e.dataContext,n=this.makeFill(this.fills),r=this.makeFill(this.fills);for(let e=this.dataItems.indexOf(i);e>=0;e--){const t=this.dataItems[e].dataContext.fill;t&&(n.template=t,r.template=t)}const o=[this.dataItems.indexOf(i),this.dataItems.indexOf(a)];let l=this.get("fillColor",this.get("fill"));const c=s.fill;c&&(l=c.get("fill"));const h={userData:o,fill:l};n.setAll(h),r.setAll(h),r.set("forceInactive",!0);const d=i.get("point"),u=a.get("point");if(d&&u){const t=(u.y-d.y)/4,i=d.y+t,a=d.y+2*t,s=d.y+3*t;e.set("draw",(e=>{e.moveTo(d.x,d.y),e.lineTo(u.x,d.y),e.moveTo(d.x,i),e.lineTo(u.x,i),e.moveTo(d.x,a),e.lineTo(u.x,a),e.moveTo(d.x,s),e.lineTo(u.x,s),e.moveTo(d.x,u.y),e.lineTo(u.x,u.y)})),n.set("draw",(e=>{e.moveTo(d.x,d.y),e.lineTo(u.x,d.y),e.lineTo(u.x,u.y),e.lineTo(d.x,u.y),e.lineTo(d.x,d.y)})),r.set("draw",(e=>{e.moveTo(d.x,i),e.lineTo(u.x,i),e.lineTo(u.x,s),e.lineTo(d.x,s),e.lineTo(d.x,i)}))}}}}_drawFill(){}_updateLine(){}}Object.defineProperty(Le,"className",{enumerable:!0,configurable:!0,writable:!0,value:"QuadrantLineSeries"}),Object.defineProperty(Le,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([Le.className])});var Ve=i(33);class Re extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"fibonacci"}),Object.defineProperty(this,"_labels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_fills",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_strokes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ue.c(de.a.new({}),(()=>Ve.a._new(this._root,{},[this.labels.template]))))})}makeLabel(){const e=this.labels.make();return this.bulletsContainer.children.push(e),this.labels.push(e),e}_updateChildren(){super._updateChildren(),this._updateChildrenReal()}_getIndex(e){return e.get("userData")}_updateChildrenReal(){if(this.chart){const e=this.get("yAxis");for(let t=0;t<this._lines.length;t++){if(this._lines[t]){const i=this._di[t].p1,a=this._di[t].p2;if(i&&a){const s=i.get("point"),n=a.get("point");if(s&&n){const i=this.get("sequence",[]);let a=0;const r=this._labels[t],o=this._strokes[t],l=this._fills[t];for(let t=0;t<i.length;t++){const c=i[t]-1,h=r[t],d=l[t],u=o[t];let g=this.get("colors",[])[t],p=g;d.set("fill",g),d.set("fillOpacity",this.get("fillOpacity",0)),u.set("stroke",p),u.set("strokeOpacity",this.get("strokeOpacity",0));const m=s.y+(n.y-s.y)*a,f=s.y+(n.y-s.y)*-c,b=e.positionToValue(e.coordinateToPosition(f));d.setPrivate("visible",!0),u.setPrivate("visible",!0),d.set("draw",(e=>{e.moveTo(s.x,m),e.lineTo(n.x,m),e.lineTo(n.x,f),e.lineTo(s.x,f),e.lineTo(s.x,m)})),u.set("draw",(e=>{e.moveTo(s.x,f),e.lineTo(n.x,f)}));const v=h.dataItem;v&&v.set("value",b),h.setAll({x:n.x,y:f,fill:g}),h.text.markDirtyText(),a=-c}}}}}}}_createElements(e){if(super._createElements(e),!this._fills[e]){const t=[],i=[],a=[],s=this.get("sequence",[]);for(let n=0;n<s.length;n++){const r=this.makeLabel(),o=this.makeDataItem({});o.set("sequence",s[n]),r._setDataItem(o),t.push(r);const l=this.makeFill(this.fills);i.push(l),l.set("userData",e),l.states.remove("hover");const c=this.makeStroke(this.strokes);c.set("userData",e),a.push(c)}this._labels[e]=t,this._fills[e]=i,this._strokes[e]=a}}_drawFill(){}_drawStroke(){}_updateLine(){}_clearGraphics(){}disposeDataItem(e){super.disposeDataItem(e);const t=e.dataContext;if(t){const e=t.index,i=this._labels[e],a=this._fills[e],s=this._strokes[e];i&&(D.each(i,(e=>{e.dispose(),this.labels.removeValue(e)})),delete this._labels[e]),a&&(D.each(a,(e=>{this.fills.removeValue(e),e.dispose()})),delete this._fills[e]),s&&(D.each(s,(e=>{this.strokes.removeValue(e),e.dispose()})),delete this._strokes[e])}}}Object.defineProperty(Re,"className",{enumerable:!0,configurable:!0,writable:!0,value:"FibonacciSeries"}),Object.defineProperty(Re,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([Re.className])});class Be extends Re{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"fibonaccitimezone"})}_updateSegmentReal(e){const t=this._di[e];if(t){const e=t.p1,i=t.p2;e&&i&&(this._setContext(i,"valueY",e.get("valueY",0),!0),e.setRaw("locationX",0),i.setRaw("locationX",0))}}_updateSegment(e){super._updateSegment(e),this._updateSegmentReal(e)}_updateChildrenReal(){const e=this.chart;if(e)for(let t=0;t<this._lines.length;t++){if(this._lines[t]){const i=this._di[t].p1,a=this._di[t].p2,s=this._di[t].e,n=i.get("point"),r=a.get("point"),o=i.open,l=a.open,c=this.get("xAxis");if(o&&l&&s){const i=o.valueX,a=l.valueX-i;if(n&&r){const r=s.dataContext,o=this.get("sequence",[]),l=this._labels[t],h=this._fills[t],d=this._strokes[t];for(let t=0;t<o.length;t++){const s=o[t],u=l[t],g=h[t],p=d[t];this.mainContainer.children.moveValue(g,0);const m=i+a*s,f=n.x,b=c.get("renderer").positionToCoordinate(c.valueToPosition(m)),v=0,_=e.plotContainer.height();g.setPrivate("visible",!0),p.setPrivate("visible",!0);const y=r.fill;let w=this.get("colors",[])[t],x=w;if(g.set("fillOpacity",.2*this.get("fillOpacity",0)),p.set("strokeOpacity",this.get("strokeOpacity",0)),w||(y&&(w=y.get("fill")),w||(w=this.get("fillColor",this.get("fill",Object(T.b)(0))))),!x){const e=r.stroke;e&&(x=e.get("stroke")),x||(x=this.get("strokeColor",this.get("stroke",Object(T.b)(0))))}g.set("fill",w),p.set("stroke",x),g.set("draw",(e=>{e.moveTo(f,v),e.lineTo(b,v),e.lineTo(b,_),e.lineTo(f,_),e.lineTo(f,v)})),p.set("draw",(e=>{e.moveTo(b,v),e.lineTo(b,_)}));const k=u.dataItem;k&&k.set("value",s),u.setAll({x:b,y:_,dy:-20}),u.text.markDirtyText()}}}}}}}Object.defineProperty(Be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"FibonacciTimezoneSeries"}),Object.defineProperty(Be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Re.classNames.concat([Be.className])});class He extends ve{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"ray"})}_afterNew(){super._afterNew(),this.lines.template.set("forceHidden",!0)}_handleBulletDragged(e){super._handleBulletDragged(e);const t=e.target.dataItem.dataContext;if(t){const e=t.index,i=this._di[e].p1,a=this._di[e].p2,s=this._movePointerPoint;if(i&&a&&s){const e=this.get("yAxis"),t=this.get("xAxis"),n=this._getXValue(t.positionToValue(t.coordinateToPosition(s.x))),r=this._getYValue(e.positionToValue(e.coordinateToPosition(s.y)),n),o=t.getPrivate("min",0),l=t.getPrivate("max",1);this._setContext(i,"valueY",r,!0),this._setContext(a,"valueY",r,!0),this._setContext(i,"valueX",n),this._setContext(a,"valueX",l+100*(l-o)),this._setXLocation(i,i.get("valueX",0)),this._positionBullets(i)}}}_handlePointerMoveReal(){}_updateSegment(e){if(this._di[e]){const t=this._di[e].p2;if(t){const e=this.get("xAxis"),i=e.getPrivate("min",0),a=e.getPrivate("max",1);this._setContext(t,"valueX",a+100*(a-i),!0)}}}_handlePointerClickReal(e){this._drawingEnabled&&(this._isDragging||0==this.unselectAllDrawings()&&(this._increaseIndex(),this._addPoints(e,this._index),this.isDrawing(!1),this._hideResizer(),this._updateSegment(this._index),this._dispatchStockEvent("drawingadded",this._drawingId,this._index)))}}Object.defineProperty(He,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalRaySeries"}),Object.defineProperty(He,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ve.classNames.concat([He.className])});var ze=i(29),We=i(32);class $e extends _e{constructor(){super(...arguments),Object.defineProperty(this,"_lines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_labels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"measure"}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ue.c(de.a.new({}),(()=>Ve.a._new(this._root,{},[this.labels.template]))))})}_afterNew(){super._afterNew(),this.set("snapToData",!0),this.strokes.template.set("templateField",void 0),this.fills.template.set("templateField",void 0)}makeLabel(){const e=this.labels.make();return this.bulletsContainer.children.push(e),e.setAll({populateText:!0,background:We.a.new(this._root,{themeTags:["background"]})}),e._setDataItem(new ze.b(this,{},{})),this.labels.push(e),e}_createElements(e){if(super._createElements(e),!this._labels[e]){const t=this.makeLabel();this._labels[e]=t}}_disposeIndex(e){super._disposeIndex(e);const t=this._labels[e];t&&(t.dispose(),delete this._labels[e]);const i=this._lines[e];i&&(i.dispose(),delete this._lines[e])}_updateOthers(e,t,i,a){const s=this.get("xAxis"),n=s.chart,r=this._lines[e];let o=this._root.interfaceColors.get("positive"),l=this._root.interfaceColors.get("negative");const c=n.getPrivate("stockChart");let h;c&&(o=c.get("stockPositiveColor",o),l=c.get("stockNegativeColor",l),h=c.get("volumeSeries"));let d=1;i.x>a.x&&(d=-1);const u=this._labels[e],g=u.get("background"),p=this._di[e].p1,m=this._di[e].p2;let f=o,b=1;i.y>a.y&&(b=-1,f=l),t.set("fill",f),t.set("fillOpacity",.2),r.set("stroke",f),g.set("fill",f),this.outerCircles.each((e=>{e.set("stroke",f)}));const v=i.x+(a.x-i.x)/2,_=i.y+(a.y-i.y)/2;r.set("segments",[[[{x:v,y:i.y},{x:v,y:a.y}]],[[{x:v-5,y:a.y-5*b},{x:v,y:a.y},{x:v+5,y:a.y-5*b}]],[[{x:i.x,y:_},{x:a.x,y:_}]],[[{x:a.x-5*d,y:_-5},{x:a.x,y:_},{x:a.x-5*d,y:_+5}]]]);const y=p.get("valueY",0),w=m.get("valueY",0),x=this.getNumberFormatter(),C=x.format(w-y),D=x.format((w-y)/y*100)+"%",P=s.getPrivate("baseInterval"),S=p.get("valueX",0),A=m.get("valueX",0),I=this.get("series");let T=0;if(I){const e=s.getSeriesItem(I,s.valueToPosition(S)),t=s.getSeriesItem(I,s.valueToPosition(A));e&&t&&(T=I.dataItems.indexOf(t)-I.dataItems.indexOf(e)+1,this.get("snapToData")&&T--)}let N=Math.ceil((A-S)/s.baseDuration()*P.count);N<T&&(N=T);let O=0;if(h){const e=s.getSeriesItem(h,s.valueToPosition(S)),t=s.getSeriesItem(h,s.valueToPosition(A));if(e&&t){const i=h.dataItems;let a=i.indexOf(e),s=i.indexOf(t);a>s&&([a,s]=[s,a]);for(let e=a;e<s;e++){const t=i[e];if(t){const e=t.get("valueY");k.isNumber(e)&&(O+=e)}}}}let M=this.get("labelText","");O>0&&(M+=this.get("labelVolumeText"));u.dataItem.dataContext={value:C,percent:D,count:T,intervalCount:N,intervalUnit:this._root.language.translateAny({millisecond:"ms",second:"s",minute:"m",hour:"h",day:"d",week:"wk",month:"mo",year:"y"}[P.timeUnit]),volume:O},u.setAll({text:M,x:v,y:_}),u.text.markDirtyText()}}Object.defineProperty($e,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Measure"}),Object.defineProperty($e,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_e.classNames.concat([$e.className])});var Ue=i(20),Je=i(205),Ke=i(3);class qe extends Ue.a{constructor(){super(...arguments),Object.defineProperty(this,"_cssDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this._defaultThemes=this.get("stockChart")._defaultThemes,super._afterNewApplyThemes(),this._initControls(),this.loadDefaultCSS(),this._root.addDisposer(this),this.events.dispatch("created",{type:"created",target:this})}_afterChanged(){super._afterChanged(),this.isDirty("container"),this.isDirty("useDefaultCSS")&&(this.get("useDefaultCSS")?this.loadDefaultCSS():this._cssDisposer&&this._cssDisposer.dispose()),this.isDirty("controls")&&this._initControls()}_dispose(){super._dispose(),this._cssDisposer&&this._cssDisposer.dispose();const e=this.get("controls",[]);D.each(e,((e,t)=>{e.dispose()}))}_initControls(){const e=this.get("controls",[]);D.each(e,((e,t)=>{e.getPrivate("toolbar")||(e.setPrivate("toolbar",this),this.get("container").appendChild(e.getPrivate("button")))}))}loadDefaultCSS(){const e=Object(Je.a)(Ke.getShadowRoot(this._root.dom),this._root);this._disposers.push(e),this._cssDisposer=e}}Object.defineProperty(qe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"StockToolbar"}),Object.defineProperty(qe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ue.a.classNames.concat([qe.className])});var Ge=i(134),Ze=i(137);class Qe extends Ze.a{constructor(){super(...arguments),Object.defineProperty(this,"_currentSelectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this._setupKeyboardNav(),this._root.addDisposer(this)}_initElements(){super._initElements();const e=this.getPrivate("container");this.get("searchable")&&this._initSearch();const t=document.createElement("ul");t.className="am5stock-control-list",e.appendChild(t),this.setPrivate("list",t),this._initItems()}_sizeItems(){const e=this.getPrivate("list");e&&(e.style.maxHeight=this.root.container.height()-100+"px",e.style.overflow="auto")}rebuildList(){this._initItems()}_initItems(e){this.getPrivate("list").innerHTML="",e||(e=this.get("items",[]));const t=this.get("exclude",[]);D.each(e,(e=>{-1==t.indexOf(e.id)&&this.addItem(e)})),this.get("scrollable")&&this._sizeItems(),this._maybeMakeAccessible()}_initSearch(){let e=this.getPrivate("search");if(this.get("searchable")){if(!e){const t=this.getPrivate("container");e=document.createElement("div"),e.className="am5stock-list-search",t.appendChild(e),this.setPrivate("search",e);const i=document.createElement("input");i.type="text",i.placeholder=this._root.language.translateAny("Search"),e.appendChild(i),this._disposers.push(Ke.addEventListener(i,"input",(e=>{this._filterItems(i.value)}))),this._disposers.push(Ke.addEventListener(i,"focus",(e=>{this._currentSelectedIndex=void 0})))}}else e&&(e.style.display="none")}_beforeChanged(){super._beforeChanged(),this.isDirty("items")&&this._initItems(),this.isDirty("searchable")&&this._initSearch(),this.isPrivateDirty("currentId"),this.isDirty("control")&&this._maybeMakeAccessible()}_dispose(){super._dispose()}_filterItems(e){return Object(c.a)(this,void 0,void 0,(function*(){const t=this.get("searchCallback");if(""==e)this._initItems(this.get("items"));else if(t&&e){const i=this.get("maxSearchItems",1e3);let a=yield t.call(this,e);i&&a.length>i&&(a=a.slice(0,i-1),a.push({id:"",className:"am5stock-list-info",label:this._root.language.translateAny("Search results are limited to %1.",void 0,""+i)})),this._initItems(a)}else{const t=this.getPrivate("list");if(t){const i=t.getElementsByTagName("li");D.each(i,(t=>{const i=new RegExp(e||"","i");!e||t.innerText.match(i)?t.style.display="":t.style.display="none"}))}}}))}addItem(e){const t=this.getPrivate("list"),i=document.createElement("li");let a;if(i.className="am5stock-list-item",i.setAttribute("title",e.subLabel||e.label),e.className&&(i.className+=" "+e.className),e.icon&&i.appendChild(e.icon),e.form){const t=document.createElement("input");a="am5stock-list-"+e.id,t.type=e.form,t.setAttribute("tabindex","-1"),e.value&&(t.value=e.value),"radio"==e.form&&(t.name=e.id,a+="-"+e.value),e.checked&&(t.checked=!0),t.id=a,this._disposers.push(Ke.addEventListener(i,"click",(i=>{i.target!==t&&(t.checked=!t.checked),this.events.dispatch("changed",{type:"changed",item:e,value:t.checked,checked:t.checked,target:this})}))),i.appendChild(t)}const s=document.createElement("label");if(s.innerHTML=e.label,""==e.label&&(s.style.display="none"),i.appendChild(s),e.subLabel){const t=document.createElement("label");t.className="am5stock-list-sub",t.innerHTML=e.subLabel,i.appendChild(t)}"separator"==e.id&&(i.innerHTML="<hr>"),t.appendChild(i),e.disabled?i.className+=" am5stock-disabled":this._disposers.push(Ke.addEventListener(i,"click",(t=>{this.hide(),this.events.dispatch("invoked",{type:"invoked",item:e,target:this})})))}hide(){super.hide(),this._filterItems();let e=this.getPrivate("search");if(e){const t=e.getElementsByTagName("input");let i=!1;D.each(t,(e=>{""!==e.value&&(i=!0,e.value="")})),this.get("searchCallback")&&i&&this._initItems()}this._currentSelectedIndex=void 0}_setupKeyboardNav(){if(Ke.supports("keyboardevents")){const e=this.get("control").getPrivate("button");this._disposers.push(Ke.addEventListener(document,"keydown",(t=>{if(this.isAccessible()&&document.activeElement&&(document.activeElement===e||Ke.contains(e,document.activeElement)))if(13==t.keyCode)document.activeElement!==e&&document.activeElement.click();else if(38==t.keyCode||40==t.keyCode){const e=38==t.keyCode?-1:1;let i=this._currentSelectedIndex;void 0===i?i=0:i+=e;const a=this._getActiveItems();i<0?i=a.length-1:i>=a.length&&(i=0),this.setTimeout((()=>{Ke.focus(a.item(i)),this._currentSelectedIndex=i}),15)}})))}}_maybeMakeAccessible(){if(super._maybeMakeAccessible(),this.isAccessible()){this._getActiveItems().forEach((e=>{e.setAttribute("tabindex","-1"),e.setAttribute("aria-label",e.getAttribute("title")||"")}))}}_getActiveItems(){return this.getPrivate("list").querySelectorAll(".am5stock-list-item:not(.am5stock-list-info, .am5stock-list-heading, .am5stock-disabled)")}}Object.defineProperty(Qe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DropdownList"}),Object.defineProperty(Qe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ze.a.classNames.concat([Qe.className])});var et=i(58);class tt extends Ge.a{_afterNew(){super._afterNew();const e=Qe.new(this._root,{control:this,parent:this.getPrivate("button"),scrollable:this.get("scrollable",!1)});this.setPrivate("list",e),e.events.on("closed",(e=>{this.set("active",!1)})),e.events.on("invoked",(e=>{this.setTool(e.item.label),this.events.dispatch("selected",{type:"selected",tool:e.item.id,target:this})})),this.on("active",(t=>{t?this.setTimeout((()=>e.show()),10):e.hide()}));const t=this.getPrivate("button");t.className=t.className+" am5stock-control-dropdown",this._initTools()}setTool(e){this.getPrivate("icon").innerHTML="",this.getPrivate("icon").appendChild(this._getToolIcon(e)),this._setLabel(this._root.language.translateAny(e))}_initTools(){const e=this.getPrivate("list"),t=this.get("tools"),i=[];D.each(t,(e=>{i.push({id:e,label:this._root.language.translateAny(e),icon:this._getToolIcon(e)})})),e.set("items",i)}_getToolIcon(e){return et.a.getIcon(e)}_afterChanged(){super._afterChanged(),this.isDirty("tools")&&this._initTools()}_dispose(){super._dispose()}}Object.defineProperty(tt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DrawingToolControl"}),Object.defineProperty(tt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ge.a.classNames.concat([tt.className])});var it=i(175);class at extends Ge.a{_afterNew(){super._afterNew();const e=this.getPrivate("button");e.className=e.className+" am5stock-control-dropdown"}_initElements(){super._initElements();const e={control:this,parent:this.getPrivate("button"),searchable:this.get("searchable",!1),scrollable:this.get("scrollable",!1),items:[],exclude:this.get("exclude")},t=this.get("maxSearchItems");t&&(e.maxSearchItems=t);const i=this.get("searchCallback");i&&(e.searchCallback=i);const a=this.get("items");let s=this.get("currentItem");a&&D.each(a,(t=>{const i=k.isString(t)?{id:t,label:t}:t;e.items.push(i),k.isString(s)&&s==i.id&&(s=i)}));const n=Qe.new(this._root,e);this.setPrivate("dropdown",n),s&&this.setItem(s),n.events.on("closed",(e=>{this.set("active",!1)})),n.events.on("invoked",(e=>{this.setItem(e.item),this.events.dispatch("selected",{type:"selected",item:e.item,target:this})})),this.on("active",(e=>{e?this.setTimeout((()=>n.show()),10):n.hide()}))}setItem(e){if(!0!==this.get("fixedLabel")){const t=this.getPrivate("label");if(k.isString(e))t.innerHTML=e;else{if(e.icon){const t=this.getPrivate("icon");t.innerHTML="",t.appendChild(e.icon.cloneNode(!0)),t.style.display=""}e.label?(t.innerHTML=e.label,t.style.display=""):(t.innerHTML="",t.style.display="none")}}}setItemById(e){const t=this.getItemById(e);void 0!==t&&(this.setItem(t),this.events.dispatch("selected",{type:"selected",item:t,target:this}))}getItemById(e){let t;const i=this.get("items",[]);return D.eachContinue(i,(i=>(k.isObject(i)?i.id:i)!=e||(t=i,!1))),t}_beforeChanged(){if(super._beforeChanged(),this.isDirty("items")){const e=this.getPrivate("dropdown");if(e){const t=this.get("items"),i=[];let a=this.get("currentItem");t&&D.each(t,(e=>{const t=k.isString(e)?{id:e,label:e}:e;i.push(t),k.isString(a)&&a==t.id&&(a=t)})),e.set("items",i)}}}_dispose(){super._dispose()}_maybeMakeAccessible(){if(super._maybeMakeAccessible(),this.isAccessible()){const e=this.getPrivate("button");e.setAttribute("aria-label",e.getAttribute("title")+"; "+this._t("Press ENTER or use arrow keys to navigate")),Ke.supports("keyboardevents")&&this._disposers.push(Ke.addEventListener(document,"keydown",(t=>{document.activeElement==e&&(38!=t.keyCode&&40!=t.keyCode||this.get("active")||this._handleClick())})))}}}Object.defineProperty(at,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DropdownListControl"}),Object.defineProperty(at,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ge.a.classNames.concat([at.className])});class st extends Ge.a{_afterNew(){super._afterNew();const e=this.getPrivate("button");e.className=e.className+" am5stock-control-dropdown"}_beforeChanged(){if(super._beforeChanged(),this.isDirty("html")){this.getPrivate("container")&&(this.getPrivate("container").innerHTML=this.get("html",""))}}_initElements(){super._initElements();const e={control:this,parent:this.getPrivate("button"),scrollable:this.get("scrollable",!1)},t=Ze.a.new(this._root,e);this.setPrivate("dropdown",t);const i=document.createElement("div");i.className="am5stock-control-list",t.getPrivate("container").appendChild(i),this.setPrivate("container",i);const a=this.get("html","");i.innerHTML=a,t.events.on("closed",(e=>{this.set("active",!1)})),this.on("active",(e=>{e?this.setTimeout((()=>t.show()),10):t.hide()}))}_dispose(){super._dispose()}}Object.defineProperty(st,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DropdownControl"}),Object.defineProperty(st,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ge.a.classNames.concat([st.className])});var nt=i(167);class rt extends Ge.a{_afterNew(){super._afterNew();const e=Qe.new(this._root,{control:this,parent:this.getPrivate("button"),searchable:!1});this.setPrivate("list",e),e.getPrivate("list").className="am5stock-control-icons",e.events.on("closed",(e=>{this.set("active",!1)})),e.events.on("invoked",(e=>{const t=JSON.parse(e.item.id);let i;const a=this.get("icons");D.each(a,(e=>{t.svgPath==e.svgPath&&(i=e)})),i&&(this.setIcon(i),this.events.dispatch("selected",{type:"selected",icon:i,target:this}))})),this.on("active",(t=>{t?this.setTimeout((()=>e.show()),10):e.hide()})),this._initIcons()}setIcon(e){this.getPrivate("icon").innerHTML="",this.getPrivate("icon").appendChild(this._getDrawingIcon(e))}setIconByPath(e){const t=this.getIconByPath(e);void 0!==t&&(this.setIcon(t),this.events.dispatch("selected",{type:"selected",icon:t,target:this}))}getIconByPath(e){let t;const i=this.get("icons",[]);return D.eachContinue(i,(i=>i.svgPath!=e||(t=i,!1))),t}_initIcons(){const e=this.getPrivate("list"),t=this.get("icons"),i=[];D.each(t,(e=>{i.push({id:JSON.stringify(e),label:"",icon:this._getDrawingIcon(e)})})),e.set("items",i)}_getDrawingIcon(e){return et.a._getSVG({viewbox:"0 0 50 50",path:e.svgPath})}_afterChanged(){super._afterChanged(),this.isDirty("icons")&&this._initIcons()}_dispose(){super._dispose()}}Object.defineProperty(rt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"IconControl"}),Object.defineProperty(rt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ge.a.classNames.concat([rt.className])});var ot=i(165),lt=i(373);class ct extends Ge.a{constructor(){super(...arguments),Object.defineProperty(this,"_drawingSeries",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_currentEnabledSeries",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_afterNew(){super._afterNew(),this.getPrivate("toolbar")&&this._initToolbar();const e=this.get("stockChart");e.panels.events.onAll((()=>this._updatePanelBindings())),e.events.on("drawingselected",(e=>{const t=this._getSeriesTool(e.series);if(this.set("tool",t),!this._isInited())return;const i=e.series.getContext(e.drawingId);if("Label"==t||"Callout"==t){const e=i.settings;e&&(this.getPrivate("labelFillControl").setColor(e.get("fill")),this.getPrivate("labelFontSizeControl").setItemById(e.get("fontSize")),this.getPrivate("boldControl").set("active","bold"==e.get("fontWeight")),this.getPrivate("italicControl").set("active","italic"==e.get("fontStyle")),this.getPrivate("labelFontFamilyControl").setItemById(e.get("fontFamily")));const t=i.bgSettings;if(t){const e=this.getPrivate("strokeControl");e.setColor(t.get("stroke")),e.setOpacity(t.get("strokeOpacity"));const i=this.getPrivate("fillControl");i.setColor(t.get("fill")),i.setOpacity(t.get("fillOpacity"))}}else{const e=i.stroke||i.settings;if(e){const t=this.getPrivate("strokeControl");t.setColor(e.get("stroke")),t.setOpacity(e.get("strokeOpacity")),this.getPrivate("strokeWidthControl").setItemById(e.get("strokeWidth")+"px"),this.getPrivate("strokeDasharrayControl").setItemById(JSON.stringify(e.get("strokeDasharray")))}const t=i.fill||i.settings;if(t){const e=this.getPrivate("fillControl");e.setColor(t.get("fill")),e.setOpacity(t.get("fillOpacity"))}const a=i.settings||i.sprite;a&&a.get("svgPath")&&this.getPrivate("iconControl").setIconByPath(a.get("svgPath"))}}))}_initElements(){super._initElements()}_isInited(){return!!this.getPrivate("toolsContainer")}_resetControls(){this.getPrivate("eraserControl").set("active",!1)}_initToolbar(){const e=this.get("stockChart"),t=this._root.language,i=this.getPrivate("toolbar"),a=document.createElement("div");a.className="am5stock-control-drawing-tools",a.style.display="none",this.setPrivate("toolsContainer",a),i.get("container").appendChild(a);const s=tt.new(this._root,{stockChart:e,description:t.translateAny("Drawing tool"),tools:this.get("tools"),scrollable:this.get("scrollable",!1)});s.setPrivate("toolbar",i),a.appendChild(s.getPrivate("button")),this.setPrivate("toolControl",s),s.events.on("selected",(e=>{S.set("active",!1),this.set("tool",e.tool)})),s.events.on("click",this._resetControls,this);const n=this.get("drawingIcons"),r=rt.new(this._root,{stockChart:e,description:t.translateAny("Arrows &amp; Icons"),icons:n});r.setPrivate("toolbar",i),r.setIcon(this.get("drawingIcon",n[0])),a.appendChild(r.getPrivate("button")),this.setPrivate("iconControl",r),r.events.on("selected",(e=>{this.set("drawingIcon",e.icon)})),r.events.on("click",this._resetControls,this);const o=Ge.a.new(this._root,{stockChart:e,description:t.translateAny("Snap icon to data"),icon:et.a.getIcon("Snap")});o.setPrivate("toolbar",i),o.hide(),a.appendChild(o.getPrivate("button")),this.setPrivate("snapControl",o),this.get("snapToData")&&o.set("active",!0),o.on("active",(e=>{this.set("snapToData",1==o.get("active"))})),o.events.on("click",this._resetControls,this);const l=nt.a.new(this._root,{stockChart:e,colors:this.get("colors"),description:t.translateAny("Line color")});l.setPrivate("toolbar",i),l.hide(),l.setPrivate("color",this.get("strokeColor",Object(T.b)(0))),l.setPrivate("opacity",this.get("strokeOpacity",1)),a.appendChild(l.getPrivate("button")),this.setPrivate("strokeControl",l),l.events.on("selected",(e=>{this.set("strokeColor",e.color)})),l.events.on("selectedOpacity",(e=>{this.set("strokeOpacity",e.opacity)})),l.events.on("click",this._resetControls,this);const c=[];D.each(this.get("strokeWidths",[]),(e=>{c.push(e+"px")}));const h=at.new(this._root,{stockChart:e,description:t.translateAny("Line thickness"),currentItem:this.get("strokeWidth","12")+"px",items:c});h.setPrivate("toolbar",i),h.hide(),h.getPrivate("icon").style.display="none",a.appendChild(h.getPrivate("button")),this.setPrivate("strokeWidthControl",h),h.events.on("selected",(e=>{this.set("strokeWidth",k.toNumber(k.isString(e.item)?e.item:e.item.id))})),h.events.on("click",this._resetControls,this);const d=[];let u;const g=this.get("strokeDasharray",[]);D.each(this.get("strokeDasharrays",[]),(e=>{const t=et.a.getIcon("Dash"),i=JSON.stringify(e);t.setAttribute("stroke","#000"),t.setAttribute("stroke-dasharray",e.join(",")),t.setAttribute("class","am5stock-icon-wide"),d.push({id:i,label:"",icon:t}),i==JSON.stringify(g)&&(u=et.a.getIcon("Dash"),u.setAttribute("stroke","#000"),u.setAttribute("stroke-dasharray",e.join(",")),u.setAttribute("class","am5stock-icon-wide"))}));const p=at.new(this._root,{stockChart:e,description:t.translateAny("Line style"),items:d});p.setPrivate("toolbar",i),p.hide(),u&&p.setItem({id:"",icon:u,label:""}),p.getPrivate("icon").setAttribute("class","am5stock-control-icon am5stock-icon-wide"),a.appendChild(p.getPrivate("button")),this.setPrivate("strokeDasharrayControl",p),p.events.on("selected",(e=>{this.set("strokeDasharray",JSON.parse(e.item.id))})),p.events.on("click",this._resetControls,this);const m=nt.a.new(this._root,{stockChart:e,colors:this.get("colors"),name:t.translateAny("Fill"),description:t.translateAny("Fill color")});m.hide(),m.setPrivate("toolbar",i),m.setPrivate("color",this.get("fillColor",Object(T.b)(0))),m.setPrivate("opacity",this.get("fillOpacity",1)),a.appendChild(m.getPrivate("button")),this.setPrivate("fillControl",m),m.events.on("selected",(e=>{this.set("fillColor",e.color)})),m.events.on("selectedOpacity",(e=>{this.set("fillOpacity",e.opacity)})),m.events.on("click",this._resetControls,this);const f=nt.a.new(this._root,{stockChart:e,colors:this.get("colors"),name:t.translateAny("Text"),description:t.translateAny("Text color"),useOpacity:!1});f.hide(),f.setPrivate("toolbar",i),f.setPrivate("color",this.get("labelFill",Object(T.b)(0))),a.appendChild(f.getPrivate("button")),this.setPrivate("labelFillControl",f),f.events.on("selected",(e=>{this.set("labelFill",e.color)})),f.events.on("click",this._resetControls,this);const b=[];D.each(this.get("labelFontSizes",[]),(e=>{b.push(e+"")}));const v=at.new(this._root,{stockChart:e,description:t.translateAny("Label font size"),currentItem:this.get("labelFontSize","12px")+"",items:b,icon:"none"});v.hide(),v.setPrivate("toolbar",i),a.appendChild(v.getPrivate("button")),this.setPrivate("labelFontSizeControl",v),v.events.on("selected",(e=>{this.set("labelFontSize",k.isString(e.item)?e.item:e.item.id)})),v.events.on("click",this._resetControls,this);const _=Ge.a.new(this._root,{stockChart:e,description:t.translateAny("Bold"),icon:et.a.getIcon("Bold")});_.hide(),_.setPrivate("toolbar",i),a.appendChild(_.getPrivate("button")),this.setPrivate("boldControl",_),_.on("active",(e=>{this.set("labelFontWeight",_.get("active")?"bold":"normal")})),_.events.on("click",this._resetControls,this);const y=Ge.a.new(this._root,{stockChart:e,description:t.translateAny("Italic"),icon:et.a.getIcon("Italic")});y.hide(),y.setPrivate("toolbar",i),a.appendChild(y.getPrivate("button")),this.setPrivate("italicControl",y),y.on("active",(e=>{this.set("labelFontStyle",y.get("active")?"italic":"normal")})),y.events.on("click",this._resetControls,this);const w=[];D.each(this.get("labelFontFamilies",[]),(e=>{w.push(e+"")}));const x=at.new(this._root,{stockChart:e,description:t.translateAny("Label font family"),currentItem:this.get("labelFontFamily","Arial"),items:w,icon:"none"});x.hide(),x.setPrivate("toolbar",i),a.appendChild(x.getPrivate("button")),this.setPrivate("labelFontFamilyControl",x),x.events.on("selected",(e=>{this.set("labelFontFamily",k.isString(e.item)?e.item:e.item.id)})),x.events.on("click",this._resetControls,this);const C=Ge.a.new(this._root,{stockChart:e,description:t.translateAny("Show line extension"),icon:et.a.getIcon("Show Extension")});C.hide(),C.setPrivate("toolbar",i),a.appendChild(C.getPrivate("button")),this.setPrivate("extensionControl",C),this.get("showExtension")&&C.set("active",!0),C.on("active",(e=>{this.set("showExtension",1==C.get("active"))})),C.events.on("click",this._resetControls,this);const P=Ge.a.new(this._root,{stockChart:e,description:t.translateAny("Select"),icon:et.a.getIcon("Select"),active:e.get("drawingSelectionEnabled",!1)});this._disposers.push(e.on("drawingSelectionEnabled",(e=>{P.set("active",e)}))),P.setPrivate("toolbar",i),a.appendChild(P.getPrivate("button")),this.setPrivate("selectControl",P),P.on("active",(t=>{const i=P.get("active",!1);e.set("drawingSelectionEnabled",i)}));const S=Ge.a.new(this._root,{stockChart:e,description:t.translateAny("Eraser"),icon:et.a.getIcon("Eraser")});this._disposers.push(e.on("erasingEnabled",(e=>{S.set("active",e)}))),S.setPrivate("toolbar",i),a.appendChild(S.getPrivate("button")),this.setPrivate("eraserControl",S),S.on("active",(e=>{const t=S.get("active",!1);this.setEraser(t)}));const A=Ge.a.new(this._root,{stockChart:e,name:t.translateAny("Clear"),description:t.translateAny("Clear all drawings"),icon:et.a.getIcon("Clear"),togglable:!1});A.setPrivate("toolbar",i),a.appendChild(A.getPrivate("button")),this.setPrivate("clearControl",A),this._disposers.push(Ke.addEventListener(A.getPrivate("button"),"click",(e=>{S.set("active",!1),this.clearDrawings()}))),this.get("active")&&this._setTool(this.get("tool"))}setEraser(e){this.get("stockChart").set("erasingEnabled",e)}clearDrawings(){pe.each(this._drawingSeries,((e,t)=>{D.each(t,(e=>{e.clearDrawings()}))}))}_beforeChanged(){super._beforeChanged();const e=this._isInited();if(this.isDirty("tools")){const e=this.getPrivate("toolControl");e&&e.set("tools",this.get("tools"))}this.isPrivateDirty("toolbar")&&this.getPrivate("toolbar")&&this._initToolbar(),this.isDirty("active")&&(this.get("stockChart").toggleDrawing(this.get("active")),this.get("active")?(e&&(this.getPrivate("toolsContainer").style.display="block"),this._setTool(this.get("tool")),e&&Ke.focus(this.getPrivate("toolControl").getPrivate("button"))):(e&&(this.getPrivate("toolsContainer").style.display="none"),this._setTool())),this.isDirty("tool")&&this.get("active")&&this._setTool(this.get("tool"));const t=this._root.events;(this.isDirty("strokeColor")||this.isDirty("strokeWidth")||this.isDirty("strokeOpacity")||this.isDirty("strokeDasharray"))&&t.once("frameended",(()=>{this._setStroke()})),(this.isDirty("fillColor")||this.isDirty("fillOpacity"))&&t.once("frameended",(()=>{this._setFill()})),(this.isDirty("labelFill")||this.isDirty("labelFontSize")||this.isDirty("labelFontFamily")||this.isDirty("labelFontWeight")||this.isDirty("labelFontStyle"))&&t.once("frameended",(()=>{this._setLabel()})),this.isDirty("showExtension")&&t.once("frameended",(()=>{this._setExtension()})),this.isDirty("drawingIcon")&&t.once("frameended",(()=>{this._setDrawingIcon()})),this.isDirty("snapToData")&&t.once("frameended",(()=>{this._setSnap()}))}_setTool(e){const t=this._isInited();if(D.each(this._currentEnabledSeries,(e=>{e.disableDrawing()})),this._currentEnabledSeries=[],!e)return t&&this.getPrivate("eraserControl").set("active",!1),void this.get("stockChart").set("drawingSelectionEnabled",!1);this._maybeInitToolSeries(e);let i,a=this._drawingSeries[e];if(D.each(a,(e=>{i!==e.chart&&(e.enableDrawing(),this._currentEnabledSeries.push(e),i=e.chart)})),t){this.getPrivate("toolControl").setTool(e);const t={strokeControl:["Average","Callout","Doodle","Ellipse","Fibonacci","Fibonacci Timezone","Horizontal Line","Horizontal Ray","Arrows &amp; Icons","Line","Line Arrow","Parallel Channel","Polyline","Polyfill","Triangle","Quadrant Line","Rectangle","Regression","Trend Line","Vertical Line"],strokeWidthControl:["Average","Doodle","Ellipse","Horizontal Line","Horizontal Ray","Arrows &amp; Icons","Line","Line Arrow","Polyline","Polyfill","Triangle","Quadrant Line","Rectangle","Regression","Trend Line","Vertical Line","Parallel Channel"],strokeDasharrayControl:["Average","Doodle","Ellipse","Horizontal Line","Horizontal Ray","Arrows &amp; Icons","Line","Line Arrow","Polyline","Polyfill","Triangle","Quadrant Line","Rectangle","Regression","Trend Line","Vertical Line"],extensionControl:["Average","Line","Regression","Trend Line"],fillControl:["Callout","Ellipse","Quadrant Line","Rectangle","Parallel Channel","Polyfill","Triangle","Polyfill","Triangle","Arrows &amp; Icons","Fibonacci Timezone"],labelFillControl:["Callout","Label"],labelFontSizeControl:["Callout","Label"],labelFontFamilyControl:["Callout","Label"],boldControl:["Callout","Label"],italicControl:["Callout","Label"],iconControl:["Arrows &amp; Icons"],snapControl:["Callout","Arrows &amp; Icons","Line","Line Arrow","Polyline","Polyfill","Triangle","Parallel Channel","Label","Callout","Horizontal Line","Horizontal Ray","Vertical Line","Quadrant Line","Rectangle","Measure","Fibonacci"]};pe.each(t,((t,i)=>{const a=this.getPrivate(t);-1==i.indexOf(e)?a.hide():a.show()}))}}_maybeInitToolSeries(e){let t=this._drawingSeries[e];t||(t=[]);const i=[];D.each(t,(e=>{i.push(e.chart)}));const a=this.get("series",[]),s=this.get("stockChart");if(s.panels.each((e=>{if(-1==i.indexOf(e)){const t=this._getPanelMainSeries(e);t&&a.push(t)}})),a.length>0){const i=this.get("toolSettings",{});D.each(a,(a=>{let n;const r=a.get("xAxis"),o=a.get("yAxis"),l=a.chart;let c;if(i[e]){c=de.a.new(i[e]);const t=this.getPrivate("toolTemplates",{});t[e]=c,this.setPrivate("toolTemplates",t)}switch(e){case"Arrows &amp; Icons":const e=this.get("drawingIcon",this.get("drawingIcons")[0]);n=Te.new(this._root,{series:a,xAxis:r,yAxis:o,iconSvgPath:e.svgPath,iconScale:e.scale,iconCenterX:e.centerX,iconCenterY:e.centerY},c);break;case"Average":n=De.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Callout":n=Fe.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Doodle":n=Ie.new(this._root,{series:a,xAxis:r,yAxis:o},c),n.fills.template.setAll({forceHidden:!0});break;case"Ellipse":n=Ye.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Fibonacci":n=Re.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Fibonacci Timezone":n=Be.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Horizontal Line":n=ke.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Horizontal Ray":n=He.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Label":n=Oe.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Line":n=ve.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Line Arrow":n=xe.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Measure":n=$e.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Parallel Channel":n=ye.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Polyline":n=be.new(this._root,{series:a,xAxis:r,yAxis:o},c),n.fills.template.setAll({forceHidden:!0});break;case"Polyfill":n=be.new(this._root,{series:a,xAxis:r,yAxis:o,fillShape:!0},c),n.fills.template.setAll({forceHidden:!0});break;case"Triangle":n=be.new(this._root,{series:a,xAxis:r,yAxis:o,fillShape:!0,pointCount:3},c),n.fills.template.setAll({forceHidden:!0});break;case"Quadrant Line":n=Le.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Rectangle":n=_e.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Regression":n=Ae.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Trend Line":n=Xe.new(this._root,{series:a,xAxis:r,yAxis:o},c);break;case"Vertical Line":n=Ce.new(this._root,{series:a,xAxis:r,yAxis:o},c)}n&&(t.push(n),l.drawings.push(n),n.setPrivate("baseValueSeries",a),n.set("valueYShow",s.getSeriesDefault(a,"valueYShow")),n.set("calculateAggregates",!0),s.getPrivate("comparing")&&s.setPercentScale(!0))})),this._drawingSeries[e]=t,this._setStroke(),this._setFill(),this._setLabel(),this._setDrawingIcon(),this._setSnap(),this._setExtension()}}_updateSeriesBindings(e){const t=this._getPanelMainSeries(e);t&&pe.each(this._drawingSeries,((i,a)=>{D.eachReverse(a,(i=>{i.chart==e&&(e.isDisposed()?D.remove(a,i):(i.set("series",t),i.setPrivate("baseValueSeries",t)))}))}))}_getPanelMainSeries(e){const t=this.get("stockChart").get("stockSeries");let i;return i=t&&t.chart==e?t:e.series.getIndex(0),i}_updatePanelBindings(){this.get("stockChart").panels.each((e=>{e.series.events.onAll((()=>this._updateSeriesBindings(e)))}))}_setStroke(){pe.each(this._drawingSeries,((e,t)=>{D.each(t,(e=>{e.setAll({strokeColor:this.get("strokeColor"),strokeWidth:this.get("strokeWidth"),strokeOpacity:this.get("strokeOpacity"),strokeDasharray:this.get("strokeDasharray")})}))}))}_setFill(){pe.each(this._drawingSeries,((e,t)=>{D.each(t,(e=>{e.setAll({fillColor:this.get("fillColor"),fillOpacity:this.get("fillOpacity")})}))}))}_setLabel(){const e=["Callout","Label"];pe.each(this._drawingSeries,((t,i)=>{-1!=e.indexOf(t)&&D.each(i,(e=>{e.setAll({labelFill:this.get("labelFill"),labelFontSize:this.get("labelFontSize"),labelFontFamily:this.get("labelFontFamily"),labelFontWeight:this.get("labelFontWeight"),labelFontStyle:this.get("labelFontStyle")})}))}))}_setExtension(){pe.each(this._drawingSeries,((e,t)=>{D.each(t,(e=>{e instanceof ve&&e.setAll({showExtension:this.get("showExtension")})}))}))}_setDrawingIcon(){if(!this._isInited())return;const e=this.get("drawingIcon",this.get("drawingIcons")[0]),t=this.getPrivate("fillControl");e.fillDisabled?t.hide():t.show(),pe.each(this._drawingSeries,((t,i)=>{D.each(i,(t=>{t instanceof Te&&t.setAll({iconSvgPath:e.svgPath,iconScale:e.scale,iconCenterX:e.centerX,iconCenterY:e.centerY,fillOpacity:e.fillDisabled?0:this.get("fillOpacity")})}))}))}_setSnap(){const e=this.get("snapToData",!1);pe.each(this._drawingSeries,((t,i)=>{D.each(i,(t=>{t.getPrivate("allowChangeSnap")&&t.set("snapToData",e)}))}))}_getDefaultIcon(){return et.a.getIcon("Draw")}_dispose(){super._dispose();const e=this.getPrivate("toolsContainer");e&&Ke.removeElement(e)}_getSeriesTool(e){if(e instanceof me){let t=e.className;return"SimpleLineSeries"==t?"Line":"IconSeries"==t?"Arrows &amp; Icons":"PolylineSeries"==t&&3==e.get("pointCount")?"Triangle":"PolylineSeries"==t&&e.get("fillShape")?"Polyfill":(t=Ke.addSpacing(t.replace("Series","")),t)}}serializeDrawings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=arguments.length>1?arguments[1]:void 0;const i=[];return this.get("stockChart").panels.each(((e,t)=>{e.series.each((e=>{if(e.isType("DrawingSeries")){const a=lt.a.new(this.root,{includeSettings:["strokeColor","fillColor","strokeOpacity","fillOpacity","strokeWidth","strokeDasharray","field","snapToData","svgPath","labelFontSize","labelFontFamily","labelFontWeight","labelFontStyle","labelFill","showExtension"],maxDepth:4});e.data.values.map((e=>{e.__parse=!0}));const s={__tool:this._getSeriesTool(e),__panelIndex:t,__drawing:a.serialize(e.data.values,0,!0)};i.push(s)}}))})),"object"==e?i:JSON.stringify(i,void 0,t)}unserializeDrawings(e){const t=this.get("stockChart");k.isString(e)&&(e=JSON.parse(e)),k.isArray(e)||(e=[e]),D.each(e,(e=>{let i=t.panels.getIndex(e.__panelIndex||0);if(i){const t=e.__tool;let a;this._maybeInitToolSeries(t),D.each(this._drawingSeries[t]||[],(e=>{e.chart===i&&(a=e)})),e.settings||(e.settings={}),ot.a.new(this._root).parse(e.__drawing).then((e=>{this._updateDrawingIndexes(e,a._index,a),a.data.pushAll(e)}))}else t.panels.events.once("push",(t=>{t.newValue.series.events.once("push",(t=>{this.unserializeDrawings(e)}))}))}))}_updateDrawingIndexes(e,t,i){k.isArray(e)?D.each(e,(e=>{this._updateDrawingIndexes(e,t,i)})):k.isObject(e)&&void 0!==e.index&&(e.index+=t,i._index=e.index)}get drawingSeries(){return this._drawingSeries}addLine(e,t,i){this._maybeInitToolSeries(e);const a=this._drawingSeries[e];let s;D.each(a,(e=>{t===e.chart&&(s=e)})),s&&s.addLine(i)}}Object.defineProperty(ct,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DrawingControl"}),Object.defineProperty(ct,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ge.a.classNames.concat([ct.className])});class ht extends at{_afterNew(){super._afterNew();const e=this.getPrivate("dropdown");this.setPrivate("list",e),e.events.on("invoked",(e=>{const t=this.addIndicator(e.item.id);this.events.isEnabled("selected")&&t&&this.events.dispatch("selected",{type:"selected",target:this,indicator:t,item:e.item})})),e.events.on("closed",(e=>{this.set("active",!1)})),this.on("active",(t=>{t?this.setTimeout((()=>e.show()),10):e.hide()}));const t=this.getPrivate("button");t.className=t.className+" am5stock-control-dropdown",this._initList(),this.get("stockChart").on("volumeSeries",(()=>this._initList()))}_initList(){const e=this.getPrivate("list"),t=this.get("indicators"),i=[];D.each(t,(e=>{k.isObject(e)?this.supportsIndicator(e.id)&&i.push({id:e.id,label:e.name}):this.supportsIndicator(e)&&i.push({id:e,label:this._root.language.translateAny(e)})})),e.set("items",i)}supportsIndicator(e){return!(!this.get("stockChart").get("volumeSeries")&&-1!==["Chaikin Money Flow","Chaikin Oscillator","On Balance Volume","Price Volume Trend","Volume","Volume Profile","VWAP"].indexOf(e))}_getDefaultIcon(){return et.a.getIcon("Indicator")}_beforeChanged(){super._beforeChanged(),this.isDirty("indicators")&&this._initList()}clearIndicators(){this.get("stockChart").indicators.eachReverse((e=>{e.dispose()}))}addIndicator(e){if(!this.supportsIndicator(e))return;const t=this.get("stockChart");let i;const a=t.get("stockSeries"),s=t.get("volumeSeries"),n=this.get("legend");switch(e){case"Acceleration Bands":i=M.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Accumulation Distribution":i=E.new(this.root,{stockChart:t,stockSeries:a,volumeSeries:s,legend:n});break;case"Accumulative Swing Index":i=Y.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Aroon":i=X.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Awesome Oscillator":i=J.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Bollinger Bands":i=j.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Bull Bear Power":i=H.new(this.root,{stockChart:t,stockSeries:a,volumeSeries:s,legend:n});break;case"Chaikin Money Flow":i=R.new(this.root,{stockChart:t,stockSeries:a,volumeSeries:s,legend:n});break;case"Chaikin Oscillator":i=B.new(this.root,{stockChart:t,stockSeries:a,volumeSeries:s,legend:n});break;case"Commodity Channel Index":i=Q.new(this.root,{stockChart:t,stockSeries:a});break;case"Disparity Index":i=ee.new(this.root,{stockChart:t,stockSeries:a});break;case"MACD":i=L.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Median Price":i=se.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Momentum":i=S.new(this.root,{stockChart:t,stockSeries:a});break;case"Moving Average Cross":i=V.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Moving Average":i=P.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Moving Average Deviation":i=O.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Moving Average Envelope":i=I.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Standard Deviation":i=te.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Trix":i=ae.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Typical Price":i=ie.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"Average True Range":i=re.new(this.root,{stockChart:t,stockSeries:a,legend:n});break;case"On Balance Volume":i=z.new(this.root,{stockChart:t,stockSeries:a,volumeSeries:s,legend:n});break;case"Price Volume Trend":i=W.new(this.root,{stockChart:t,stockSeries:a,volumeSeries:s,legend:n});break;case"Relative Strength Index":i=F.new(this.root,{stockChart:t,stockSeries:a});break;case"Stochastic Momentum Index":i=U.new(this.root,{stockChart:t,stockSeries:a});break;case"Stochastic Oscillator":i=$.new(this.root,{stockChart:t,stockSeries:a});break;case"Williams R":i=K.new(this.root,{stockChart:t,stockSeries:a});break;case"Volume":i=q.new(this.root,{stockChart:t,stockSeries:a,volumeSeries:s});break;case"Volume Profile":i=Z.new(this.root,{stockChart:t,stockSeries:a,volumeSeries:s,legend:n});break;case"VWAP":i=A.new(this.root,{stockChart:t,stockSeries:a,volumeSeries:s,legend:n});break;case"ZigZag":i=ne.new(this.root,{stockChart:t,stockSeries:a,legend:n})}if(i||D.eachContinue(this.get("indicators",[]),(t=>!k.isObject(t)||t.id!=e||(i=t.callback.call(this),!1))),i&&(t.indicators.push(i),i._editableSettings.length&&i.get("autoOpenSettings",!0))){const e=t.getPrivate("settingsModal");e.events.once("done",(e=>{i&&(e.settings||i.dispose())})),e.openIndicator(i)}return i}serializeIndicators(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=arguments.length>1?arguments[1]:void 0;const i=[],a=this.get("stockChart");return a.indicators.each((e=>{const t=lt.a.new(this._root,{excludeSettings:["stockChart","stockSeries","volumeSeries","legend"]}),s={};e.get("stockSeries")&&(s.__stockSeries=!0),e.get("volumeSeries")&&(s.__volumeSeries=!0);const n=e.get("legend");n&&n._walkParents((e=>{e.isType("StockPanel")&&(s.__legendIndex=a.panels.indexOf(e))})),s.__indicator=t.serialize(e,0),i.push(s)})),"object"==e?i:JSON.stringify(i,void 0,t)}unserializeIndicators(e){const t=this.get("stockChart");k.isString(e)&&(e=JSON.parse(e)),D.each(e,(e=>{if(e.__indicator.settings||(e.__indicator.settings={}),e.__indicator.settings.stockChart=t,e.__stockSeries&&!e.__indicator.settings.stockSeries&&(e.__indicator.settings.stockSeries=t.get("stockSeries")),e.__volumeSeries&&!e.__indicator.settings.volumeSeries&&(e.__indicator.settings.volumeSeries=t.get("volumeSeries")),void 0!==e.__legendIndex&&!e.__indicator.settings.legend){const i=t.panels.getIndex(e.__legendIndex);i&&i.walkChildren((t=>{t.isType("StockLegend")&&(e.__indicator.settings.legend=t)}))}ot.a.new(this._root).parse(e.__indicator).then((e=>{e instanceof l.a&&t.indicators.push(e)}))}))}}Object.defineProperty(ht,"className",{enumerable:!0,configurable:!0,writable:!0,value:"IndicatorControl"}),Object.defineProperty(ht,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:at.classNames.concat([ht.className])});var dt=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ut={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"===typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!==typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var i=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},gt={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},pt=gt,mt=function(e,t){return void 0===t&&(t=2),("000"+e).slice(-1*t)},ft=function(e){return!0===e?1:0};function bt(e,t){var i;return function(){var a=this,s=arguments;clearTimeout(i),i=setTimeout((function(){return e.apply(a,s)}),t)}}var vt=function(e){return e instanceof Array?e:[e]};function _t(e,t,i){if(!0===i)return e.classList.add(t);e.classList.remove(t)}function yt(e,t,i){var a=window.document.createElement(e);return t=t||"",i=i||"",a.className=t,void 0!==i&&(a.textContent=i),a}function wt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function xt(e,t){return t(e)?e:e.parentNode?xt(e.parentNode,t):void 0}function kt(e,t){var i=yt("div","numInputWrapper"),a=yt("input","numInput "+e),s=yt("span","arrowUp"),n=yt("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?a.type="number":(a.type="text",a.pattern="\\d*"),void 0!==t)for(var r in t)a.setAttribute(r,t[r]);return i.appendChild(a),i.appendChild(s),i.appendChild(n),i}function Ct(e){try{return"function"===typeof e.composedPath?e.composedPath()[0]:e.target}catch(t){return e.target}}var Dt=function(){},Pt=function(e,t,i){return i.months[t?"shorthand":"longhand"][e]},St={D:Dt,F:function(e,t,i){e.setMonth(i.months.longhand.indexOf(t))},G:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,i){e.setHours(e.getHours()%12+12*ft(new RegExp(i.amPM[1],"i").test(t)))},M:function(e,t,i){e.setMonth(i.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t,i){var a=parseInt(t),s=new Date(e.getFullYear(),0,2+7*(a-1),0,0,0,0);return s.setDate(s.getDate()-s.getDay()+i.firstDayOfWeek),s},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:Dt,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:Dt,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},At={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},It={Z:function(e){return e.toISOString()},D:function(e,t,i){return t.weekdays.shorthand[It.w(e,t,i)]},F:function(e,t,i){return Pt(It.n(e,t,i)-1,!1,t)},G:function(e,t,i){return mt(It.h(e,t,i))},H:function(e){return mt(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[ft(e.getHours()>11)]},M:function(e,t){return Pt(e.getMonth(),!0,t)},S:function(e){return mt(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,i){return i.getWeek(e)},Y:function(e){return mt(e.getFullYear(),4)},d:function(e){return mt(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return mt(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return mt(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},Tt=function(e){var t=e.config,i=void 0===t?ut:t,a=e.l10n,s=void 0===a?gt:a,n=e.isMobile,r=void 0!==n&&n;return function(e,t,a){var n=a||s;return void 0===i.formatDate||r?t.split("").map((function(t,a,s){return It[t]&&"\\"!==s[a-1]?It[t](e,n,i):"\\"!==t?t:""})).join(""):i.formatDate(e,t,n)}},Nt=function(e){var t=e.config,i=void 0===t?ut:t,a=e.l10n,s=void 0===a?gt:a;return function(e,t,a,n){if(0===e||e){var r,o=n||s,l=e;if(e instanceof Date)r=new Date(e.getTime());else if("string"!==typeof e&&void 0!==e.toFixed)r=new Date(e);else if("string"===typeof e){var c=t||(i||ut).dateFormat,h=String(e).trim();if("today"===h)r=new Date,a=!0;else if(i&&i.parseDate)r=i.parseDate(e,c);else if(/Z$/.test(h)||/GMT$/.test(h))r=new Date(e);else{for(var d=void 0,u=[],g=0,p=0,m="";g<c.length;g++){var f=c[g],b="\\"===f,v="\\"===c[g-1]||b;if(At[f]&&!v){m+=At[f];var _=new RegExp(m).exec(e);_&&(d=!0)&&u["Y"!==f?"push":"unshift"]({fn:St[f],val:_[++p]})}else b||(m+=".")}r=i&&i.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),u.forEach((function(e){var t=e.fn,i=e.val;return r=t(r,i,o)||r})),r=d?r:void 0}}if(r instanceof Date&&!isNaN(r.getTime()))return!0===a&&r.setHours(0,0,0,0),r;i.errorHandler(new Error("Invalid date provided: "+l))}}};function Ot(e,t,i){return void 0===i&&(i=!0),!1!==i?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var Mt=function(e,t,i){return 3600*e+60*t+i},jt=864e5;function Ft(e){var t=e.defaultHour,i=e.defaultMinute,a=e.defaultSeconds;if(void 0!==e.minDate){var s=e.minDate.getHours(),n=e.minDate.getMinutes(),r=e.minDate.getSeconds();t<s&&(t=s),t===s&&i<n&&(i=n),t===s&&i===n&&a<r&&(a=e.minDate.getSeconds())}if(void 0!==e.maxDate){var o=e.maxDate.getHours(),l=e.maxDate.getMinutes();(t=Math.min(t,o))===o&&(i=Math.min(l,i)),t===o&&i===l&&(a=e.maxDate.getSeconds())}return{hours:t,minutes:i,seconds:a}}i(465);var Et=function(){return Et=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Et.apply(this,arguments)},Yt=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var a=Array(e),s=0;for(t=0;t<i;t++)for(var n=arguments[t],r=0,o=n.length;r<o;r++,s++)a[s]=n[r];return a};function Xt(e,t){var i={config:Et(Et({},ut),Vt.defaultConfig),l10n:pt};function a(){var e;return(null===(e=i.calendarContainer)||void 0===e?void 0:e.getRootNode()).activeElement||document.activeElement}function s(e){return e.bind(i)}function n(){var e=i.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==i.calendarContainer&&(i.calendarContainer.style.visibility="hidden",i.calendarContainer.style.display="block"),void 0!==i.daysContainer){var t=(i.days.offsetWidth+1)*e.showMonths;i.daysContainer.style.width=t+"px",i.calendarContainer.style.width=t+(void 0!==i.weekWrapper?i.weekWrapper.offsetWidth:0)+"px",i.calendarContainer.style.removeProperty("visibility"),i.calendarContainer.style.removeProperty("display")}}))}function r(e){if(0===i.selectedDates.length){var t=void 0===i.config.minDate||Ot(new Date,i.config.minDate)>=0?new Date:new Date(i.config.minDate.getTime()),a=Ft(i.config);t.setHours(a.hours,a.minutes,a.seconds,t.getMilliseconds()),i.selectedDates=[t],i.latestSelectedDateObj=t}void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var t="keydown"===e.type,a=Ct(e),s=a;void 0!==i.amPM&&a===i.amPM&&(i.amPM.textContent=i.l10n.amPM[ft(i.amPM.textContent===i.l10n.amPM[0])]);var n=parseFloat(s.getAttribute("min")),r=parseFloat(s.getAttribute("max")),o=parseFloat(s.getAttribute("step")),l=parseInt(s.value,10),c=e.delta||(t?38===e.which?1:-1:0),h=l+o*c;if("undefined"!==typeof s.value&&2===s.value.length){var d=s===i.hourElement,u=s===i.minuteElement;h<n?(h=r+h+ft(!d)+(ft(d)&&ft(!i.amPM)),u&&m(void 0,-1,i.hourElement)):h>r&&(h=s===i.hourElement?h-r-ft(!i.amPM):n,u&&m(void 0,1,i.hourElement)),i.amPM&&d&&(1===o?h+l===23:Math.abs(h-l)>o)&&(i.amPM.textContent=i.l10n.amPM[ft(i.amPM.textContent===i.l10n.amPM[0])]),s.value=mt(h)}}(e);var s=i._input.value;o(),Q(),i._input.value!==s&&i._debouncedChange()}function o(){if(void 0!==i.hourElement&&void 0!==i.minuteElement){var e,t,a=(parseInt(i.hourElement.value.slice(-2),10)||0)%24,s=(parseInt(i.minuteElement.value,10)||0)%60,n=void 0!==i.secondElement?(parseInt(i.secondElement.value,10)||0)%60:0;void 0!==i.amPM&&(e=a,t=i.amPM.textContent,a=e%12+12*ft(t===i.l10n.amPM[1]));var r=void 0!==i.config.minTime||i.config.minDate&&i.minDateHasTime&&i.latestSelectedDateObj&&0===Ot(i.latestSelectedDateObj,i.config.minDate,!0),o=void 0!==i.config.maxTime||i.config.maxDate&&i.maxDateHasTime&&i.latestSelectedDateObj&&0===Ot(i.latestSelectedDateObj,i.config.maxDate,!0);if(void 0!==i.config.maxTime&&void 0!==i.config.minTime&&i.config.minTime>i.config.maxTime){var l=Mt(i.config.minTime.getHours(),i.config.minTime.getMinutes(),i.config.minTime.getSeconds()),h=Mt(i.config.maxTime.getHours(),i.config.maxTime.getMinutes(),i.config.maxTime.getSeconds()),d=Mt(a,s,n);if(d>h&&d<l){var u=function(e){var t=Math.floor(e/3600),i=(e-3600*t)/60;return[t,i,e-3600*t-60*i]}(l);a=u[0],s=u[1],n=u[2]}}else{if(o){var g=void 0!==i.config.maxTime?i.config.maxTime:i.config.maxDate;(a=Math.min(a,g.getHours()))===g.getHours()&&(s=Math.min(s,g.getMinutes())),s===g.getMinutes()&&(n=Math.min(n,g.getSeconds()))}if(r){var p=void 0!==i.config.minTime?i.config.minTime:i.config.minDate;(a=Math.max(a,p.getHours()))===p.getHours()&&s<p.getMinutes()&&(s=p.getMinutes()),s===p.getMinutes()&&(n=Math.max(n,p.getSeconds()))}}c(a,s,n)}}function l(e){var t=e||i.latestSelectedDateObj;t&&t instanceof Date&&c(t.getHours(),t.getMinutes(),t.getSeconds())}function c(e,t,a){void 0!==i.latestSelectedDateObj&&i.latestSelectedDateObj.setHours(e%24,t,a||0,0),i.hourElement&&i.minuteElement&&!i.isMobile&&(i.hourElement.value=mt(i.config.time_24hr?e:(12+e)%12+12*ft(e%12===0)),i.minuteElement.value=mt(t),void 0!==i.amPM&&(i.amPM.textContent=i.l10n.amPM[ft(e>=12)]),void 0!==i.secondElement&&(i.secondElement.value=mt(a)))}function h(e){var t=Ct(e),i=parseInt(t.value)+(e.delta||0);(i/1e3>1||"Enter"===e.key&&!/[^\d]/.test(i.toString()))&&T(i)}function d(e,t,a,s){return t instanceof Array?t.forEach((function(t){return d(e,t,a,s)})):e instanceof Array?e.forEach((function(e){return d(e,t,a,s)})):(e.addEventListener(t,a,s),void i._handlers.push({remove:function(){return e.removeEventListener(t,a,s)}}))}function u(){J("onChange")}function g(e,t){var a=void 0!==e?i.parseDate(e):i.latestSelectedDateObj||(i.config.minDate&&i.config.minDate>i.now?i.config.minDate:i.config.maxDate&&i.config.maxDate<i.now?i.config.maxDate:i.now),s=i.currentYear,n=i.currentMonth;try{void 0!==a&&(i.currentYear=a.getFullYear(),i.currentMonth=a.getMonth())}catch(r){r.message="Invalid date supplied: "+a,i.config.errorHandler(r)}t&&i.currentYear!==s&&(J("onYearChange"),x()),!t||i.currentYear===s&&i.currentMonth===n||J("onMonthChange"),i.redraw()}function p(e){var t=Ct(e);~t.className.indexOf("arrow")&&m(e,t.classList.contains("arrowUp")?1:-1)}function m(e,t,i){var a=e&&Ct(e),s=i||a&&a.parentNode&&a.parentNode.firstChild,n=K("increment");n.delta=t,s&&s.dispatchEvent(n)}function f(e,t,a,s){var n=N(t,!0),r=yt("span",e,t.getDate().toString());return r.dateObj=t,r.$i=s,r.setAttribute("aria-label",i.formatDate(t,i.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===Ot(t,i.now)&&(i.todayDateElem=r,r.classList.add("today"),r.setAttribute("aria-current","date")),n?(r.tabIndex=-1,q(t)&&(r.classList.add("selected"),i.selectedDateElem=r,"range"===i.config.mode&&(_t(r,"startRange",i.selectedDates[0]&&0===Ot(t,i.selectedDates[0],!0)),_t(r,"endRange",i.selectedDates[1]&&0===Ot(t,i.selectedDates[1],!0)),"nextMonthDay"===e&&r.classList.add("inRange")))):r.classList.add("flatpickr-disabled"),"range"===i.config.mode&&function(e){return!("range"!==i.config.mode||i.selectedDates.length<2)&&(Ot(e,i.selectedDates[0])>=0&&Ot(e,i.selectedDates[1])<=0)}(t)&&!q(t)&&r.classList.add("inRange"),i.weekNumbers&&1===i.config.showMonths&&"prevMonthDay"!==e&&s%7===6&&i.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+i.config.getWeek(t)+"</span>"),J("onDayCreate",r),r}function b(e){e.focus(),"range"===i.config.mode&&F(e)}function v(e){for(var t=e>0?0:i.config.showMonths-1,a=e>0?i.config.showMonths:-1,s=t;s!=a;s+=e)for(var n=i.daysContainer.children[s],r=e>0?0:n.children.length-1,o=e>0?n.children.length:-1,l=r;l!=o;l+=e){var c=n.children[l];if(-1===c.className.indexOf("hidden")&&N(c.dateObj))return c}}function _(e,t){var s=a(),n=O(s||document.body),r=void 0!==e?e:n?s:void 0!==i.selectedDateElem&&O(i.selectedDateElem)?i.selectedDateElem:void 0!==i.todayDateElem&&O(i.todayDateElem)?i.todayDateElem:v(t>0?1:-1);void 0===r?i._input.focus():n?function(e,t){for(var a=-1===e.className.indexOf("Month")?e.dateObj.getMonth():i.currentMonth,s=t>0?i.config.showMonths:-1,n=t>0?1:-1,r=a-i.currentMonth;r!=s;r+=n)for(var o=i.daysContainer.children[r],l=a-i.currentMonth===r?e.$i+t:t<0?o.children.length-1:0,c=o.children.length,h=l;h>=0&&h<c&&h!=(t>0?c:-1);h+=n){var d=o.children[h];if(-1===d.className.indexOf("hidden")&&N(d.dateObj)&&Math.abs(e.$i-h)>=Math.abs(t))return b(d)}i.changeMonth(n),_(v(n),0)}(r,t):b(r)}function y(e,t){for(var a=(new Date(e,t,1).getDay()-i.l10n.firstDayOfWeek+7)%7,s=i.utils.getDaysInMonth((t-1+12)%12,e),n=i.utils.getDaysInMonth(t,e),r=window.document.createDocumentFragment(),o=i.config.showMonths>1,l=o?"prevMonthDay hidden":"prevMonthDay",c=o?"nextMonthDay hidden":"nextMonthDay",h=s+1-a,d=0;h<=s;h++,d++)r.appendChild(f("flatpickr-day "+l,new Date(e,t-1,h),0,d));for(h=1;h<=n;h++,d++)r.appendChild(f("flatpickr-day",new Date(e,t,h),0,d));for(var u=n+1;u<=42-a&&(1===i.config.showMonths||d%7!==0);u++,d++)r.appendChild(f("flatpickr-day "+c,new Date(e,t+1,u%n),0,d));var g=yt("div","dayContainer");return g.appendChild(r),g}function w(){if(void 0!==i.daysContainer){wt(i.daysContainer),i.weekNumbers&&wt(i.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<i.config.showMonths;t++){var a=new Date(i.currentYear,i.currentMonth,1);a.setMonth(i.currentMonth+t),e.appendChild(y(a.getFullYear(),a.getMonth()))}i.daysContainer.appendChild(e),i.days=i.daysContainer.firstChild,"range"===i.config.mode&&1===i.selectedDates.length&&F()}}function x(){if(!(i.config.showMonths>1||"dropdown"!==i.config.monthSelectorType)){var e=function(e){return!(void 0!==i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&e<i.config.minDate.getMonth())&&!(void 0!==i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()&&e>i.config.maxDate.getMonth())};i.monthsDropdownContainer.tabIndex=-1,i.monthsDropdownContainer.innerHTML="";for(var t=0;t<12;t++)if(e(t)){var a=yt("option","flatpickr-monthDropdown-month");a.value=new Date(i.currentYear,t).getMonth().toString(),a.textContent=Pt(t,i.config.shorthandCurrentMonth,i.l10n),a.tabIndex=-1,i.currentMonth===t&&(a.selected=!0),i.monthsDropdownContainer.appendChild(a)}}}function k(){var e,t=yt("div","flatpickr-month"),a=window.document.createDocumentFragment();i.config.showMonths>1||"static"===i.config.monthSelectorType?e=yt("span","cur-month"):(i.monthsDropdownContainer=yt("select","flatpickr-monthDropdown-months"),i.monthsDropdownContainer.setAttribute("aria-label",i.l10n.monthAriaLabel),d(i.monthsDropdownContainer,"change",(function(e){var t=Ct(e),a=parseInt(t.value,10);i.changeMonth(a-i.currentMonth),J("onMonthChange")})),x(),e=i.monthsDropdownContainer);var s=kt("cur-year",{tabindex:"-1"}),n=s.getElementsByTagName("input")[0];n.setAttribute("aria-label",i.l10n.yearAriaLabel),i.config.minDate&&n.setAttribute("min",i.config.minDate.getFullYear().toString()),i.config.maxDate&&(n.setAttribute("max",i.config.maxDate.getFullYear().toString()),n.disabled=!!i.config.minDate&&i.config.minDate.getFullYear()===i.config.maxDate.getFullYear());var r=yt("div","flatpickr-current-month");return r.appendChild(e),r.appendChild(s),a.appendChild(r),t.appendChild(a),{container:t,yearElement:n,monthElement:e}}function C(){wt(i.monthNav),i.monthNav.appendChild(i.prevMonthNav),i.config.showMonths&&(i.yearElements=[],i.monthElements=[]);for(var e=i.config.showMonths;e--;){var t=k();i.yearElements.push(t.yearElement),i.monthElements.push(t.monthElement),i.monthNav.appendChild(t.container)}i.monthNav.appendChild(i.nextMonthNav)}function D(){i.weekdayContainer?wt(i.weekdayContainer):i.weekdayContainer=yt("div","flatpickr-weekdays");for(var e=i.config.showMonths;e--;){var t=yt("div","flatpickr-weekdaycontainer");i.weekdayContainer.appendChild(t)}return P(),i.weekdayContainer}function P(){if(i.weekdayContainer){var e=i.l10n.firstDayOfWeek,t=Yt(i.l10n.weekdays.shorthand);e>0&&e<t.length&&(t=Yt(t.splice(e,t.length),t.splice(0,e)));for(var a=i.config.showMonths;a--;)i.weekdayContainer.children[a].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+t.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function S(e,t){void 0===t&&(t=!0);var a=t?e:e-i.currentMonth;a<0&&!0===i._hidePrevMonthArrow||a>0&&!0===i._hideNextMonthArrow||(i.currentMonth+=a,(i.currentMonth<0||i.currentMonth>11)&&(i.currentYear+=i.currentMonth>11?1:-1,i.currentMonth=(i.currentMonth+12)%12,J("onYearChange"),x()),w(),J("onMonthChange"),G())}function A(e){return i.calendarContainer.contains(e)}function I(e){if(i.isOpen&&!i.config.inline){var t=Ct(e),a=A(t),s=!(t===i.input||t===i.altInput||i.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(i.input)||~e.path.indexOf(i.altInput)))&&!a&&!A(e.relatedTarget),n=!i.config.ignoredFocusElements.some((function(e){return e.contains(t)}));s&&n&&(i.config.allowInput&&i.setDate(i._input.value,!1,i.config.altInput?i.config.altFormat:i.config.dateFormat),void 0!==i.timeContainer&&void 0!==i.minuteElement&&void 0!==i.hourElement&&""!==i.input.value&&void 0!==i.input.value&&r(),i.close(),i.config&&"range"===i.config.mode&&1===i.selectedDates.length&&i.clear(!1))}}function T(e){if(!(!e||i.config.minDate&&e<i.config.minDate.getFullYear()||i.config.maxDate&&e>i.config.maxDate.getFullYear())){var t=e,a=i.currentYear!==t;i.currentYear=t||i.currentYear,i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth=Math.min(i.config.maxDate.getMonth(),i.currentMonth):i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&(i.currentMonth=Math.max(i.config.minDate.getMonth(),i.currentMonth)),a&&(i.redraw(),J("onYearChange"),x())}}function N(e,t){var a;void 0===t&&(t=!0);var s=i.parseDate(e,void 0,t);if(i.config.minDate&&s&&Ot(s,i.config.minDate,void 0!==t?t:!i.minDateHasTime)<0||i.config.maxDate&&s&&Ot(s,i.config.maxDate,void 0!==t?t:!i.maxDateHasTime)>0)return!1;if(!i.config.enable&&0===i.config.disable.length)return!0;if(void 0===s)return!1;for(var n=!!i.config.enable,r=null!==(a=i.config.enable)&&void 0!==a?a:i.config.disable,o=0,l=void 0;o<r.length;o++){if("function"===typeof(l=r[o])&&l(s))return n;if(l instanceof Date&&void 0!==s&&l.getTime()===s.getTime())return n;if("string"===typeof l){var c=i.parseDate(l,void 0,!0);return c&&c.getTime()===s.getTime()?n:!n}if("object"===typeof l&&void 0!==s&&l.from&&l.to&&s.getTime()>=l.from.getTime()&&s.getTime()<=l.to.getTime())return n}return!n}function O(e){return void 0!==i.daysContainer&&(-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&i.daysContainer.contains(e))}function M(e){var t=e.target===i._input,a=i._input.value.trimEnd()!==Z();!t||!a||e.relatedTarget&&A(e.relatedTarget)||i.setDate(i._input.value,!0,e.target===i.altInput?i.config.altFormat:i.config.dateFormat)}function j(t){var s=Ct(t),n=i.config.wrap?e.contains(s):s===i._input,l=i.config.allowInput,c=i.isOpen&&(!l||!n),h=i.config.inline&&n&&!l;if(13===t.keyCode&&n){if(l)return i.setDate(i._input.value,!0,s===i.altInput?i.config.altFormat:i.config.dateFormat),i.close(),s.blur();i.open()}else if(A(s)||c||h){var d=!!i.timeContainer&&i.timeContainer.contains(s);switch(t.keyCode){case 13:d?(t.preventDefault(),r(),B()):H(t);break;case 27:t.preventDefault(),B();break;case 8:case 46:n&&!i.config.allowInput&&(t.preventDefault(),i.clear());break;case 37:case 39:if(d||n)i.hourElement&&i.hourElement.focus();else{t.preventDefault();var u=a();if(void 0!==i.daysContainer&&(!1===l||u&&O(u))){var g=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),S(g),_(v(1),0)):_(void 0,g)}}break;case 38:case 40:t.preventDefault();var p=40===t.keyCode?1:-1;i.daysContainer&&void 0!==s.$i||s===i.input||s===i.altInput?t.ctrlKey?(t.stopPropagation(),T(i.currentYear-p),_(v(1),0)):d||_(void 0,7*p):s===i.currentYearElement?T(i.currentYear-p):i.config.enableTime&&(!d&&i.hourElement&&i.hourElement.focus(),r(t),i._debouncedChange());break;case 9:if(d){var m=[i.hourElement,i.minuteElement,i.secondElement,i.amPM].concat(i.pluginElements).filter((function(e){return e})),f=m.indexOf(s);if(-1!==f){var b=m[f+(t.shiftKey?-1:1)];t.preventDefault(),(b||i._input).focus()}}else!i.config.noCalendar&&i.daysContainer&&i.daysContainer.contains(s)&&t.shiftKey&&(t.preventDefault(),i._input.focus())}}if(void 0!==i.amPM&&s===i.amPM)switch(t.key){case i.l10n.amPM[0].charAt(0):case i.l10n.amPM[0].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[0],o(),Q();break;case i.l10n.amPM[1].charAt(0):case i.l10n.amPM[1].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[1],o(),Q()}(n||A(s))&&J("onKeyDown",t)}function F(e,t){if(void 0===t&&(t="flatpickr-day"),1===i.selectedDates.length&&(!e||e.classList.contains(t)&&!e.classList.contains("flatpickr-disabled"))){for(var a=e?e.dateObj.getTime():i.days.firstElementChild.dateObj.getTime(),s=i.parseDate(i.selectedDates[0],void 0,!0).getTime(),n=Math.min(a,i.selectedDates[0].getTime()),r=Math.max(a,i.selectedDates[0].getTime()),o=!1,l=0,c=0,h=n;h<r;h+=jt)N(new Date(h),!0)||(o=o||h>n&&h<r,h<s&&(!l||h>l)?l=h:h>s&&(!c||h<c)&&(c=h));Array.from(i.rContainer.querySelectorAll("*:nth-child(-n+"+i.config.showMonths+") > ."+t)).forEach((function(t){var n,r,h,d=t.dateObj.getTime(),u=l>0&&d<l||c>0&&d>c;if(u)return t.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach((function(e){t.classList.remove(e)}));o&&!u||(["startRange","inRange","endRange","notAllowed"].forEach((function(e){t.classList.remove(e)})),void 0!==e&&(e.classList.add(a<=i.selectedDates[0].getTime()?"startRange":"endRange"),s<a&&d===s?t.classList.add("startRange"):s>a&&d===s&&t.classList.add("endRange"),d>=l&&(0===c||d<=c)&&(r=s,h=a,(n=d)>Math.min(r,h)&&n<Math.max(r,h))&&t.classList.add("inRange")))}))}}function E(){!i.isOpen||i.config.static||i.config.inline||V()}function Y(e){return function(t){var a=i.config["_"+e+"Date"]=i.parseDate(t,i.config.dateFormat),s=i.config["_"+("min"===e?"max":"min")+"Date"];void 0!==a&&(i["min"===e?"minDateHasTime":"maxDateHasTime"]=a.getHours()>0||a.getMinutes()>0||a.getSeconds()>0),i.selectedDates&&(i.selectedDates=i.selectedDates.filter((function(e){return N(e)})),i.selectedDates.length||"min"!==e||l(a),Q()),i.daysContainer&&(R(),void 0!==a?i.currentYearElement[e]=a.getFullYear().toString():i.currentYearElement.removeAttribute(e),i.currentYearElement.disabled=!!s&&void 0!==a&&s.getFullYear()===a.getFullYear())}}function X(){return i.config.wrap?e.querySelector("[data-input]"):e}function L(){"object"!==typeof i.config.locale&&"undefined"===typeof Vt.l10ns[i.config.locale]&&i.config.errorHandler(new Error("flatpickr: invalid locale "+i.config.locale)),i.l10n=Et(Et({},Vt.l10ns.default),"object"===typeof i.config.locale?i.config.locale:"default"!==i.config.locale?Vt.l10ns[i.config.locale]:void 0),At.D="("+i.l10n.weekdays.shorthand.join("|")+")",At.l="("+i.l10n.weekdays.longhand.join("|")+")",At.M="("+i.l10n.months.shorthand.join("|")+")",At.F="("+i.l10n.months.longhand.join("|")+")",At.K="("+i.l10n.amPM[0]+"|"+i.l10n.amPM[1]+"|"+i.l10n.amPM[0].toLowerCase()+"|"+i.l10n.amPM[1].toLowerCase()+")",void 0===Et(Et({},t),JSON.parse(JSON.stringify(e.dataset||{}))).time_24hr&&void 0===Vt.defaultConfig.time_24hr&&(i.config.time_24hr=i.l10n.time_24hr),i.formatDate=Tt(i),i.parseDate=Nt({config:i.config,l10n:i.l10n})}function V(e){if("function"!==typeof i.config.position){if(void 0!==i.calendarContainer){J("onPreCalendarPosition");var t=e||i._positionElement,a=Array.prototype.reduce.call(i.calendarContainer.children,(function(e,t){return e+t.offsetHeight}),0),s=i.calendarContainer.offsetWidth,n=i.config.position.split(" "),r=n[0],o=n.length>1?n[1]:null,l=t.getBoundingClientRect(),c=window.innerHeight-l.bottom,h="above"===r||"below"!==r&&c<a&&l.top>a,d=window.pageYOffset+l.top+(h?-a-2:t.offsetHeight+2);if(_t(i.calendarContainer,"arrowTop",!h),_t(i.calendarContainer,"arrowBottom",h),!i.config.inline){var u=window.pageXOffset+l.left,g=!1,p=!1;"center"===o?(u-=(s-l.width)/2,g=!0):"right"===o&&(u-=s-l.width,p=!0),_t(i.calendarContainer,"arrowLeft",!g&&!p),_t(i.calendarContainer,"arrowCenter",g),_t(i.calendarContainer,"arrowRight",p);var m=window.document.body.offsetWidth-(window.pageXOffset+l.right),f=u+s>window.document.body.offsetWidth,b=m+s>window.document.body.offsetWidth;if(_t(i.calendarContainer,"rightMost",f),!i.config.static)if(i.calendarContainer.style.top=d+"px",f)if(b){var v=function(){for(var e=null,t=0;t<document.styleSheets.length;t++){var i=document.styleSheets[t];if(i.cssRules){try{i.cssRules}catch(a){continue}e=i;break}}return null!=e?e:function(){var e=document.createElement("style");return document.head.appendChild(e),e.sheet}()}();if(void 0===v)return;var _=window.document.body.offsetWidth,y=Math.max(0,_/2-s/2),w=v.cssRules.length,x="{left:"+l.left+"px;right:auto;}";_t(i.calendarContainer,"rightMost",!1),_t(i.calendarContainer,"centerMost",!0),v.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+x,w),i.calendarContainer.style.left=y+"px",i.calendarContainer.style.right="auto"}else i.calendarContainer.style.left="auto",i.calendarContainer.style.right=m+"px";else i.calendarContainer.style.left=u+"px",i.calendarContainer.style.right="auto"}}}else i.config.position(i,e)}function R(){i.config.noCalendar||i.isMobile||(x(),G(),w())}function B(){i._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(i.close,0):i.close()}function H(e){e.preventDefault(),e.stopPropagation();var t=xt(Ct(e),(function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")}));if(void 0!==t){var a=t,s=i.latestSelectedDateObj=new Date(a.dateObj.getTime()),n=(s.getMonth()<i.currentMonth||s.getMonth()>i.currentMonth+i.config.showMonths-1)&&"range"!==i.config.mode;if(i.selectedDateElem=a,"single"===i.config.mode)i.selectedDates=[s];else if("multiple"===i.config.mode){var r=q(s);r?i.selectedDates.splice(parseInt(r),1):i.selectedDates.push(s)}else"range"===i.config.mode&&(2===i.selectedDates.length&&i.clear(!1,!1),i.latestSelectedDateObj=s,i.selectedDates.push(s),0!==Ot(s,i.selectedDates[0],!0)&&i.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()})));if(o(),n){var l=i.currentYear!==s.getFullYear();i.currentYear=s.getFullYear(),i.currentMonth=s.getMonth(),l&&(J("onYearChange"),x()),J("onMonthChange")}if(G(),w(),Q(),n||"range"===i.config.mode||1!==i.config.showMonths?void 0!==i.selectedDateElem&&void 0===i.hourElement&&i.selectedDateElem&&i.selectedDateElem.focus():b(a),void 0!==i.hourElement&&void 0!==i.hourElement&&i.hourElement.focus(),i.config.closeOnSelect){var c="single"===i.config.mode&&!i.config.enableTime,h="range"===i.config.mode&&2===i.selectedDates.length&&!i.config.enableTime;(c||h)&&B()}u()}}i.parseDate=Nt({config:i.config,l10n:i.l10n}),i._handlers=[],i.pluginElements=[],i.loadedPlugins=[],i._bind=d,i._setHoursFromDate=l,i._positionCalendar=V,i.changeMonth=S,i.changeYear=T,i.clear=function(e,t){void 0===e&&(e=!0);void 0===t&&(t=!0);i.input.value="",void 0!==i.altInput&&(i.altInput.value="");void 0!==i.mobileInput&&(i.mobileInput.value="");i.selectedDates=[],i.latestSelectedDateObj=void 0,!0===t&&(i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth());if(!0===i.config.enableTime){var a=Ft(i.config);c(a.hours,a.minutes,a.seconds)}i.redraw(),e&&J("onChange")},i.close=function(){i.isOpen=!1,i.isMobile||(void 0!==i.calendarContainer&&i.calendarContainer.classList.remove("open"),void 0!==i._input&&i._input.classList.remove("active"));J("onClose")},i.onMouseOver=F,i._createElement=yt,i.createDay=f,i.destroy=function(){void 0!==i.config&&J("onDestroy");for(var e=i._handlers.length;e--;)i._handlers[e].remove();if(i._handlers=[],i.mobileInput)i.mobileInput.parentNode&&i.mobileInput.parentNode.removeChild(i.mobileInput),i.mobileInput=void 0;else if(i.calendarContainer&&i.calendarContainer.parentNode)if(i.config.static&&i.calendarContainer.parentNode){var t=i.calendarContainer.parentNode;if(t.lastChild&&t.removeChild(t.lastChild),t.parentNode){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else i.calendarContainer.parentNode.removeChild(i.calendarContainer);i.altInput&&(i.input.type="text",i.altInput.parentNode&&i.altInput.parentNode.removeChild(i.altInput),delete i.altInput);i.input&&(i.input.type=i.input._type,i.input.classList.remove("flatpickr-input"),i.input.removeAttribute("readonly"));["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(e){try{delete i[e]}catch(t){}}))},i.isEnabled=N,i.jumpToDate=g,i.updateValue=Q,i.open=function(e,t){void 0===t&&(t=i._positionElement);if(!0===i.isMobile){if(e){e.preventDefault();var a=Ct(e);a&&a.blur()}return void 0!==i.mobileInput&&(i.mobileInput.focus(),i.mobileInput.click()),void J("onOpen")}if(i._input.disabled||i.config.inline)return;var s=i.isOpen;i.isOpen=!0,s||(i.calendarContainer.classList.add("open"),i._input.classList.add("active"),J("onOpen"),V(t));!0===i.config.enableTime&&!0===i.config.noCalendar&&(!1!==i.config.allowInput||void 0!==e&&i.timeContainer.contains(e.relatedTarget)||setTimeout((function(){return i.hourElement.select()}),50))},i.redraw=R,i.set=function(e,t){if(null!==e&&"object"===typeof e)for(var a in Object.assign(i.config,e),e)void 0!==z[a]&&z[a].forEach((function(e){return e()}));else i.config[e]=t,void 0!==z[e]?z[e].forEach((function(e){return e()})):dt.indexOf(e)>-1&&(i.config[e]=vt(t));i.redraw(),Q(!0)},i.setDate=function(e,t,a){void 0===t&&(t=!1);void 0===a&&(a=i.config.dateFormat);if(0!==e&&!e||e instanceof Array&&0===e.length)return i.clear(t);W(e,a),i.latestSelectedDateObj=i.selectedDates[i.selectedDates.length-1],i.redraw(),g(void 0,t),l(),0===i.selectedDates.length&&i.clear(!1);Q(t),t&&J("onChange")},i.toggle=function(e){if(!0===i.isOpen)return i.close();i.open(e)};var z={locale:[L,P],showMonths:[C,n,D],minDate:[g],maxDate:[g],positionElement:[U],clickOpens:[function(){!0===i.config.clickOpens?(d(i._input,"focus",i.open),d(i._input,"click",i.open)):(i._input.removeEventListener("focus",i.open),i._input.removeEventListener("click",i.open))}]};function W(e,t){var a=[];if(e instanceof Array)a=e.map((function(e){return i.parseDate(e,t)}));else if(e instanceof Date||"number"===typeof e)a=[i.parseDate(e,t)];else if("string"===typeof e)switch(i.config.mode){case"single":case"time":a=[i.parseDate(e,t)];break;case"multiple":a=e.split(i.config.conjunction).map((function(e){return i.parseDate(e,t)}));break;case"range":a=e.split(i.l10n.rangeSeparator).map((function(e){return i.parseDate(e,t)}))}else i.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));i.selectedDates=i.config.allowInvalidPreload?a:a.filter((function(e){return e instanceof Date&&N(e,!1)})),"range"===i.config.mode&&i.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()}))}function $(e){return e.slice().map((function(e){return"string"===typeof e||"number"===typeof e||e instanceof Date?i.parseDate(e,void 0,!0):e&&"object"===typeof e&&e.from&&e.to?{from:i.parseDate(e.from,void 0),to:i.parseDate(e.to,void 0)}:e})).filter((function(e){return e}))}function U(){i._positionElement=i.config.positionElement||i._input}function J(e,t){if(void 0!==i.config){var a=i.config[e];if(void 0!==a&&a.length>0)for(var s=0;a[s]&&s<a.length;s++)a[s](i.selectedDates,i.input.value,i,t);"onChange"===e&&(i.input.dispatchEvent(K("change")),i.input.dispatchEvent(K("input")))}}function K(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function q(e){for(var t=0;t<i.selectedDates.length;t++){var a=i.selectedDates[t];if(a instanceof Date&&0===Ot(a,e))return""+t}return!1}function G(){i.config.noCalendar||i.isMobile||!i.monthNav||(i.yearElements.forEach((function(e,t){var a=new Date(i.currentYear,i.currentMonth,1);a.setMonth(i.currentMonth+t),i.config.showMonths>1||"static"===i.config.monthSelectorType?i.monthElements[t].textContent=Pt(a.getMonth(),i.config.shorthandCurrentMonth,i.l10n)+" ":i.monthsDropdownContainer.value=a.getMonth().toString(),e.value=a.getFullYear().toString()})),i._hidePrevMonthArrow=void 0!==i.config.minDate&&(i.currentYear===i.config.minDate.getFullYear()?i.currentMonth<=i.config.minDate.getMonth():i.currentYear<i.config.minDate.getFullYear()),i._hideNextMonthArrow=void 0!==i.config.maxDate&&(i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth+1>i.config.maxDate.getMonth():i.currentYear>i.config.maxDate.getFullYear()))}function Z(e){var t=e||(i.config.altInput?i.config.altFormat:i.config.dateFormat);return i.selectedDates.map((function(e){return i.formatDate(e,t)})).filter((function(e,t,a){return"range"!==i.config.mode||i.config.enableTime||a.indexOf(e)===t})).join("range"!==i.config.mode?i.config.conjunction:i.l10n.rangeSeparator)}function Q(e){void 0===e&&(e=!0),void 0!==i.mobileInput&&i.mobileFormatStr&&(i.mobileInput.value=void 0!==i.latestSelectedDateObj?i.formatDate(i.latestSelectedDateObj,i.mobileFormatStr):""),i.input.value=Z(i.config.dateFormat),void 0!==i.altInput&&(i.altInput.value=Z(i.config.altFormat)),!1!==e&&J("onValueUpdate")}function ee(e){var t=Ct(e),a=i.prevMonthNav.contains(t),s=i.nextMonthNav.contains(t);a||s?S(a?-1:1):i.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?i.changeYear(i.currentYear+1):t.classList.contains("arrowDown")&&i.changeYear(i.currentYear-1)}return function(){i.element=i.input=e,i.isOpen=!1,function(){var a=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],n=Et(Et({},JSON.parse(JSON.stringify(e.dataset||{}))),t),r={};i.config.parseDate=n.parseDate,i.config.formatDate=n.formatDate,Object.defineProperty(i.config,"enable",{get:function(){return i.config._enable},set:function(e){i.config._enable=$(e)}}),Object.defineProperty(i.config,"disable",{get:function(){return i.config._disable},set:function(e){i.config._disable=$(e)}});var o="time"===n.mode;if(!n.dateFormat&&(n.enableTime||o)){var l=Vt.defaultConfig.dateFormat||ut.dateFormat;r.dateFormat=n.noCalendar||o?"H:i"+(n.enableSeconds?":S":""):l+" H:i"+(n.enableSeconds?":S":"")}if(n.altInput&&(n.enableTime||o)&&!n.altFormat){var c=Vt.defaultConfig.altFormat||ut.altFormat;r.altFormat=n.noCalendar||o?"h:i"+(n.enableSeconds?":S K":" K"):c+" h:i"+(n.enableSeconds?":S":"")+" K"}Object.defineProperty(i.config,"minDate",{get:function(){return i.config._minDate},set:Y("min")}),Object.defineProperty(i.config,"maxDate",{get:function(){return i.config._maxDate},set:Y("max")});var h=function(e){return function(t){i.config["min"===e?"_minTime":"_maxTime"]=i.parseDate(t,"H:i:S")}};Object.defineProperty(i.config,"minTime",{get:function(){return i.config._minTime},set:h("min")}),Object.defineProperty(i.config,"maxTime",{get:function(){return i.config._maxTime},set:h("max")}),"time"===n.mode&&(i.config.noCalendar=!0,i.config.enableTime=!0);Object.assign(i.config,r,n);for(var d=0;d<a.length;d++)i.config[a[d]]=!0===i.config[a[d]]||"true"===i.config[a[d]];dt.filter((function(e){return void 0!==i.config[e]})).forEach((function(e){i.config[e]=vt(i.config[e]||[]).map(s)})),i.isMobile=!i.config.disableMobile&&!i.config.inline&&"single"===i.config.mode&&!i.config.disable.length&&!i.config.enable&&!i.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(d=0;d<i.config.plugins.length;d++){var u=i.config.plugins[d](i)||{};for(var g in u)dt.indexOf(g)>-1?i.config[g]=vt(u[g]).map(s).concat(i.config[g]):"undefined"===typeof n[g]&&(i.config[g]=u[g])}n.altInputClass||(i.config.altInputClass=X().className+" "+i.config.altInputClass);J("onParseConfig")}(),L(),function(){if(i.input=X(),!i.input)return void i.config.errorHandler(new Error("Invalid input element specified"));i.input._type=i.input.type,i.input.type="text",i.input.classList.add("flatpickr-input"),i._input=i.input,i.config.altInput&&(i.altInput=yt(i.input.nodeName,i.config.altInputClass),i._input=i.altInput,i.altInput.placeholder=i.input.placeholder,i.altInput.disabled=i.input.disabled,i.altInput.required=i.input.required,i.altInput.tabIndex=i.input.tabIndex,i.altInput.type="text",i.input.setAttribute("type","hidden"),!i.config.static&&i.input.parentNode&&i.input.parentNode.insertBefore(i.altInput,i.input.nextSibling));i.config.allowInput||i._input.setAttribute("readonly","readonly");U()}(),function(){i.selectedDates=[],i.now=i.parseDate(i.config.now)||new Date;var e=i.config.defaultDate||("INPUT"!==i.input.nodeName&&"TEXTAREA"!==i.input.nodeName||!i.input.placeholder||i.input.value!==i.input.placeholder?i.input.value:null);e&&W(e,i.config.dateFormat);i._initialDate=i.selectedDates.length>0?i.selectedDates[0]:i.config.minDate&&i.config.minDate.getTime()>i.now.getTime()?i.config.minDate:i.config.maxDate&&i.config.maxDate.getTime()<i.now.getTime()?i.config.maxDate:i.now,i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth(),i.selectedDates.length>0&&(i.latestSelectedDateObj=i.selectedDates[0]);void 0!==i.config.minTime&&(i.config.minTime=i.parseDate(i.config.minTime,"H:i"));void 0!==i.config.maxTime&&(i.config.maxTime=i.parseDate(i.config.maxTime,"H:i"));i.minDateHasTime=!!i.config.minDate&&(i.config.minDate.getHours()>0||i.config.minDate.getMinutes()>0||i.config.minDate.getSeconds()>0),i.maxDateHasTime=!!i.config.maxDate&&(i.config.maxDate.getHours()>0||i.config.maxDate.getMinutes()>0||i.config.maxDate.getSeconds()>0)}(),i.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=i.currentMonth),void 0===t&&(t=i.currentYear),1===e&&(t%4===0&&t%100!==0||t%400===0)?29:i.l10n.daysInMonth[e]}},i.isMobile||function(){var e=window.document.createDocumentFragment();if(i.calendarContainer=yt("div","flatpickr-calendar"),i.calendarContainer.tabIndex=-1,!i.config.noCalendar){if(e.appendChild((i.monthNav=yt("div","flatpickr-months"),i.yearElements=[],i.monthElements=[],i.prevMonthNav=yt("span","flatpickr-prev-month"),i.prevMonthNav.innerHTML=i.config.prevArrow,i.nextMonthNav=yt("span","flatpickr-next-month"),i.nextMonthNav.innerHTML=i.config.nextArrow,C(),Object.defineProperty(i,"_hidePrevMonthArrow",{get:function(){return i.__hidePrevMonthArrow},set:function(e){i.__hidePrevMonthArrow!==e&&(_t(i.prevMonthNav,"flatpickr-disabled",e),i.__hidePrevMonthArrow=e)}}),Object.defineProperty(i,"_hideNextMonthArrow",{get:function(){return i.__hideNextMonthArrow},set:function(e){i.__hideNextMonthArrow!==e&&(_t(i.nextMonthNav,"flatpickr-disabled",e),i.__hideNextMonthArrow=e)}}),i.currentYearElement=i.yearElements[0],G(),i.monthNav)),i.innerContainer=yt("div","flatpickr-innerContainer"),i.config.weekNumbers){var t=function(){i.calendarContainer.classList.add("hasWeeks");var e=yt("div","flatpickr-weekwrapper");e.appendChild(yt("span","flatpickr-weekday",i.l10n.weekAbbreviation));var t=yt("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),a=t.weekWrapper,s=t.weekNumbers;i.innerContainer.appendChild(a),i.weekNumbers=s,i.weekWrapper=a}i.rContainer=yt("div","flatpickr-rContainer"),i.rContainer.appendChild(D()),i.daysContainer||(i.daysContainer=yt("div","flatpickr-days"),i.daysContainer.tabIndex=-1),w(),i.rContainer.appendChild(i.daysContainer),i.innerContainer.appendChild(i.rContainer),e.appendChild(i.innerContainer)}i.config.enableTime&&e.appendChild(function(){i.calendarContainer.classList.add("hasTime"),i.config.noCalendar&&i.calendarContainer.classList.add("noCalendar");var e=Ft(i.config);i.timeContainer=yt("div","flatpickr-time"),i.timeContainer.tabIndex=-1;var t=yt("span","flatpickr-time-separator",":"),a=kt("flatpickr-hour",{"aria-label":i.l10n.hourAriaLabel});i.hourElement=a.getElementsByTagName("input")[0];var s=kt("flatpickr-minute",{"aria-label":i.l10n.minuteAriaLabel});i.minuteElement=s.getElementsByTagName("input")[0],i.hourElement.tabIndex=i.minuteElement.tabIndex=-1,i.hourElement.value=mt(i.latestSelectedDateObj?i.latestSelectedDateObj.getHours():i.config.time_24hr?e.hours:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(e.hours)),i.minuteElement.value=mt(i.latestSelectedDateObj?i.latestSelectedDateObj.getMinutes():e.minutes),i.hourElement.setAttribute("step",i.config.hourIncrement.toString()),i.minuteElement.setAttribute("step",i.config.minuteIncrement.toString()),i.hourElement.setAttribute("min",i.config.time_24hr?"0":"1"),i.hourElement.setAttribute("max",i.config.time_24hr?"23":"12"),i.hourElement.setAttribute("maxlength","2"),i.minuteElement.setAttribute("min","0"),i.minuteElement.setAttribute("max","59"),i.minuteElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(a),i.timeContainer.appendChild(t),i.timeContainer.appendChild(s),i.config.time_24hr&&i.timeContainer.classList.add("time24hr");if(i.config.enableSeconds){i.timeContainer.classList.add("hasSeconds");var n=kt("flatpickr-second");i.secondElement=n.getElementsByTagName("input")[0],i.secondElement.value=mt(i.latestSelectedDateObj?i.latestSelectedDateObj.getSeconds():e.seconds),i.secondElement.setAttribute("step",i.minuteElement.getAttribute("step")),i.secondElement.setAttribute("min","0"),i.secondElement.setAttribute("max","59"),i.secondElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(yt("span","flatpickr-time-separator",":")),i.timeContainer.appendChild(n)}i.config.time_24hr||(i.amPM=yt("span","flatpickr-am-pm",i.l10n.amPM[ft((i.latestSelectedDateObj?i.hourElement.value:i.config.defaultHour)>11)]),i.amPM.title=i.l10n.toggleTitle,i.amPM.tabIndex=-1,i.timeContainer.appendChild(i.amPM));return i.timeContainer}());_t(i.calendarContainer,"rangeMode","range"===i.config.mode),_t(i.calendarContainer,"animate",!0===i.config.animate),_t(i.calendarContainer,"multiMonth",i.config.showMonths>1),i.calendarContainer.appendChild(e);var n=void 0!==i.config.appendTo&&void 0!==i.config.appendTo.nodeType;if((i.config.inline||i.config.static)&&(i.calendarContainer.classList.add(i.config.inline?"inline":"static"),i.config.inline&&(!n&&i.element.parentNode?i.element.parentNode.insertBefore(i.calendarContainer,i._input.nextSibling):void 0!==i.config.appendTo&&i.config.appendTo.appendChild(i.calendarContainer)),i.config.static)){var r=yt("div","flatpickr-wrapper");i.element.parentNode&&i.element.parentNode.insertBefore(r,i.element),r.appendChild(i.element),i.altInput&&r.appendChild(i.altInput),r.appendChild(i.calendarContainer)}i.config.static||i.config.inline||(void 0!==i.config.appendTo?i.config.appendTo:window.document.body).appendChild(i.calendarContainer)}(),function(){i.config.wrap&&["open","close","toggle","clear"].forEach((function(e){Array.prototype.forEach.call(i.element.querySelectorAll("[data-"+e+"]"),(function(t){return d(t,"click",i[e])}))}));if(i.isMobile)return void function(){var e=i.config.enableTime?i.config.noCalendar?"time":"datetime-local":"date";i.mobileInput=yt("input",i.input.className+" flatpickr-mobile"),i.mobileInput.tabIndex=1,i.mobileInput.type=e,i.mobileInput.disabled=i.input.disabled,i.mobileInput.required=i.input.required,i.mobileInput.placeholder=i.input.placeholder,i.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",i.selectedDates.length>0&&(i.mobileInput.defaultValue=i.mobileInput.value=i.formatDate(i.selectedDates[0],i.mobileFormatStr));i.config.minDate&&(i.mobileInput.min=i.formatDate(i.config.minDate,"Y-m-d"));i.config.maxDate&&(i.mobileInput.max=i.formatDate(i.config.maxDate,"Y-m-d"));i.input.getAttribute("step")&&(i.mobileInput.step=String(i.input.getAttribute("step")));i.input.type="hidden",void 0!==i.altInput&&(i.altInput.type="hidden");try{i.input.parentNode&&i.input.parentNode.insertBefore(i.mobileInput,i.input.nextSibling)}catch(t){}d(i.mobileInput,"change",(function(e){i.setDate(Ct(e).value,!1,i.mobileFormatStr),J("onChange"),J("onClose")}))}();var e=bt(E,50);i._debouncedChange=bt(u,300),i.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&d(i.daysContainer,"mouseover",(function(e){"range"===i.config.mode&&F(Ct(e))}));d(i._input,"keydown",j),void 0!==i.calendarContainer&&d(i.calendarContainer,"keydown",j);i.config.inline||i.config.static||d(window,"resize",e);void 0!==window.ontouchstart?d(window.document,"touchstart",I):d(window.document,"mousedown",I);d(window.document,"focus",I,{capture:!0}),!0===i.config.clickOpens&&(d(i._input,"focus",i.open),d(i._input,"click",i.open));void 0!==i.daysContainer&&(d(i.monthNav,"click",ee),d(i.monthNav,["keyup","increment"],h),d(i.daysContainer,"click",H));if(void 0!==i.timeContainer&&void 0!==i.minuteElement&&void 0!==i.hourElement){var t=function(e){return Ct(e).select()};d(i.timeContainer,["increment"],r),d(i.timeContainer,"blur",r,{capture:!0}),d(i.timeContainer,"click",p),d([i.hourElement,i.minuteElement],["focus","click"],t),void 0!==i.secondElement&&d(i.secondElement,"focus",(function(){return i.secondElement&&i.secondElement.select()})),void 0!==i.amPM&&d(i.amPM,"click",(function(e){r(e)}))}i.config.allowInput&&d(i._input,"blur",M)}(),(i.selectedDates.length||i.config.noCalendar)&&(i.config.enableTime&&l(i.config.noCalendar?i.latestSelectedDateObj:void 0),Q(!1)),n();var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!i.isMobile&&a&&V(),J("onReady")}(),i}function Lt(e,t){for(var i=Array.prototype.slice.call(e).filter((function(e){return e instanceof HTMLElement})),a=[],s=0;s<i.length;s++){var n=i[s];try{if(null!==n.getAttribute("data-fp-omit"))continue;void 0!==n._flatpickr&&(n._flatpickr.destroy(),n._flatpickr=void 0),n._flatpickr=Xt(n,t||{}),a.push(n._flatpickr)}catch(r){console.error(r)}}return 1===a.length?a[0]:a}"undefined"!==typeof HTMLElement&&"undefined"!==typeof HTMLCollection&&"undefined"!==typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return Lt(this,e)},HTMLElement.prototype.flatpickr=function(e){return Lt([this],e)});var Vt=function(e,t){return"string"===typeof e?Lt(window.document.querySelectorAll(e),t):e instanceof Node?Lt([e],t):Lt(e,t)};Vt.defaultConfig={},Vt.l10ns={en:Et({},pt),default:Et({},pt)},Vt.localize=function(e){Vt.l10ns.default=Et(Et({},Vt.l10ns.default),e)},Vt.setDefaults=function(e){Vt.defaultConfig=Et(Et({},Vt.defaultConfig),e)},Vt.parseDate=Nt({}),Vt.formatDate=Tt({}),Vt.compareDates=Ot,"undefined"!==typeof jQuery&&"undefined"!==typeof jQuery.fn&&(jQuery.fn.flatpickr=function(e){return Lt(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"===typeof e?parseInt(e,10):e))},"undefined"!==typeof window&&(window.flatpickr=Vt);var Rt=Vt;class Bt extends Ge.a{_afterNew(){super._afterNew();const e=Ze.a.new(this._root,{control:this,parent:this.getPrivate("button")});this.setPrivate("dropdown",e),e.events.on("opened",(e=>{this.set("active",!0),this._updateInputs()})),e.events.on("closed",(e=>{this.set("active",!1)})),this.on("active",(t=>{t?this.setTimeout((()=>{e.show()}),10):e.hide()}));const t=this.getPrivate("button");t.className=t.className+" am5stock-control-dropdown",this.get("useDefaultCSS",!0)&&this._loadDefaultCSS(),this._initDropdown()}_initDropdown(){const e=this.getPrivate("dropdown").getPrivate("container"),t=document.createElement("div");t.className="am5stock-row",e.appendChild(t);const i=document.createElement("div");i.className="am5stock-column",t.appendChild(i);const a=document.createElement("div");a.className="am5stock-group",i.appendChild(a);const s=document.createElement("div");s.className="am5stock-small",s.innerHTML=this._root.language.translate("From %1",void 0,""),a.appendChild(s);const n=document.createElement("input");n.type="text",a.appendChild(n),this.setPrivate("fromField",n);const r=document.createElement("div");r.className="am5stock-column",t.appendChild(r);const o=document.createElement("div");o.className="am5stock-group",r.appendChild(o);const l=document.createElement("div");l.className="am5stock-small",l.innerHTML=this._root.language.translate("To %1",void 0,""),o.appendChild(l);const c=document.createElement("input");c.type="text",o.appendChild(c),this.setPrivate("toField",c);const h=this._getPickerLocale(),d=Rt(n,{inline:!0,appendTo:i,allowInput:!0,locale:h,formatDate:e=>this._formatDate(e),parseDate:e=>this._parseDate(e)});this.setPrivate("fromPicker",d);const u=Rt(c,{inline:!0,appendTo:r,allowInput:!0,locale:h,formatDate:e=>this._formatDate(e),parseDate:e=>this._parseDate(e)});this.setPrivate("toPicker",u);const g=document.createElement("div");g.className="am5stock-row",e.appendChild(g);const p=document.createElement("div");p.className="am5stock-column",e.appendChild(p);const m=document.createElement("input");m.type="button",m.value=this._root.language.translateAny("Apply"),m.className="am5-modal-button am5-modal-primary",p.appendChild(m);const f=this._getAxis();f.onPrivate("selectionMin",(()=>{this.getPrivate("fromDate")&&(this._updateInputs(),this._updateLabel())})),f.onPrivate("selectionMax",(()=>{this.getPrivate("toDate")&&(this._updateInputs(),this._updateLabel())})),f.onPrivate("minFinal",(()=>{this._updatePickers()})),f.onPrivate("maxFinal",(()=>{this._updatePickers()})),this._disposers.push(Ke.addEventListener(m,"click",(()=>{const e=this._parseDate(n.value),t=this._parseDate(c.value);t.setHours(23,59,59),this.setPrivate("fromDate",e),this.setPrivate("toDate",t),f.zoomToDates(e,t),this._updateLabel(),this.set("active",!1);const i="rangeselected";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,fromDate:e,toDate:t})})));const b=document.createElement("input");b.type="button",b.value=this._root.language.translateAny("Cancel"),b.className="am5-modal-button am5-modal-scondary",p.appendChild(b),this._disposers.push(Ke.addEventListener(b,"click",(()=>{this.set("active",!1)})))}_getDefaultIcon(){return et.a.getIcon("Calendar")}_afterChanged(){super._afterChanged()}_updateInputs(){const e=this._getAxis(),t=e.getPrivate("selectionMin",0),i=e.getPrivate("selectionMax",0);if(!t||!i)return;const a=new Date(t+1),s=new Date(i-1);this.setPrivate("fromDate",a),this.setPrivate("toDate",s),this.getPrivate("fromField").value=this._formatDate(a),this.getPrivate("toField").value=this._formatDate(s);const n=this.getPrivate("fromPicker"),r=n.config.minDate;!r||r<=a?n.setDate(a):n.setDate(r);const o=this.getPrivate("toPicker"),l=o.config.maxDate;!l||l>=s?o.setDate(s):o.setDate(l)}_updatePickers(){const e=this._getAxis(),t=this.get("minDate"),i=this.get("maxDate"),a=this.getPrivate("toPicker"),s=this.getPrivate("fromPicker");if("auto"==t){const t=e.getPrivate("minFinal");t&&(s.set("minDate",new Date(t+1)),a.set("minDate",new Date(t+1)))}else t instanceof Date?(s.set("minDate",t),a.set("minDate",t)):(s.set("minDate",void 0),a.set("minDate",void 0));if("auto"==i){const t=e.getPrivate("maxFinal")-1;t&&(s.set("maxDate",new Date(t)),a.set("maxDate",new Date(t)))}else i instanceof Date?(s.set("maxDate",i),a.set("maxDate",i)):(s.set("maxDate",void 0),a.set("maxDate",void 0))}_updateLabel(){const e=this.getPrivate("fromDate"),t=this.getPrivate("toDate");let i="";i=e&&t?this._formatDate(e)+" -- "+this._formatDate(t):this._root.language.translateAny("Date Range"),this.set("name",i)}_formatDate(e){return this._root.dateFormatter.format(e,this._getDateFormat(),!0)}_parseDate(e){return this._root.dateFormatter.parse(e,this._getDateFormat())}_getDateFormat(){const e=this.get("dateFormat",this._root.dateFormatter.get("dateFormat"));return k.isString(e)?e:"MM/dd/yyyy"}_getAxis(){return this.get("stockChart").panels.getIndex(0).xAxes.getIndex(0)}_getPickerLocale(){const e=this._root.language;return{weekdays:{shorthand:[e.translate("Sun"),e.translate("Mon"),e.translate("Tue"),e.translate("Wed"),e.translate("Thu"),e.translate("Fri"),e.translate("Sat")],longhand:[e.translate("Sunday"),e.translate("Monday"),e.translate("Tuesday"),e.translate("Wednesday"),e.translate("Thursday"),e.translate("Friday"),e.translate("Saturday")]},months:{shorthand:[e.translate("Jan"),e.translate("Feb"),e.translate("Mar"),e.translate("Apr"),e.translate("May(short)"),e.translate("Jun"),e.translate("Jul"),e.translate("Aug"),e.translate("Sep"),e.translate("Oct"),e.translate("Nov"),e.translate("Dec")],longhand:[e.translate("January"),e.translate("February"),e.translate("March"),e.translate("April"),e.translate("May"),e.translate("June"),e.translate("July"),e.translate("August"),e.translate("September"),e.translate("October"),e.translate("November"),e.translate("December")]},firstDayOfWeek:e.translate("firstDayOfWeek"),ordinal:e.translateFunc("_dateOrd"),rangeSeparator:" "+e.translateAny("to")+" ",weekAbbreviation:e.translateAny("Wk"),scrollTitle:e.translateAny("Scroll to increment"),toggleTitle:e.translateAny("Click to toggle"),amPM:[e.translate("AM"),e.translate("PM")],yearAriaLabel:e.translateAny("Year"),monthAriaLabel:e.translateAny("Month"),hourAriaLabel:e.translateAny("Hour"),minuteAriaLabel:e.translateAny("Minute"),time_24hr:!0}}_loadDefaultCSS(){const e=this._root.interfaceColors,t=e.get("primaryButton").toCSS(),i=e.get("primaryButtonHover").toCSS(),a=e.get("text").toCSS(),s=e.get("secondaryButtonActive").toCSS(),n=e.get("background").toCSS();this._disposers.push(new Ke.StyleSheet(null,`\n.flatpickr-calendar {\n  background: transparent;\n  opacity: 0;\n  display: none;\n  text-align: center;\n  visibility: hidden;\n  padding: 0;\n  -webkit-animation: none;\n          animation: none;\n  direction: ltr;\n  border: 0;\n  font-size: 12px;\n  line-height: 24px;\n  border-radius: 5px;\n  position: absolute;\n  width: 200px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -ms-touch-action: manipulation;\n      touch-action: manipulation;\n  background: ${n};\n  margin-top: 0.5em;\n}\n.flatpickr-calendar.open,\n.flatpickr-calendar.inline {\n  opacity: 1;\n  max-height: 640px;\n  visibility: visible;\n}\n.flatpickr-calendar.open {\n  display: inline-block;\n  z-index: 99999;\n}\n.flatpickr-calendar.animate.open {\n  -webkit-animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n          animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n}\n.flatpickr-calendar.inline {\n  display: block;\n  position: relative;\n  top: 2px;\n}\n.flatpickr-calendar.static {\n  position: absolute;\n  top: calc(100% + 2px);\n}\n.flatpickr-calendar.static.open {\n  z-index: 999;\n  display: block;\n}\n.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+1) .flatpickr-day.inRange:nth-child(7n+7) {\n  -webkit-box-shadow: none !important;\n          box-shadow: none !important;\n}\n.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+2) .flatpickr-day.inRange:nth-child(7n+1) {\n  -webkit-box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n          box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n}\n.flatpickr-calendar .hasWeeks .dayContainer,\n.flatpickr-calendar .hasTime .dayContainer {\n  border-bottom: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.flatpickr-calendar .hasWeeks .dayContainer {\n  border-left: 0;\n}\n.flatpickr-calendar.hasTime .flatpickr-time {\n  height: 40px;\n  border-top: 1px solid ${s};\n}\n.flatpickr-calendar.noCalendar.hasTime .flatpickr-time {\n  height: auto;\n}\n.flatpickr-calendar:before,\n.flatpickr-calendar:after {\n  position: absolute;\n  display: block;\n  pointer-events: none;\n  border: solid transparent;\n  content: '';\n  height: 0;\n  width: 0;\n  left: 22px;\n}\n.flatpickr-calendar.rightMost:before,\n.flatpickr-calendar.arrowRight:before,\n.flatpickr-calendar.rightMost:after,\n.flatpickr-calendar.arrowRight:after {\n  left: auto;\n  right: 22px;\n}\n.flatpickr-calendar.arrowCenter:before,\n.flatpickr-calendar.arrowCenter:after {\n  left: 50%;\n  right: 50%;\n}\n.flatpickr-calendar:before {\n  border-width: 5px;\n  margin: 0 -5px;\n}\n.flatpickr-calendar:after {\n  border-width: 4px;\n  margin: 0 -4px;\n}\n.flatpickr-calendar.arrowTop:before,\n.flatpickr-calendar.arrowTop:after {\n  bottom: 100%;\n}\n.flatpickr-calendar.arrowTop:before {\n  border-bottom-color: ${s};\n}\n.flatpickr-calendar.arrowTop:after {\n  border-bottom-color: ${n};\n}\n.flatpickr-calendar.arrowBottom:before,\n.flatpickr-calendar.arrowBottom:after {\n  top: 100%;\n}\n.flatpickr-calendar.arrowBottom:before {\n  border-top-color: ${s};\n}\n.flatpickr-calendar.arrowBottom:after {\n  border-top-color: ${n};\n}\n.flatpickr-calendar:focus {\n  outline: 0;\n}\n.flatpickr-wrapper {\n  position: relative;\n  display: inline-block;\n}\n.flatpickr-months {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flatpickr-months .flatpickr-month {\n  background: transparent;\n  color: ${a};\n  fill: ${a};\n  height: 34px;\n  line-height: 1;\n  text-align: center;\n  position: relative;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  overflow: hidden;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.flatpickr-months .flatpickr-prev-month,\n.flatpickr-months .flatpickr-next-month {\n  text-decoration: none;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  height: 34px;\n  padding: 10px;\n  z-index: 3;\n  color: ${a};\n  fill: ${a};\n}\n.flatpickr-months .flatpickr-prev-month.flatpickr-disabled,\n.flatpickr-months .flatpickr-next-month.flatpickr-disabled {\n  display: none;\n}\n.flatpickr-months .flatpickr-prev-month i,\n.flatpickr-months .flatpickr-next-month i {\n  position: relative;\n}\n.flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,\n.flatpickr-months .flatpickr-next-month.flatpickr-prev-month {\n/*\n      /*rtl:begin:ignore*/\n/*\n      */\n  left: 0;\n/*\n      /*rtl:end:ignore*/\n/*\n      */\n}\n/*\n      /*rtl:begin:ignore*/\n/*\n      /*rtl:end:ignore*/\n.flatpickr-months .flatpickr-prev-month.flatpickr-next-month,\n.flatpickr-months .flatpickr-next-month.flatpickr-next-month {\n/*\n      /*rtl:begin:ignore*/\n/*\n      */\n  right: 0;\n/*\n      /*rtl:end:ignore*/\n/*\n      */\n}\n/*\n      /*rtl:begin:ignore*/\n/*\n      /*rtl:end:ignore*/\n.flatpickr-months .flatpickr-prev-month:hover,\n.flatpickr-months .flatpickr-next-month:hover {\n  color: ${i};\n}\n.flatpickr-months .flatpickr-prev-month:hover svg,\n.flatpickr-months .flatpickr-next-month:hover svg {\n  fill: ${i};\n}\n.flatpickr-months .flatpickr-prev-month svg,\n.flatpickr-months .flatpickr-next-month svg {\n  width: 14px;\n  height: 14px;\n}\n.flatpickr-months .flatpickr-prev-month svg path,\n.flatpickr-months .flatpickr-next-month svg path {\n  -webkit-transition: fill 0.1s;\n  transition: fill 0.1s;\n  fill: inherit;\n}\n.numInputWrapper {\n  position: relative;\n  height: auto;\n}\n.numInputWrapper input,\n.numInputWrapper span {\n  display: inline-block;\n}\n.numInputWrapper input {\n  width: 100%;\n}\n.numInputWrapper input::-ms-clear {\n  display: none;\n}\n.numInputWrapper input::-webkit-outer-spin-button,\n.numInputWrapper input::-webkit-inner-spin-button {\n  margin: 0;\n  -webkit-appearance: none;\n}\n.numInputWrapper span {\n  position: absolute;\n  right: 0;\n  width: 14px;\n  padding: 0 4px 0 2px;\n  height: 50%;\n  line-height: 50%;\n  opacity: 0;\n  cursor: pointer;\n  border: 1px solid rgba(64,72,72,0.15);\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.numInputWrapper span:hover {\n  background: rgba(0,0,0,0.1);\n}\n.numInputWrapper span:active {\n  background: rgba(0,0,0,0.2);\n}\n.numInputWrapper span:after {\n  display: block;\n  content: "";\n  position: absolute;\n}\n.numInputWrapper span.arrowUp {\n  top: 0;\n  border-bottom: 0;\n}\n.numInputWrapper span.arrowUp:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(64,72,72,0.6);\n  top: 26%;\n}\n.numInputWrapper span.arrowDown {\n  top: 50%;\n}\n.numInputWrapper span.arrowDown:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid rgba(64,72,72,0.6);\n  top: 40%;\n}\n.numInputWrapper span svg {\n  width: inherit;\n  height: auto;\n}\n.numInputWrapper span svg path {\n  fill: rgba(60,63,64,0.5);\n}\n.numInputWrapper:hover {\n  background: rgba(0,0,0,0.05);\n}\n.numInputWrapper:hover span {\n  opacity: 1;\n}\n.flatpickr-current-month {\n  margin-top: 1px;\n  font-size: 125%;\n  line-height: inherit;\n  font-weight: 300;\n  color: inherit;\n  position: absolute;\n  width: 75%;\n  left: 12.5%;\n  padding: 7.48px 0 0 0;\n  line-height: 1;\n  height: 34px;\n  display: inline-block;\n  text-align: center;\n  -webkit-transform: translate3d(0px, 0px, 0px);\n          transform: translate3d(0px, 0px, 0px);\n}\n.flatpickr-current-month span.cur-month {\n  font-family: inherit;\n  font-weight: 700;\n  color: inherit;\n  display: inline-block;\n  margin-left: 0.5ch;\n  padding: 0;\n}\n.flatpickr-current-month span.cur-month:hover {\n  background: rgba(0,0,0,0.05);\n}\n.flatpickr-current-month .numInputWrapper {\n  width: 6ch;\n  width: 7ch\\0;\n  display: inline-block;\n}\n.flatpickr-current-month .numInputWrapper span.arrowUp:after {\n  border-bottom-color: ${a};\n}\n.flatpickr-current-month .numInputWrapper span.arrowDown:after {\n  border-top-color: ${a};\n}\n.flatpickr-current-month input.cur-year {\n  background: transparent;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: inherit;\n  cursor: text;\n  padding: 0 0 0 0.5ch;\n  margin: 0;\n  display: inline-block;\n  font-size: inherit;\n  font-family: inherit;\n  font-weight: 300;\n  line-height: inherit;\n  height: auto;\n  border: 0;\n  border-radius: 0;\n  vertical-align: initial;\n  -webkit-appearance: textfield;\n  -moz-appearance: textfield;\n  appearance: textfield;\n}\n.flatpickr-current-month input.cur-year:focus {\n  outline: 0;\n}\n.flatpickr-current-month input.cur-year[disabled],\n.flatpickr-current-month input.cur-year[disabled]:hover {\n  font-size: 100%;\n  color: rgba(60,63,64,0.5);\n  background: transparent;\n  pointer-events: none;\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months {\n  appearance: menulist;\n  background: transparent;\n  border: none;\n  border-radius: 0;\n  box-sizing: border-box;\n  color: inherit;\n  cursor: pointer;\n  font-size: inherit;\n  font-family: inherit;\n  font-weight: 300;\n  height: auto;\n  line-height: inherit;\n  margin: -1px 0 0 0;\n  outline: none;\n  padding: 0 0 0 0.5ch;\n  position: relative;\n  vertical-align: initial;\n  -webkit-box-sizing: border-box;\n  -webkit-appearance: menulist;\n  -moz-appearance: menulist;\n  width: auto;\n  max-width: 93px;\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months:focus,\n.flatpickr-current-month .flatpickr-monthDropdown-months:active {\n  outline: none;\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months:hover {\n  background: rgba(0,0,0,0.05);\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months .flatpickr-monthDropdown-month {\n  background-color: ${n};\n  outline: none;\n  padding: 0;\n}\n.flatpickr-weekdays {\n  background: transparent;\n  text-align: center;\n  overflow: hidden;\n  width: 100%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 28px;\n}\n.flatpickr-weekdays .flatpickr-weekdaycontainer {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\nspan.flatpickr-weekday {\n  cursor: default;\n  font-size: 90%;\n  background: transparent;\n  color: ${a};\n  line-height: 1;\n  margin: 0;\n  text-align: center;\n  display: block;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  font-weight: bolder;\n}\n.dayContainer,\n.flatpickr-weeks {\n  padding: 1px 0 0 0;\n}\n.flatpickr-days {\n  position: relative;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n  width: 200px;\n}\n.flatpickr-days:focus {\n  outline: 0;\n}\n.dayContainer {\n  padding: 0;\n  outline: 0;\n  text-align: left;\n  width: 200px;\n  min-width: 200px;\n  max-width: 200px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  display: inline-block;\n  display: -ms-flexbox;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-wrap: wrap;\n          flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  -ms-flex-pack: justify;\n  -webkit-justify-content: space-around;\n          justify-content: space-around;\n  -webkit-transform: translate3d(0px, 0px, 0px);\n          transform: translate3d(0px, 0px, 0px);\n  opacity: 1;\n}\n.dayContainer + .dayContainer {\n  -webkit-box-shadow: -1px 0 0 ${s};\n          box-shadow: -1px 0 0 ${s};\n}\n.flatpickr-day {\n  background: none;\n  border: 1px solid transparent;\n  border-radius: 150px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: ${a};\n  cursor: pointer;\n  font-weight: 400;\n  width: 14.2857143%;\n  -webkit-flex-basis: 14.2857143%;\n      -ms-flex-preferred-size: 14.2857143%;\n          flex-basis: 14.2857143%;\n  max-width: 32px;\n  height: 32px;\n  line-height: 30px;\n  margin: 0;\n  display: inline-block;\n  position: relative;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  text-align: center;\n}\n.flatpickr-day.inRange,\n.flatpickr-day.prevMonthDay.inRange,\n.flatpickr-day.nextMonthDay.inRange,\n.flatpickr-day.today.inRange,\n.flatpickr-day.prevMonthDay.today.inRange,\n.flatpickr-day.nextMonthDay.today.inRange,\n.flatpickr-day:hover,\n.flatpickr-day.prevMonthDay:hover,\n.flatpickr-day.nextMonthDay:hover,\n.flatpickr-day:focus,\n.flatpickr-day.prevMonthDay:focus,\n.flatpickr-day.nextMonthDay:focus {\n  cursor: pointer;\n  outline: 0;\n  background: ${i};\n  border-color: ${i};\n}\n.flatpickr-day.today {\n  border-color: ${i};\n}\n.flatpickr-day.today:hover,\n.flatpickr-day.today:focus {\n  border-color: ${i};\n  background: ${i};\n  color: ${n};\n}\n.flatpickr-day.selected,\n.flatpickr-day.startRange,\n.flatpickr-day.endRange,\n.flatpickr-day.selected.inRange,\n.flatpickr-day.startRange.inRange,\n.flatpickr-day.endRange.inRange,\n.flatpickr-day.selected:focus,\n.flatpickr-day.startRange:focus,\n.flatpickr-day.endRange:focus,\n.flatpickr-day.selected:hover,\n.flatpickr-day.startRange:hover,\n.flatpickr-day.endRange:hover,\n.flatpickr-day.selected.prevMonthDay,\n.flatpickr-day.startRange.prevMonthDay,\n.flatpickr-day.endRange.prevMonthDay,\n.flatpickr-day.selected.nextMonthDay,\n.flatpickr-day.startRange.nextMonthDay,\n.flatpickr-day.endRange.nextMonthDay {\n  background: ${t};\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  color: ${n};\n  border-color: ${t};\n}\n.flatpickr-day.selected.startRange,\n.flatpickr-day.startRange.startRange,\n.flatpickr-day.endRange.startRange {\n  border-radius: 50px 0 0 50px;\n}\n.flatpickr-day.selected.endRange,\n.flatpickr-day.startRange.endRange,\n.flatpickr-day.endRange.endRange {\n  border-radius: 0 50px 50px 0;\n}\n.flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n+1)),\n.flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n+1)),\n.flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n+1)) {\n  -webkit-box-shadow: -10px 0 0 ${t};\n          box-shadow: -10px 0 0 ${t};\n}\n.flatpickr-day.selected.startRange.endRange,\n.flatpickr-day.startRange.startRange.endRange,\n.flatpickr-day.endRange.startRange.endRange {\n  border-radius: 50px;\n}\n.flatpickr-day.inRange {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 ${i}, 5px 0 0 ${i};\n          box-shadow: -5px 0 0 ${i}, 5px 0 0 ${i};\n}\n.flatpickr-day.flatpickr-disabled,\n.flatpickr-day.flatpickr-disabled:hover,\n.flatpickr-day.prevMonthDay,\n.flatpickr-day.nextMonthDay,\n.flatpickr-day.notAllowed,\n.flatpickr-day.notAllowed.prevMonthDay,\n.flatpickr-day.notAllowed.nextMonthDay {\n  color: rgba(64,72,72,0.3);\n  background: transparent;\n  cursor: default;\n}\n.flatpickr-day.flatpickr-disabled,\n.flatpickr-day.flatpickr-disabled:hover {\n  cursor: not-allowed;\n  color: rgba(64,72,72,0.1);\n}\n.flatpickr-day.week.selected {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 ${t}, 5px 0 0 ${t};\n          box-shadow: -5px 0 0 ${t}, 5px 0 0 ${t};\n}\n.flatpickr-day.hidden {\n  visibility: hidden;\n}\n.rangeMode .flatpickr-day {\n  margin-top: 1px;\n}\n.flatpickr-weekwrapper {\n  float: left;\n}\n.flatpickr-weekwrapper .flatpickr-weeks {\n  padding: 0 12px;\n  -webkit-box-shadow: 1px 0 0 ${s};\n          box-shadow: 1px 0 0 ${s};\n}\n.flatpickr-weekwrapper .flatpickr-weekday {\n  float: none;\n  width: 100%;\n  line-height: 28px;\n}\n.flatpickr-weekwrapper span.flatpickr-day,\n.flatpickr-weekwrapper span.flatpickr-day:hover {\n  display: block;\n  width: 100%;\n  max-width: none;\n  color: rgba(64,72,72,0.3);\n  background: transparent;\n  cursor: default;\n  border: none;\n}\n.flatpickr-innerContainer {\n  display: block;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  overflow: hidden;\n}\n.flatpickr-rContainer {\n  display: inline-block;\n  padding: 0;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.flatpickr-time {\n  text-align: center;\n  outline: 0;\n  display: block;\n  height: 0;\n  line-height: 40px;\n  max-height: 40px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flatpickr-time:after {\n  content: "";\n  display: table;\n  clear: both;\n}\n.flatpickr-time .numInputWrapper {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  width: 40%;\n  height: 40px;\n  float: left;\n}\n.flatpickr-time .numInputWrapper span.arrowUp:after {\n  border-bottom-color: ${a};\n}\n.flatpickr-time .numInputWrapper span.arrowDown:after {\n  border-top-color: ${a};\n}\n.flatpickr-time.hasSeconds .numInputWrapper {\n  width: 26%;\n}\n.flatpickr-time.time24hr .numInputWrapper {\n  width: 49%;\n}\n.flatpickr-time input {\n  background: transparent;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  border: 0;\n  border-radius: 0;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  height: inherit;\n  line-height: inherit;\n  color: ${a};\n  font-size: 14px;\n  position: relative;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-appearance: textfield;\n  -moz-appearance: textfield;\n  appearance: textfield;\n}\n.flatpickr-time input.flatpickr-hour {\n  font-weight: bold;\n}\n.flatpickr-time input.flatpickr-minute,\n.flatpickr-time input.flatpickr-second {\n  font-weight: 400;\n}\n.flatpickr-time input:focus {\n  outline: 0;\n  border: 0;\n}\n.flatpickr-time .flatpickr-time-separator,\n.flatpickr-time .flatpickr-am-pm {\n  height: inherit;\n  float: left;\n  line-height: inherit;\n  color: ${a};\n  font-weight: bold;\n  width: 2%;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-align-self: center;\n      -ms-flex-item-align: center;\n          align-self: center;\n}\n.flatpickr-time .flatpickr-am-pm {\n  outline: 0;\n  width: 18%;\n  cursor: pointer;\n  text-align: center;\n  font-weight: 400;\n}\n.flatpickr-time input:hover,\n.flatpickr-time .flatpickr-am-pm:hover,\n.flatpickr-time input:focus,\n.flatpickr-time .flatpickr-am-pm:focus {\n  background: #f1f1f1;\n}\n.flatpickr-input[readonly] {\n  cursor: pointer;\n}\n@-webkit-keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n            transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n            transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n            transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n            transform: translate3d(0, 0, 0);\n  }\n}\n.flatpickr-calendar {\n  width: 200px;\n}\n.dayContainer {\n  padding: 0;\n  border-right: 0;\n}\nspan.flatpickr-day,\nspan.flatpickr-day.prevMonthDay,\nspan.flatpickr-day.nextMonthDay {\n  border-radius: 0 !important;\n  border: 1px solid ${i};\n  max-width: none;\n  border-right-color: transparent;\n}\nspan.flatpickr-day:nth-child(n+8),\nspan.flatpickr-day.prevMonthDay:nth-child(n+8),\nspan.flatpickr-day.nextMonthDay:nth-child(n+8) {\n  border-top-color: transparent;\n}\nspan.flatpickr-day:nth-child(7n-6),\nspan.flatpickr-day.prevMonthDay:nth-child(7n-6),\nspan.flatpickr-day.nextMonthDay:nth-child(7n-6) {\n  border-left: 0;\n}\nspan.flatpickr-day:nth-child(n+36),\nspan.flatpickr-day.prevMonthDay:nth-child(n+36),\nspan.flatpickr-day.nextMonthDay:nth-child(n+36) {\n  border-bottom: 0;\n}\nspan.flatpickr-day:nth-child(-n+7),\nspan.flatpickr-day.prevMonthDay:nth-child(-n+7),\nspan.flatpickr-day.nextMonthDay:nth-child(-n+7) {\n  margin-top: 0;\n}\nspan.flatpickr-day.today:not(.selected),\nspan.flatpickr-day.prevMonthDay.today:not(.selected),\nspan.flatpickr-day.nextMonthDay.today:not(.selected) {\n  border-color: ${i};\n  border-right-color: transparent;\n  border-top-color: transparent;\n  border-bottom-color: ${i};\n}\nspan.flatpickr-day.today:not(.selected):hover,\nspan.flatpickr-day.prevMonthDay.today:not(.selected):hover,\nspan.flatpickr-day.nextMonthDay.today:not(.selected):hover {\n  border: 1px solid ${i};\n}\nspan.flatpickr-day.startRange,\nspan.flatpickr-day.prevMonthDay.startRange,\nspan.flatpickr-day.nextMonthDay.startRange,\nspan.flatpickr-day.endRange,\nspan.flatpickr-day.prevMonthDay.endRange,\nspan.flatpickr-day.nextMonthDay.endRange {\n  border-color: ${t};\n}\nspan.flatpickr-day.today,\nspan.flatpickr-day.prevMonthDay.today,\nspan.flatpickr-day.nextMonthDay.today,\nspan.flatpickr-day.selected,\nspan.flatpickr-day.prevMonthDay.selected,\nspan.flatpickr-day.nextMonthDay.selected {\n  z-index: 2;\n}\n.rangeMode .flatpickr-day {\n  margin-top: -1px;\n}\n.flatpickr-weekwrapper .flatpickr-weeks {\n  -webkit-box-shadow: none;\n          box-shadow: none;\n}\n.flatpickr-weekwrapper span.flatpickr-day {\n  border: 0;\n  margin: -1px 0 0 -1px;\n}\n.hasWeeks .flatpickr-days {\n  border-right: 0;\n}\n\n\t@media screen and (min-width:0\\0) and (min-resolution: +72dpi) {\n\t\tspan.flatpickr-day {\n\t\t\tdisplay: block;\n\t\t\t-webkit-box-flex: 1;\n\t\t\t-webkit-flex: 1 0 auto;\n\t\t\t    -ms-flex: 1 0 auto;\n\t\t\t        flex: 1 0 auto;\n\t\t}\n\t}\n\t\t`,this._root.nonce))}}Object.defineProperty(Bt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DateRangeSelector"}),Object.defineProperty(Bt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ge.a.classNames.concat([Bt.className])});var Ht=i(19);class zt extends Ge.a{constructor(){super(...arguments),Object.defineProperty(this,"_groupChangedDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_groupChangedTo",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew();const e=this.getPrivate("button");e.className=e.className+" am5stock-no-hover",this._initPeriodButtons()}_initPeriodButtons(){const e=this.getPrivate("label");e.style.display="";const t=this.get("periods",[]),i=this._getAxis();i.onPrivate("min",(()=>this._setPeriodButtonStatus())),i.onPrivate("max",(()=>this._setPeriodButtonStatus())),D.each(t,(t=>{const a=document.createElement("a");a.innerHTML=t.name||t.timeUnit.toUpperCase()+t.count||"1",a.className="am5stock-link",a.setAttribute("data-period",t.timeUnit+(t.count||"")),e.appendChild(a),this._disposers.push(Ke.addEventListener(a,"click",(e=>{this.setPrivate("deferReset",!1),this._resetActiveButtons(),this.selectPeriod(t),this.setPrivate("deferReset",!0),Ke.addClass(a,"am5stock-active");const s=this.getPrivate("deferTimeout");s&&s.dispose(),this.setPrivate("deferTimeout",this.setTimeout((()=>this.setPrivate("deferReset",!1)),i.get("interpolationDuration",1e3)+200))})))})),Ke.supports("keyboardevents")&&this._disposers.push(Ke.addEventListener(document,"keydown",(t=>{if(this.isAccessible()){const i=this.getPrivate("button");if(document.activeElement&&(document.activeElement===i||Ke.contains(i,document.activeElement)))if(-1!==[37,38,39,40].indexOf(t.keyCode)){const i=37==t.keyCode||38==t.keyCode?-1:1,a=this._getPeriodButtons(),s=e.querySelectorAll(".am5stock-link:focus");let n=-1;s.length>0&&a.forEach(((e,t)=>{e===s.item(0)&&(n=t)})),n+=i,n<0?n=a.length-1:n>=a.length&&(n=0),Ke.focus(a.item(n))}else 13==t.keyCode&&document.activeElement.click()}}))),this._maybeMakeAccessible()}_resetActiveButtons(){if(!0!==this.getPrivate("deferReset")){const e=this.getPrivate("label").getElementsByClassName("am5stock-active");D.each(e,(e=>{Ke.removeClass(e,"am5stock-active")}));let t=this.getPrivate("axis");t||(t=this._getAxis(),this.setPrivate("axis",t),this._disposers.push(new Ht.e([t.on("start",(()=>this._resetActiveButtons())),t.on("end",(()=>this._resetActiveButtons()))])))}}_setPeriodButtonStatus(){if(this.get("hideLongPeriods")){let e=this.getPrivate("axis");const t=this.getPrivate("label").getElementsByTagName("a");if(!e){e=this._getAxis();const i=e.getPrivate("min",0),a=e.getPrivate("max",0);if(i&&a){const e=a-i,s=this.get("periods",[]);D.each(s,(i=>{if("ytd"!==i.timeUnit&&"max"!==i.timeUnit){const a=ge.getDuration(i.timeUnit,i.count||1),s=i.timeUnit+(i.count||"");for(let i=0;i<t.length;i++){const n=t[i];n.getAttribute("data-period")==s&&(a>e?Ke.addClass(n,"am5stock-hidden"):Ke.removeClass(n,"am5stock-hidden"))}}}))}}}}_afterChanged(){super._afterChanged(),this.isPrivateDirty("toolbar")&&this._maybeMakeAccessible()}_getChart(){return this.get("stockChart").panels.getIndex(0)}_getAxis(){return this._getChart().xAxes.getIndex(0)}_getMaxOrMax(e){const t=this.get("stockChart").get("stockSeries"),i=this._getAxis();let a=i.getPrivate(e);if(t&&t.dataItems.length>0){let s=i.get("baseInterval"),n=s.timeUnit+s.count;const r=t._dataSets[n]||t.dataItems,o=r["min"==e?0:r.length-1];"min"==e&&void 0!==o.open&&void 0!==o.open.valueX?a=o.open.valueX:"max"==e&&void 0!==o.close&&void 0!==o.close.valueX&&(a=o.close.valueX-1)}return new Date(a)}_getMax(){return this._getMaxOrMax("max")}_getMin(){return this._getMaxOrMax("min")}selectPeriod(e){const t="periodselected";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,period:e});const i="start"==this.get("zoomTo","end");if(this._highlightPeriod(e),"max"==e.timeUnit)this._getChart().zoomOut();else if("custom"==e.timeUnit){const t=this._getAxis();let i=e.start||this._getMin(),a=e.end||this._getMax();t.zoomToDates(i,a)}else{const t=this._getAxis();let a,s=this._getMax();if("ytd"==e.timeUnit){if(a=new Date(s.getFullYear(),0,1,0,0,0,0),s=this._getMax(),t.get("groupData"))return t.zoomToDates(a,s,0),void setTimeout((()=>{t.zoomToDates(a,s,0)}),10)}else{const n=e.timeUnit;if(t.get("groupData")){const r=t.getGroupInterval(ge.getDuration(n,e.count));if(r){const o=this._root.locale.firstDayOfWeek,l=this._root.timezone,c=this._root.utc;if(i){a=this._getMin();let t=a.getTime();null!=t&&(a=ge.round(new Date(t),r.timeUnit,r.count,o,c,void 0,l),a.setTime(a.getTime()+ge.getDuration(r.timeUnit,.95*r.count)),a=ge.round(a,r.timeUnit,r.count,o,c,void 0,l)),s=ge.add(new Date(a),n,e.count||1)}else{let t=this._getMax().getTime();null!=t&&(s=ge.round(new Date(t),r.timeUnit,r.count,o,c,void 0,l),s.setTime(s.getTime()+ge.getDuration(r.timeUnit,1.05*r.count)),s=ge.round(s,r.timeUnit,r.count,o,c,void 0,l)),a=ge.add(new Date(s),n,-1*(e.count||1))}return this._groupChangedDp&&(this._groupChangedDp.dispose(),this._groupChangedDp=void 0),this._groupChangedTo&&this._groupChangedTo.dispose(),this._groupChangedDp=t.events.once("groupintervalchanged",(()=>{t.zoomToDates(a,s,0)})),t.zoomToDates(a,s,0),void(this._groupChangedTo=this.setTimeout((()=>{this._groupChangedDp&&this._groupChangedDp.dispose(),this._groupChangedTo=void 0}),500))}}i?(a=this._getMin(),s=ge.add(new Date(a),n,e.count||1)):a=ge.add(new Date(s),n,-1*(e.count||1))}t.zoomToDates(a,s)}}_highlightPeriod(e){const t=e.timeUnit+(e.count||""),i=this.getPrivate("label").getElementsByTagName("a");for(let a=0;a<i.length;a++){const e=i[a];e.getAttribute("data-period")==t&&"custom"!=t?Ke.addClass(e,"am5stock-active"):Ke.removeClass(e,"am5stock-active")}}_maybeMakeAccessible(){if(super._maybeMakeAccessible(),this.isAccessible()){const e=this.getPrivate("button");e.setAttribute("aria-label",e.getAttribute("title")+"; "+this._t("Press ENTER or use arrow keys to navigate"));this._getPeriodButtons().forEach((e=>{e.setAttribute("tabindex","-1"),e.setAttribute("aria-label",e.getAttribute("title")||"")}))}}_getPeriodButtons(){return this.getPrivate("label").querySelectorAll(".am5stock-link")}}Object.defineProperty(zt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PeriodSelector"}),Object.defineProperty(zt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ge.a.classNames.concat([zt.className])});class Wt extends at{}Object.defineProperty(Wt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SeriesTypeControl"}),Object.defineProperty(Wt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:at.classNames.concat([Wt.className])});class $t extends at{_getDefaultIcon(){return et.a.getIcon("Interval")}}Object.defineProperty($t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"IntervalControl"}),Object.defineProperty($t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:at.classNames.concat([$t.className])});class Ut extends Ge.a{_afterNew(){super._afterNew(),this.events.on("click",(()=>{const e=this.get("stockChart");e.panels.each((e=>{e.drawings.each((e=>{e.data.clear()}))})),e.indicators.clear()}))}_getDefaultIcon(){return et.a.getIcon("Reset")}}Object.defineProperty(Ut,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ResetControl"}),Object.defineProperty(Ut,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ge.a.classNames.concat([Ut.className])});class Jt extends at{_afterNew(){super._afterNew(),this.setPrivate("storageId",window.location.href+"-"+this.root.dom.id);const e=this.get("stockChart"),t=this.getPrivate("dropdown");localStorage&&"1"==localStorage.getItem(this._getStorageId("autosave"))&&this.root.events.once("frameended",(()=>{this.restoreData(),this.set("autoSave",!0)})),t.events.on("changed",(e=>{if("autosave"==e.item.id){const t=!e.item.checked;this.set("autoSave",t),t&&this.saveData()}})),t.events.on("invoked",(e=>{"save"==e.item.id?this.saveData():"restore"==e.item.id?this.restoreData():"clear"==e.item.id&&this.clearData()})),this.on("active",(()=>{this._populateInputs()})),e.events.on("drawingsupdated",(e=>{this.get("autoSave")&&this.saveData()})),e.events.on("indicatorsupdated",(e=>{this.get("autoSave")&&this.saveData()}))}_beforeChanged(){if(super._beforeChanged(),this.isDirty("autoSave")&&localStorage){this.get("autoSave",!1)?localStorage.setItem(this._getStorageId("autosave"),"1"):localStorage.removeItem(this._getStorageId("autosave")),this._populateInputs()}}saveData(){if(localStorage){const e=this._getDrawingControl(),t=this._getIndicatorControl(),i=e.serializeDrawings("string","  "),a=t.serializeIndicators("string","  ");"[]"==i?localStorage.removeItem(this._getStorageId("drawings")):localStorage.setItem(this._getStorageId("drawings"),i),"[]"==a?localStorage.removeItem(this._getStorageId("indicators")):localStorage.setItem(this._getStorageId("indicators"),a),this.events.dispatch("saved",{target:this,type:"saved",drawings:i,indicators:a})}}restoreData(){if(localStorage){const e=this.get("stockChart");e.panels.each((e=>{e.drawings.each((e=>{e.data.clear()}))})),e.indicators.clear();const t=this._getDrawingControl(),i=this._getIndicatorControl(),a=localStorage.getItem(this._getStorageId("drawings"))||"[]",s=localStorage.getItem(this._getStorageId("indicators"))||"[]";t.unserializeDrawings(a),i.unserializeIndicators(s),this.events.dispatch("restored",{target:this,type:"restored",drawings:a,indicators:s})}}clearData(){localStorage&&(localStorage.removeItem(this._getStorageId("drawings")),localStorage.removeItem(this._getStorageId("indicators")),this.events.dispatch("cleared",{target:this,type:"cleared"}))}_getDefaultIcon(){return et.a.getIcon("Save")}_populateInputs(){const e=this.getPrivate("dropdown"),t=e.get("items",[]),i=this.get("autoSave",!1),a=localStorage&&(null!==localStorage.getItem(this._getStorageId("drawings"))||null!==localStorage.getItem(this._getStorageId("indicators")));D.each(t,(e=>{localStorage?"restore"==e.id?e.disabled=i||!a:"clear"==e.id?e.disabled=!a:"save"==e.id?e.disabled=i:"autosave"==e.id&&(e.checked=i):e.disabled=!0})),e.rebuildList()}_getStorageId(e){return"am5-stock-"+this.get("storageId",this.getPrivate("storageId",""))+"-"+e}_getDrawingControl(){let e=this.getPrivate("drawingControl");if(e)return e;const t=this.get("stockChart");return e=t.getControl("DrawingControl"),e||(e=ct.new(this.root,{stockChart:t}),this.setPrivate("drawingControl",e)),e}_getIndicatorControl(){let e=this.getPrivate("indicatorControl");if(e)return e;const t=this.get("stockChart");return e=t.getControl("IndicatorControl"),e||(e=ht.new(this.root,{stockChart:t}),this.setPrivate("indicatorControl",e)),e}}Object.defineProperty(Jt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DataSaveControl"}),Object.defineProperty(Jt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:at.classNames.concat([Jt.className])});class Kt extends at{_afterNew(){super._afterNew();const e=this.getPrivate("dropdown");e.events.on("changed",(e=>{const t=this.get("stockChart");if(t.get("stockSeries")&&("y-scale"==e.item.id?"percent"==e.item.value?(t.setPercentScale(!0),this._setLogarithmic(!1)):(t.setPercentScale(!1),this._setLogarithmic("logarithmic"==e.item.value)):"fills"==e.item.id&&this._setFills(e.checked)),"autosave"==e.item.id){const t=e.checked;this.getPrivate("dataSaveControl").set("autoSave",t)}})),this.on("active",(()=>{this._populateInputs()})),this._disposers.push(this.root.events.on("frameended",(()=>{const t=this.get("stockChart"),i=!(!t.getControl("IndicatorControl")&&!t.getControl("DrawingControl"));let a=t.getControl("DataSaveControl");if(i)a||(a=Jt.new(this.root,{stockChart:t,autoSave:this.get("autoSave",!1),storageId:this.get("storageId")})),this.setPrivate("dataSaveControl",a),this.set("autoSave",a.get("autoSave")),this._populateInputs();else{const t=e.get("exclude",[]);t.push("save"),t.push("autosave"),e.set("exclude",["save","autosave"])}})))}_getDefaultIcon(){return et.a.getIcon("Settings")}_populateInputs(){const e=this.getPrivate("button").getElementsByTagName("input"),t=this._getYScale();for(let i=0;i<e.length;i++){const a=e[i];switch(a.id){case"am5stock-list-autosave":a.checked=this.get("autoSave",this.getPrivate("dataSaveControl").get("autoSave",!1));break;case"am5stock-list-fills":a.checked=this._getFillEnabled();break;case"am5stock-list-y-scale-percent":case"am5stock-list-y-scale-regular":case"am5stock-list-y-scale-logarithmic":a.checked=a.value==t}}}_getFillEnabled(){const e=this.get("stockChart").get("stockSeries");if(e){const t=e.get("xAxis").get("renderer").axisFills.values;return t.length>0&&t[0].get("visible",!1)}return!1}_getYScale(){const e=this.get("stockChart").get("stockSeries");if(e){const t=e.get("yAxis");if(t instanceof g.a){if("valueYChangeSelectionPercent"==e.get("valueYShow"))return"percent";if(t.get("logarithmic"))return"logarithmic"}}return"regular"}_setLogarithmic(e){const t=this.get("stockChart").get("stockSeries");if(t){const i=t.get("yAxis");i instanceof g.a&&(D.each(i.series,(e=>{e.resetExtremes(),e.markDirtyValues()})),i.set("logarithmic",e))}}_setFills(e){this.get("stockChart").panels.each((t=>{t.xAxes.each((t=>{t.get("renderer").axisFills.template.set("visible",e),t.get("renderer").grid.template.set("forceHidden",e)}))}))}}Object.defineProperty(Kt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SettingsControl"}),Object.defineProperty(Kt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:at.classNames.concat([Kt.className])});class qt extends at{_getDefaultIcon(){return et.a.getIcon("Comparison")}}Object.defineProperty(qt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ComparisonControl"}),Object.defineProperty(qt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:at.classNames.concat([qt.className])})},373:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var a=i(20),s=i(29),n=i(6),r=i(5),o=i(24),l=i(88),c=i(4),h=i(2),d=i(13);class u extends a.a{constructor(){super(...arguments),Object.defineProperty(this,"_refs",{enumerable:!0,configurable:!0,writable:!0,value:{}})}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t>this.get("maxDepth",2))return;if(!1===e||!0===e)return e;if(c.isArray(e)){const a=[];return h.each(e,(e=>{a.push(this.serialize(e,t,i))})),a}if(e instanceof l.b){const a=[];return h.each(e.values,(e=>{a.push(this.serialize(e,t,i))})),a}const u={},g=e instanceof a.a||e instanceof o.a||e instanceof n.a||e instanceof r.a,p=this.get("fullSettings",[]);if(e instanceof a.a){u.type=e.className;let a=d.keys(e._settings);const s=this.get("includeSettings",[]),n=this.get("excludeSettings",[]);s.length?a=s:n.length&&(a=a.filter((e=>-1===n.indexOf(e)))),a=a.filter((t=>e.isUserSetting(t))),a.length&&(u.settings={},h.each(a,(a=>{const s=e.get(a);void 0!==s&&(u.settings[a]=this.serialize(s,t+1,i||-1!==p.indexOf(a)))})))}else if(e instanceof o.a){u.type="Template";let i=d.keys(e._settings);return i.length&&(u.settings={},h.each(i,(i=>{u.settings[i]=this.serialize(e.get(i),t+1,-1!==p.indexOf(i))}))),u}if(e instanceof s.a&&e.data.length&&(u.properties={data:this.serialize(e.data.values,1,!0)}),e instanceof n.a)return{type:"Color",value:e.toCSSHex()};if(e instanceof r.a)return{type:"Percent",value:e.percent};if(c.isString(e)||c.isNumber(e))return e;if(c.isObject(e)&&i&&!g){const a=this.get("excludeProperties",[]);d.each(e,((e,s)=>{-1===a.indexOf(e)&&void 0!==s&&(u[e]=this.serialize(s,t+1,i))}))}return 0==t&&d.keys(this._refs).length&&(u.refs=this._refs),u}}Object.defineProperty(u,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Serializer"}),Object.defineProperty(u,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:a.a.classNames.concat([u.className])})},465:function(e,t,i){"use strict";"function"!==typeof Object.assign&&(Object.assign=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var a=function(t){t&&Object.keys(t).forEach((function(i){return e[i]=t[i]}))},s=0,n=t;s<n.length;s++){a(n[s])}return e})}}]);
//# sourceMappingURL=13.a2b3c4a7.chunk.js.map